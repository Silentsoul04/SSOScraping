{"link":"bmednet.it","html":"<head>\n<meta charset=\"utf-8\">\n<script type=\"text/javascript\" src=\"https://dtstats.mediolanum.it/dtagent6312_23pqrtx_1013.js\" data-dtconfig=\"rid=RID_1375912446|rpid=384724467|domain=bmednet.it|cors=1|tp=500,50,0,1|reportUrl=https://dtstats.mediolanum.it/dynaTraceMonitor\"></script><link rel=\"stylesheet\" type=\"text/css\" href=\"css/bmednet.css\">\n\n<!--[if lt IE 9]><script type=\"text/javascript\" src=\"jquery/bmednet-ie8.js\"></script><![endif]-->\n<script src=\"jquery/jquery-1.8.3.min.js\"></script>\n<script src=\"jquery/bmednet-lib.js\"></script>\n<script src=\"jquery/bmednet.js\"></script>\n<script src=\"jquery/browser_check.js\"></script>\n<script>\n$(window).bind(\"pageshow\", function(event) {\n    if (event.originalEvent.persisted) {\n        window.location.reload();\n    }\n});\n\n$(document).ready(function(){\n\tbrowser_check();\n\tvar host1 = window.location.hostname;\n\tif(((host1.indexOf(\"svil\")!=-1) || (host1.indexOf(\"uat\")!=-1) )){\n\t\n\t\tdocument.getElementById(\"reset_par\").innerHTML = \"\";\n\t}\n \tcheck_cookie();\n    var tryCount = getParameterByName('authn_try_count');\n\tif (tryCount != \"\"){\n\t\tif(tryCount > 0){\n\t\t\t//alert(\"Nome utente o passwrod errati\");\n\t\t\tvar errorCode = getParameterByName('p_error_code');\n\t\t\tswitch(errorCode){\n\t\t\t\n\t\t\t\tcase 'OAM-1': \n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Nome utente o password errati\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-2':\n\t\t\t\t\tvar state =  ReadCookie(\"MPM_Cookie\");\n\t\t\t\t\tvar host = window.location.hostname;\n\t\t\t\t\tif((state == \"false\") && !((host.indexOf(\"svil\")!=-1) || (host.indexOf(\"uat\")!=-1) )){\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Verifica delle credenziali in corso\";\n\t\t\t\t\tSetCookie(\"MPM_Cookie\",\"true\",1);\t\n\t\t\t\t\tvar usr = ReadCookie(\"usernameCookie\");\n\t\t\t                //var host = window.location.hostname;\n\t\t\t\t\tif((host.indexOf(\"svil\")!=-1)){\n\n\t\t\t\t\tpost('http://sso-svil.mediolanum.it/MediolanumPasswordManagement/PasswordManagementHandler', {username:usr,end_url:getParameterByName('resource_url'),authn_try_count:getParameterByName('authn_try_count'),contextType:getParameterByName('contextType'),username_type:getParameterByName('username'),contextValue:getParameterByName('contextValue'),password_type:getParameterByName('password'),challenge_url:getParameterByName('challenge_url'),request_id:getParameterByName('request_id'),locale:getParameterByName('locale'),resource_url:getParameterByName('resource_url'),context_root:getContextRoot()}, \"POST\");\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t if((host.indexOf(\"test\")!=-1)){\n\n                                        post('https://sso-test.mediolanum.it/MediolanumPasswordManagement/PasswordManagementHandler', {username:usr,end_url:getParameterByName('resource_url'),authn_try_count:getParameterByName('authn_try_count'),contextType:getParameterByName('contextType'),username_type:getParameterByName('username'),contextValue:getParameterByName('contextValue'),password_type:getParameterByName('password'),challenge_url:getParameterByName('challenge_url'),request_id:getParameterByName('request_id'),locale:getParameterByName('locale'),resource_url:getParameterByName('resource_url'),context_root:getContextRoot()}, \"POST\");\n                                }\n\t\t\t\t else{\n                if((host.indexOf(\"uat\")!=-1)){\n\n post('https://sso-preprod.mediolanum.it/MediolanumPasswordManagement/PasswordManagementHandler', {username:usr,end_url:getParameterByName('resource_url'),authn_try_count:getParameterByName('authn_try_count'),contextType:getParameterByName('contextType'),username_type:getParameterByName('username'),contextValue:getParameterByName('contextValue'),password_type:getParameterByName('password'),challenge_url:getParameterByName('challenge_url'),request_id:getParameterByName('request_id'),locale:getParameterByName('locale'),resource_url:getParameterByName('resource_url'),context_root:getContextRoot()}, \"POST\");\n\n                }\n                else{\n post('https://sso.mediolanum.it/MediolanumPasswordManagement/PasswordManagementHandler', {username:usr,end_url:getParameterByName('resource_url'),authn_try_count:getParameterByName('authn_try_count'),contextType:getParameterByName('contextType'),username_type:getParameterByName('username'),contextValue:getParameterByName('contextValue'),password_type:getParameterByName('password'),challenge_url:getParameterByName('challenge_url'),request_id:getParameterByName('request_id'),locale:getParameterByName('locale'),resource_url:getParameterByName('resource_url'),context_root:getContextRoot()}, \"POST\");\n\n                }\n\n        }\n\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t document.getElementById(\"writer\").innerHTML = \"Nome utente o password errati\";\n                                 document.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-3':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore riprova. Se il problema persiste, contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-4':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-5':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"L'utente non risulta attivo. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-6':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Hai raggiunto il numero massimo di tentativi di login: il tuo accesso al portale &egrave bloccato. Per favore contatta l'Help Desk per accedere nuovamente alla piattaforma\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-7':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-8':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore riprova. Se il problema persiste, contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-9':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tcase 'OAM-10':\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"La tua password &egrave scaduta. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Si &egrave verificato un errore di sistema. Per favore contatta l'Help Desk\";\n\t\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction check_cookie(){\n\nvar user_cookie = ReadCookie(\"OAM_REMOTE_USER_COOKIE\");\nvar anomalia_cookie = ReadCookie(\"anomalia_login\");\n//alert(user_cookie);\n//alert(anomalia_cookie);\nif((user_cookie != \"\") && (anomalia_cookie == \"false\")){\n\n        //setto il cookie di anomalia\n        SetCookie(\"anomalia_login\",\"true\",'1');\n        //ricavo l'host name dall'url della pagina corrente\n        var host = window.location.hostname;\n        if((host.indexOf(\"svil\")!=-1)){ //sviluppo\n\n                 window.location.assign(\"http://www-svil.bmednet.it/oamsso/logout.html?end_url=http%3A%2F%2Fwww-svil.bmednet.it%2Flr%2F\");\n\n\n        }\n        else{\n                 if((host.indexOf(\"test\")!=-1)){ //test\n\n                         window.location.assign(\"https://www-test.bmednet.it/oamsso/logout.html?end_url=https%3A%2F%2Fwww-test.bmednet.it%2Flr%2F\");\n\n\n                 }\n                 else{\n\t\t\t if((host.indexOf(\"uat\")!=-1)){ // ambiente uat\n\t\t\t\t\n\t\t\t\twindow.location.assign(\"https://www-uat.bmednet.it/oamsso/logout.html?end_url=https%3A%2F%2Fwww-uat.bmednet.it%2Flr%2F\");\t\t\t\t\n\n\t\t\t }\n\t\t\t else{//produzione\n\n                         \twindow.location.assign(\"https://www.bmednet.it/oamsso/logout.html?end_url=https%3A%2F%2Fwww.bmednet.it%2Flr%2F\");\n\t\t\t}\n                }\n        }\n\n\n}//fine if cookie username\n\nelse{\n\n\n\n\n//codice per bookmark\n\ncheckIfBookmarked();\n\n//----------------------------------------\n}\n\n};\n\nfunction checkIfBookmarked() {\n    var hashString = location.hash ;     // https://sso.abc.com/oam-form/login.jsp#URL=https://MyApp.abc.com/\n    var extractedHash = \"NotBookMarked\"\n    if (hashString.length > 0) {\n        var extractedHash = location.hash.substring(0,5) ;\n    }\n\n    // If the URL has a '#URL' value, that indicate user is coming from a book marked page.\n    // #URL= contain the URL value of originally requested URL.\n    // so extract the value and redirect the user to that originally requested URL.\n    if (extractedHash == \"#URL=\"){\n        var remainingURL = location.hash.substring(5, location.hash.length) ;\n//        alert(\"You fool.. You have bookmarked a common login page. Redirecting to \" + remainingURL) ;\n        SetCookie(\"anomalia_login\",\"true\",'1');\n        //-----codice redirec per ambienti\n         //ricavo l'host name dall'url della pagina corrente\n        var host = window.location.hostname;\n        if((host.indexOf(\"svil\")!=-1)){ //sviluppo\n\n                 window.location.assign(\"http://www-svil.bmednet.it/lr/\");\n\n\n        }\n        else{\n                 if((host.indexOf(\"test\")!=-1)){ //test\n\n                         window.location.assign(\"https://www-test.bmednet.it/lr/\");\n\n\n                 }\n\t\t else{\n\t\t\tif((host.indexOf(\"uat\")!=-1)){ //uat{\n\t\t\t\t\n\t\t\t\twindow.location.assign(\"https://www-uat.bmednet.it/lr/\");\t\t\t\t\n\n\t\t\t}\n                 \telse{//produzione\n                        \t window.location.assign(\"https://www.bmednet.it/lr/\");\n                \t}\n\t\t}\n        }\n\n        //--------------------------------\n    }\n    else {\n       // user is not coming from a book marked page. We are good, but user may book mark it.\n       // so embed the Originally Requested URL to as hash.\n        location.hash = 'URL=bookmark';\nvar req_id = getParameterByName('request_id');\n\t\tif(req_id == \"\"){\n\t\t\tvar host = window.location.hostname;\n\t\t\tif((host.indexOf(\"svil\")!=-1)){ //sviluppo\n\t\t\t\twindow.location.assign(\"http://www-svil.bmednet.it/lr/\");\n\t\t\t}else{\n\t\t\t\tif((host.indexOf(\"test\")!=-1)){ //test\n\t\t\t\t\twindow.location.assign(\"https://www-test.bmednet.it/lr/\");\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif((host.indexOf(\"uat\")!=-1)){ //uat{\n\n                                \t\twindow.location.assign(\"https://www-uat.bmednet.it/lr/\");\n\n                        \t\t}\n\t\t\t\t\telse{//produzione\n\t\t\t\t\t\twindow.location.assign(\"https://www.bmednet.it/lr/\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }\n};\n\n\nfunction getContextRoot(){\n    var host = window.location.host;\n    var protocol = window.location.protocol;\n    var url = protocol + \"//\" + host;\n    return url;\n};\n\nfunction post(path, params, method) {\n    method = method || \"post\"; // Set method to post by default if not specified.\n    // The rest of this code assumes you are not using a library.\n    // It can be made less wordy if you use one.\n    var form = document.createElement(\"form\");\n    form.setAttribute(\"method\", method);\n    form.setAttribute(\"action\", path);\n    for(var key in params) {\n        if(params.hasOwnProperty(key)) {\n            var hiddenField = document.createElement(\"input\");\n            hiddenField.setAttribute(\"type\", \"hidden\");\n            hiddenField.setAttribute(\"name\", key);\n            hiddenField.setAttribute(\"value\", params[key]);\n            form.appendChild(hiddenField);\n        }\n    }\n    document.body.appendChild(form);\n    form.submit();\n};\n\nfunction SetCookie(cookieName,cookieValue,nDays) {\n\tif (navigator.appName.indexOf(\"Microsoft\") != -1) {\n\t\tdocument.cookie = cookieName+\"=\"+escape(cookieValue)+ \";path=/\"\n\t}else{\n\t\tvar today = new Date();\n\t\tvar expire = new Date();\n\t\tif (nDays==null || nDays==0) nDays=1;\n\t\texpire.setTime(today.getTime() + 3600000*24*nDays);\n\t\tdocument.cookie = cookieName+\"=\"+escape(cookieValue);\n\t//abilitando la riga sotto si puo' settare la scadenza del cookie \n    //             + \";expires=\"+expire.toGMTString();\n\t}\n};\n\nfunction ReadCookie(cookieName) {\n\tvar theCookie=\" \"+document.cookie;\n\tvar ind=theCookie.indexOf(\" \"+cookieName+\"=\");\n\tif (ind==-1) ind=theCookie.indexOf(\";\"+cookieName+\"=\");\n\tif (ind==-1 || cookieName==\"\") return \"\";\n\tvar ind1=theCookie.indexOf(\";\",ind+1);\n\tif (ind1==-1) ind1=theCookie.length; \n\treturn unescape(theCookie.substring(ind+cookieName.length+2,ind1));\n};\n\n</script>\n<script type=\"text/javascript\">\n\t\nfunction clickInvia(){\n\tvar reqId = getParameterByName('request_id');\n\tusernameZeroPadding();\n\tvar username = document.getElementById('username').value;\n\tvar password = document.getElementById('password').value;\t\t\n\tdocument.getElementById(\"request_id_hidden\").value = reqId;\n\tif(username==\"\" || password==\"\"){\n\t\tif(username==\"\" && password!=\"\"){\n\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Il campo \\\"Username\\\" è vuoto. Per favore inserisci il tuo nome utente\";\n\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t}else{\n\t\t\tif(password==\"\" && username!=\"\"){\n\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"Il campo \\\"Password\\\" è vuoto. Per favore inserisci la tua password\";\n\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t}else{\n\t\t\t\tdocument.getElementById(\"writer\").innerHTML = \"I campi \\\"Username\\\" e \\\"Password\\\" sono vuoti. Per favore inserisci le tue credenziali di accesso\";\n\t\t\t\tdocument.getElementById(\"writer\").style.color = '#fe001a';\n\t\t\t}\n\t\t}\n\t}else{\n\t\tSetCookie(\"usernameCookie\",username,'0,347');\n\t\tSetCookie(\"MPM_Cookie\",\"false\",'0,347');\n\t\t SetCookie(\"anomalia_login\",\"false\",'0,347');\n\t\tvar host = window.location.hostname;\n\t\tif((host.indexOf(\"svil\")!=-1)){\n\t\t\tform1.action = \"http://sso-svil.mediolanum.it/oam/server/auth_cred_submit\";\n\t\t}\n\t\telse{\n\t\t if((host.indexOf(\"test\")!=-1)){\n                        form1.action = \"https://sso-test.mediolanum.it/oam/server/auth_cred_submit\";\n                }\n\t\t\n\t\t else{\n                if((host.indexOf(\"uat\")!=-1)){\n                        form1.action = \"https://sso-preprod.mediolanum.it/oam/server/auth_cred_submit\";\n\n\t\t}\n                else{\n                        form1.action = \"https://sso.mediolanum.it/oam/server/auth_cred_submit\";\n                }\n\n        }\n\n\n\t\t}\n\t\t\n\t\tform1.submit();\n\t\tdocument.getElementById(\"btn_sb\").disabled = 'true';\n\t}\t\t\t\n};\n\nfunction getParameterByName(name) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(location.search);\n    return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nfunction usernameZeroPadding() {\n\tvar userElem = document.getElementById('username');\n\t\n\tvar re = /^\\d+$/;\n\t\n\tif ( re.test( userElem.value )) {\n\t\tfiller = '0000000000' ;\n\t\tdiff = filler.length - userElem.value.length\n\t\tif ( diff > 0 )\n\t\t\tuserElem.value = filler.substr( 0, diff ) + userElem.value\n\t}\n}\n\t\t\t\nfunction clickCancella(){\t\t\t\t\n\tdocument.getElementById('username').value = \"\";\t\t\t\t\n\tdocument.getElementById('password').value = \"\";\n};\n\t\t\t\nfunction clickReset(){\nvar host = window.location.hostname;\nif((host.indexOf(\"svil\")!=-1)){\n\twindow.location.href = \"http://sso-svil.mediolanum.it/MediolanumResetPassword/index.jsp?resource_url=\"+decodeURIComponent(getParameterByName('resource_url'));\n}\nelse{\n\tif((host.indexOf(\"test\")!=-1)){\n        window.location.href = \"https://sso-test.mediolanum.it/MediolanumResetPassword/index.jsp?resource_url=\"+decodeURIComponent(getParameterByName('resource_url'));\n\t}\n\telse{\n\t\tif((host.indexOf(\"uat\")!=-1)){\n        window.location.href = \"https://sso-preprod.mediolanum.it/MediolanumResetPassword/index.jsp?resource_url=\"+decodeURIComponent(getParameterByName('resource_url'));\n\t\t}\n\t\telse{\n\t\t\t window.location.href = \"https://sso.mediolanum.it/MediolanumResetPassword/index.jsp?resource_url=\"+decodeURIComponent(getParameterByName('resource_url'));\n\t\t}\n\n\t}\n\n\n}\n};\n\nfunction preSubmit(event){\n    var chCode = ('charCode' in event) ? event.charCode : event.keyCode;\n    if(chCode == 13){\n\t\tclickInvia();\n\t}\n};\n\n// refresh login page dopo 10 minuti di inattivita\nwindow.setTimeout(function(){\n        window.location.href = decodeURIComponent(getParameterByName('resource_url'));\n    }, 600000);\n\n</script>\n\n<title>BmedNet - Login</title>\n</head>\n<body class=\"page_login\" onkeypress=\"preSubmit(event);\">\n\n        <!-- start snippet -->\n        <div class=\"box_login_main login-generico\">\n            \n            <div class=\"logo\">\n                <img src=\"images/logobmed.png\" alt=\"B.MedNET\" title=\"B.MedNET\">\n            </div>\n            \n            <div class=\"box_login cf\">\n                <h2 id=\"writer\">LOGIN</h2>\n                <form id=\"form1\" method=\"POST\">\n                    <div class=\"row_login cf\"><label>Username</label><input id=\"username\" name=\"username\" type=\"text\" value=\"\"></div>\n                    <div class=\"row_login cf\"><label>Password</label><input id=\"password\" name=\"password\" type=\"password\" value=\"\"></div>\n\t\t\t\t\t<div><input id=\"request_id_hidden\" name=\"request_id\" value=\"\" type=\"hidden\"></div>\t\t\t\n                    <button id=\"btn_sb\" type=\"button\" onclick=\"clickInvia()\">Accedi</button>\n                </form>\n                \n                \n            </div>\n\t\t\t\n            <p id=\"reset_par\" class=\"login-link\"><a onclick=\"clickReset()\"><label>Hai dimenticato la password?</label></a></p>\n           \n\t\t <div id=\"bw_check\" class=\"box_login_note\">\n                <p><font color=\"red\"><b>Attenzione</b></font><font color=\"black\">, stai utilizzando un browser non adatto alla navigazione sul portale. Se stai utilizzando un dispositivo <b>Apple</b> è necessario l'utilizzo di <b>Safari.</b> Se possiedi dispositivi <b>Windows o Android</b> è consigliato l'utilizzo di <b>Chrome.</b> Ti raccomandiamo, inoltre, di <b>disabilitare il blocco popup</b></font>.</p>\n            </div>\n\t\n\n\t   <div class=\"marg_top_big mediolanum_logo\">\n            \t<img src=\"images/logo_mediolanum.png\" alt=\"Banca Mediolanum\">\n            </div>\n \n        </div>\n\n        <!-- end snippet -->\n\n\n\n\n</body>"}
