{"link":"https://gotoshop.by/account/register/","html":"<head>\n    <meta charset=\"utf-8\">\n    <title>Регистрация - Акции и скидки супермаркетов Беларуси</title>\n\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <meta http-equiv=\"x-dns-prefetch-control\" content=\"on\">\n    \n    \n                <meta name=\"robots\" content=\"noindex\">\n    \n        \n    <meta name=\"description\" content=\"Скидки на продукты, стройматериалы, электронику и бытовую технику, косметику, одежду, товары для детей и др.\">\n\n    <link rel=\"image_src\" href=\"https://gotoshop.by/img/logo-large.png\">\n    <meta property=\"og:image\" content=\"https://gotoshop.by/img/logo-large.png\">\n    <meta property=\"og:title\" content=\"Регистрация - Акции и скидки супермаркетов Беларуси\">\n    <meta property=\"og:description\" content=\"Скидки на продукты, стройматериалы, электронику и бытовую технику, косметику, одежду, товары для детей и др.\">\n\n    <link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img/favicon/apple-touch-icon-57x57.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img/favicon/apple-touch-icon-60x60.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img/favicon/apple-touch-icon-72x72.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img/favicon/apple-touch-icon-76x76.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img/favicon/apple-touch-icon-114x114.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img/favicon/apple-touch-icon-120x120.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img/favicon/apple-touch-icon-144x144.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img/favicon/apple-touch-icon-152x152.png?v=gAAb6eWEj8\">\n    <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img/favicon/apple-touch-icon-180x180.png?v=gAAb6eWEj8\">\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-32x32.png?v=gAAb6eWEj8\" sizes=\"32x32\">\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/android-chrome-192x192.png?v=gAAb6eWEj8\" sizes=\"192x192\">\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-96x96.png?v=gAAb6eWEj8\" sizes=\"96x96\">\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-16x16.png?v=gAAb6eWEj8\" sizes=\"16x16\">\n    <link rel=\"manifest\" href=\"/img/favicon/manifest.json?v=gAAb6eWEj8\">\n    <link rel=\"mask-icon\" href=\"/img/favicon/safari-pinned-tab.svg?v=gAAb6eWEj8\" color=\"#72b728\">\n    <link rel=\"shortcut icon\" href=\"/img/favicon/favicon.ico?v=gAAb6eWEj8\">\n    <meta name=\"apple-mobile-web-app-title\" content=\"GoToShop\">\n    <meta name=\"application-name\" content=\"GoToShop\">\n    <meta name=\"msapplication-TileColor\" content=\"#72b728\">\n    <meta name=\"msapplication-TileImage\" content=\"/img/favicon/mstile-144x144.png?v=gAAb6eWEj8\">\n    <meta name=\"msapplication-config\" content=\"/img/favicon/browserconfig.xml?v=gAAb6eWEj8\">\n    <meta name=\"theme-color\" content=\"#72b728\">\n\n    <meta name=\"p:domain_verify\" content=\"7f99cfbb82c461c852ad42d25958602c\">\n\n        <link href=\"https://gotoshop.by/css/style.css?t=t1492694705\" rel=\"stylesheet\">\n\n    <script async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script async=\"\" src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n</head><body class=\"account-page\">\n\n\n<div class=\"wrapper\" id=\"wrapper\">\n<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-54943312-1', 'auto');ga('send', 'pageview');</script>\n<header class=\"navbar navbar-inverse hidden-print\" role=\"navigation\"> <!-- navbar-fixed-top  -->\n    <div class=\"container\">\n\n        <div class=\"navbar-header\">\n\n\n            <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"offcanvas\">\n                <span class=\"sr-only\">Переключить меню</span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n            </button>\n\n\n\n            \n\n\n            \n                            <p class=\"visible-xs-block navbar-xs-title\">\n                    <a href=\"/\"><span class=\"glyphicon glyphicon-menu-left\"></span>Регистрация</a>\n                </p>\n                    </div>\n\n        <div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\n\n            <ul class=\"nav navbar-nav navbar-right\">\n                \n                \n                                <li class=\"dropdown account-menu-item\" data-loginreload=\"accountdropdown\">\n                                            <a href=\"/account/login/\">\n                            <span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> Вход                        </a>\n                                    </li>\n            </ul>\n            \n            \n            \n            \n            <ul class=\"nav navbar-nav\">\n                <li class=\"dropdown account-menu-item\">\n                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n                        <span class=\"text\">О сайте</span>\n                        <span class=\"glyphicon glyphicon-menu-down\"></span>\n                    </a>\n                    <ul class=\"dropdown-menu\">\n                        <li>\n                            <a href=\"/about/\">О сайте</a>\n                        </li>\n                                                <li>\n                            <a href=\"/contact/\">Связаться с нами</a>\n                        </li>\n                        <li>\n                            <a href=\"/?clearcity\">Города</a>\n                        </li>\n\n                                                    <li>\n                                <a href=\"/about/privacypolicy/\">Политика конфиденциальности</a>\n                            </li>\n                        \n                        <li class=\"divider\"></li>\n                        \n                                                    <li>\n                                <a href=\"/about/apps/\">Приложения для телефонов</a>\n                            </li>\n                                            </ul>\n                </li>\n            </ul>\n\n        </div>\n\n    </div>\n</header>\n\n    \n\n\n<div id=\"header\" class=\"hidden-print hidden-xs\">\n\n    <div class=\"container\">\n\n        <div class=\"logo\">\n            <a rel=\"home\" title=\"Акции и скидки супермаркетов Беларуси\" href=\"/\">\n                                <img width=\"348\" height=\"60\" alt=\"GoToShop\" src=\"https://gotoshop.by/img/logo.png?1\">\n                <span class=\"tag-line\">\n                    Акции и скидки супермаркетов Беларуси                </span>\n            </a>\n        </div>\n\n        \n        \n    </div>\n</div>\n\n\n\n\n\n<div id=\"content\">\n    <div class=\"container\">\n\n        <div class=\"row content\">\n            <div class=\"sidebar col-sm-4 col-lg-3 hidden-xs\">\n    <div class=\"sidebar-content\">\n        <div role=\"complementary\" class=\"hidden-print\">\n    <ul class=\"nav\">\n        <li>\n            <a href=\"/account/login/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> Вход            </a>\n        </li>\n        <li class=\"active\">\n            <a href=\"/account/register/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> Регистрация            </a>\n        </li>\n        <li>\n            <a href=\"/account/resetpassword/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-repeat\" aria-hidden=\"true\"></span> Восстановление пароля            </a>\n        </li>\n    </ul>\n</div>\n    </div>\n</div>\n\n<div class=\"form-wrapper col-xs-12 col-sm-8 col-lg-9\" role=\"main\"><div class=\"text\">\n\n    <h2 class=\"main-title hidden-xs\">Регистрация</h2>\n\n    \n        \n        <form id=\"register-form\" action=\"/account/registerProcess/\" method=\"post\" role=\"form\">\n            <fieldset>\n                <div class=\"form-group\">\n                    <input class=\"form-control\" name=\"username\" type=\"text\" value=\"\" placeholder=\"Имя или ник\">\n                    <span class=\"help-block\">например My Name или myname</span>\n                                    </div>\n                <div class=\"form-group\">\n                    <input class=\"form-control\" name=\"email\" type=\"text\" value=\"\" placeholder=\"Email адрес\">\n                    <span class=\"help-block\">например myname@example.com, будет использоваться для входа на сайт</span>\n                                    </div>\n                <div class=\"form-group\">&nbsp;</div>\n                <div class=\"form-group\">\n                    <input class=\"form-control\" name=\"password\" type=\"password\" value=\"\" placeholder=\"Пароль\">\n                    <input type=\"hidden\" name=\"password1\" value=\"\">\n                                    </div>\n                <div class=\"form-group\">\n                    <input class=\"form-control\" name=\"repeatpassword\" type=\"password\" value=\"\" placeholder=\"Повторите пароль\">\n                    <input type=\"hidden\" name=\"password2\" value=\"\">\n                                    </div>\n                                <div class=\"form-group form-submit\">\n                    <input autocomplete=\"off\" data-loading-text=\"Регистрация...\" class=\"btn btn-primary\" type=\"submit\" value=\"Регистрация\">\n                                    </div>\n            </fieldset>\n        </form>\n    \n    \n</div></div>\n\n\n            <div class=\"ads\"><!-- ads goes here --></div>\n\n        </div>\n\n    </div>\n</div>\n\n<div class=\"welcome-text\"><div class=\"container\">\n        \n        \n        \n        \n        \n</div></div>\n\n<footer class=\"hidden-print\"><div class=\"container\"><ul class=\"menu\"><li><a href=\"/about/\">О сайте</a></li><li>|</li><li><a href=\"/contact/\">Связаться с нами</a></li><li>|</li><li><a href=\"/about/apps/\">Приложения для телефонов</a></li></ul><p>©2017 GoToShop.by - акции и скидки супермаркетов Беларуси. Все права защищены.</p></div></footer>\n\n</div>\n\n\n\n\n<script type=\"text/javascript\">\n\n        var config = {\n        websiteurl: 'https://gotoshop.by',\n        originaltitle: document.title,\n\n        \n        \n        country: 'Belarus',\n        mapZoom: 12,\n        mapsScriptUrl: 'https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCpcSITwX5lqVY48omDLAWFMcTnQ-9AZ7w',\n        countryLat: '49.397535',\n        countryLng: '31.365991',\n\n        \n        originalState: window.location.href,\n\n                userId:0,\n        user: {\n            id:0,\n            username:'',\n            email:'',\n            admin:0        },\n\n        notesCookieName: \"notes_\",\n        //userCookieName: \"\",\n        favShopsCookieName: \"favshops_\",\n\n        have18age: -1,\n\n        isTouchDevice: (true == (\"ontouchstart\" in window || window.DocumentTouch && document instanceof DocumentTouch)),\n        isISO: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream),\n        browserTabActive: true,\n        mousePressedDown: false,\n        lang: 'be',\n        money: '',\n        disableAjax: false, /*  Отключает все аякс запросы, используется например при сабмите формы при добавлении акции, в мозиле например продолжают запросы посылаться на сервер  */\n        categoriesDropdown: false, /*  глобальная переменная хранит объект для работы с категориями товаров  */\n        commentsguest: true,\n        dateformaturl: 'd-m-Y',\n        adsensePopupRight: '<ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4948808761837166\" data-ad-slot=\"9575827732\" data-ad-format=\"auto\"></ins>', /*  реклама адсенс для попап товара */\n        adsensePopupLeft: '<ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4948808761837166\" data-ad-slot=\"3734584132\" data-ad-format=\"auto\"></ins>' /*  реклама адсенс для попап товара */\n    };\n    var scriptsStarted = false;\n    function startScripts(){\n\n        if (typeof jQuery == 'undefined' || scriptsStarted == true) {\n            return;\n        }\n\n        scriptsStarted = true;\n\n        jQuery.noConflict();\n\n        (function( $ ) {\n\n            // Если домен не такой как в настройках сайта\n            // Прячем контент\n                        if (config.websiteurl.search(\"https://gotoshop\" + \".\" + \"by\") == -1) {\n                $('html').remove();\n            }\n\n            $('.discounts-carousel ul').width( ($('.discounts-carousel ul li').length * 459) );\n\n            $('BODY').on('mouseup',function(e){\n                config.mousePressedDown = false;\n            });\n\n            $('.disable-all-ajax-on-submit').on('submit',function(){\n                config.disableAjax = true;\n            });\n\n            function isJsonString(str) {\n                try {\n                    JSON.parse(str);\n                } catch (e) {\n                    return false;\n                }\n                return true;\n            }\n\n            // Показывает попап с соощиенем\n            var showMessagePopup = function(type,message,title){\n                var popupId = 'message-popup';\n                var popup = $('#' + popupId);\n\n                // Создание попап, если нету еще\n                if (!popup.length) {\n                    var popupHTML = '';\n                    popupHTML += '<div class=\"modal-fixed\" id=\"' + popupId+ '\" tabindex=\"-1\" style=\"display:none;\">';\n                    //popupHTML += '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Закрыть\"><span aria-hidden=\"true\">&times;</span></button>';\n                    popupHTML += '<div class=\"message-body\"></div>';\n                    popupHTML += '</div>';\n\n                    $('BODY').append(popupHTML);\n\n                    popup = $('#' + popupId);\n                }\n\n                if (type == 'error') {\n                    $('.message-body',popup).html('<p class=\"alert alert-danger text-center\">' + message + '</p>');\n                } else {\n                    $('.message-body',popup).html('<p class=\"alert alert-info text-center\">' + message + '</p>');\n                }\n\n                $(popup).show();\n\n                setTimeout(function(){\n                    $(popup).hide();\n                },5000);\n            };\n\n            // Загрузка картинки лоадера\n            var c = new Image();\n            c.onload = function(){\n                                $(\".loader-bottom .loader-icon\").css(\"background-image\", \"url(https://gotoshop.by/img/ajax-loader-form-control.gif?t=t1411028826)\");\n                $(\".loader-bottom\").remove();\n            };\n            c.src = \"https://gotoshop.by/img/ajax-loader-form-control.gif?t=t1411028826\";\n\n            $('BODY').on('click','.dropdown-discounts-date .discounts-date-selector, .datepicker.dropdown-menu',function(e){\n                e.stopPropagation();\n            });\n\n            // Зачем это еще раз, если ниже есть???\n//            $('.btn[data-loading-text]').on('click', function () {\n//                $(this).button('loading');\n//            });\n\n            // При нажатии на бутон кнопку или ссылку делать неактивной\n            $('body').on('click','.btn',function(){\n                if ($(this).attr('data-loading-text')) {\n                    $(this).button('loading');\n                }\n            });\n\n\n\n            // Клик на поделиться сайтом\n            $('BODY').on('click','.share-links .share-link',function(e){\n\n                var shareUrl = config.originalState;\n                var shareTitle = $('meta[property=\"og:title\"]',document).attr('content');\n                var shareDesc = $('meta[property=\"og:description\"]',document).attr('content');\n                var shareImage = $('meta[property=\"og:image\"]',document).attr('content');\n\n                var url = $(this).attr('href');\n                url = url.replace('{url}',shareUrl);\n                url = url.replace('{description}',shareDesc);\n                url = url.replace('{title}',shareTitle);\n                url = url.replace('{image}',shareImage);\n\n                if (typeof ga !== 'undefined') {\n                    ga('send', 'event', 'outbound', 'sharewebsite', url, {\n                        'transport': 'beacon'\n                    });\n                }\n\n                window.open(url);\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            if (config.isTouchDevice) {\n                                                $.getScript(\"https://gotoshop.by/js/jquery.mobile.js?t=t1490128380\", function(){\n                                                            $.getScript(\"https://gotoshop.by/js/touch-device.js?t=t1490128380\");\n                });\n\n            } else {\n                //$('[data-toggle=\"offcanvas\"]').click(function () {\n                $('BODY').on('click','[data-toggle=\"offcanvas\"]',function () {\n                    $('BODY').toggleClass('sidebar-menu-open');\n                });\n                //$('.sidebar-menu-overlay').on('click',function(){\n                $('BODY').on('click','.sidebar-menu-overlay',function () {\n                    $('BODY').toggleClass('sidebar-menu-open');\n                });\n            }\n\n            // Попап открыт?\n            var isPopupShowed = function(){\n                return $('.modal.product:visible').length;\n            };\n            // Возвращает объект попап\n            var getVisiblePopupObj = function(){\n                var currentItemId = $('.modal.product:visible').attr('data-id');\n                var currentItem = $('.item[data-id=' + currentItemId + ']');\n                return currentItem.data('popup');\n            };\n\n            window.onpopstate = function(e) {\n                if ($('BODY').hasClass('sidebar-menu-open')) {\n                    $('BODY').removeClass('sidebar-menu-open');\n                }\n                if (window.history.state != null && window.history.state.sidebarmenu != null) {\n                    $('BODY').addClass('sidebar-menu-open');\n                }\n\n                //console.log(window.history.state);\n                /* Кнопка назад для попапов */\n                /* Если пользователь нажимает назад или вперед */\n                //if (window.history.state != null && window.history.state.productId != null) { // в сафари нету window.history.state!\n                if (e.state != null && e.state.productId != null) {\n                    var el = $('.item[data-id=\"' + e.state.productId + '\"] .' + e.state.className);\n                    el.attr('disablepushstate','1'); // Отключение pushState при показе попап\n                    el.click(); // Клик на товар\n\n                    // Это точно нужно?\n                    /*if (e.state != null && typeof e.state.scrollTop != 'undefined' && e.state.scrollTop != null) {\n                        console.log(e.state.scrollTop);\n                        //window.scrollTo(0,e.state.scrollTop);\n                        setTimeout(window.scrollTo(0,e.state.scrollTop),100);\n                    }*/\n\n                } else { // Закрываем попап, если нет данных о попапе\n\n                    // Закрываем, если попап открыт\n                    if ($('BODY').hasClass('modal-open')) {\n                        // Если \"нажимать\" на кнопку закрыть, то будет вызываться лишний pushState\n                        //$('.modal.product .btn-modal-close').click();\n                        if (isPopupShowed()) {\n                            var currentPopup = getVisiblePopupObj();\n\n                            currentPopup.hide();\n                        }\n\n                        if (e.state != null && typeof e.state.scrollTop != 'undefined' && e.state.scrollTop != null) {\n                            // Это нужно?\n                            window.scrollTo(0,e.state.scrollTop);\n                        }\n\n                    }\n                }\n\n                //e.preventDefault();\n            };\n\n            /* Активная страница или неактивная */\n            $(window).on(\"blur focus\", function(e) {\n                var prevType = $(this).data(\"prevType\");\n\n                if (prevType != e.type) {\n                    switch (e.type) {\n                        case \"blur\":\n                            config.browserTabActive = false;\n                            break;\n                        case \"focus\":\n                            config.browserTabActive = true;\n                            break;\n                    }\n                }\n\n                $(this).data(\"prevType\", e.type);\n            });\n\n            // Сортировка\n            jQuery.fn.sortElements = (function(){\n                var sort = [].sort;\n                return function(comparator, getSortable) {\n\n                    getSortable = getSortable || function(){return this;};\n\n                    var placements = this.map(function(){\n\n                        var sortElement = getSortable.call(this),\n                            parentNode = sortElement.parentNode,\n\n                        // Since the element itself will change position, we have\n                        // to have some way of storing its original position in\n                        // the DOM. The easiest way is to have a 'flag' node:\n                            nextSibling = parentNode.insertBefore(\n                                document.createTextNode(''),\n                                sortElement.nextSibling\n                            );\n\n                        return function() {\n\n                            if (parentNode === this) {\n                                throw new Error(\n                                    \"You can't sort elements if any one is a descendant of another.\"\n                                );\n                            }\n\n                            // Insert before flag:\n                            parentNode.insertBefore(this, nextSibling);\n                            // Remove flag:\n                            parentNode.removeChild(nextSibling);\n\n                        };\n\n                    });\n\n                    return sort.call(this, comparator).each(function(i){\n                        placements[i].call(getSortable.call(this));\n                    });\n                };\n            })();\n\n            $('.btn-group-search').each(function(){\n                var activeItem = $('.dropdown-menu.inner .active',this);\n                if (activeItem.length) {\n                    var button = $('.btn',this);\n                    var buttonText = $('.text',button);\n                    buttonText.text($('.text',activeItem).text());\n\n                }\n            });\n\n            /*  Табы слева  */\n            //$('.fixed-tabs .close').on('click',function(){\n            $('BODY').on('click','.fixed-tabs .close',function(){\n                if ($(this).parents('.choose-shops').length) {\n                    $(\".choose-shops\").hide();\n                } else {\n                    $('.overlay').remove();\n                    var li = $(this).parents(\"li.active-tab\");\n                    var a = $('.tab-link',li);\n                    var t = $(a).attr(\"href\");\n                    $(li).removeClass(\"active-tab\");\n                    $(t).css(\"display\", \"none\");\n                }\n                return false;\n            });\n            //$(\".fixed-tabs .show-tab-link\").click(function () {\n            $('BODY').on('click','.fixed-tabs .show-tab-link',function () {\n                $(\".overlay\").remove();\n                $(\".fixed-tabs .active-tab .fixed-tabs-content\").css(\"display\", \"none\");\n                $(\".fixed-tabs .active-tab\").removeClass(\"active-tab\");\n                var t = $(this).attr(\"href\");\n                var n = $(this).parents(\"li:first\");\n                if ($(t).is(\":visible\")) {\n                    $(n).removeClass(\"active-tab\");\n                    $(t).css(\"display\", \"none\")\n                } else {\n                    $(n).addClass(\"active-tab\");\n                    $(t).css(\"display\", \"block\");\n                    $(\"body\").append('<div class=\"overlay\"></div>');\n                    if ($(\".subscribe-form\").is(':visible')) {\n                        $(\".subscribe-form [name='email']\").focus();\n                    }\n                    if ($(\"#contact-form\").is(':visible')) {\n                        $(\"#contact-form [name='message']\").focus();\n                    }\n                }\n                return false\n            });\n            //$(\".fixed-tabs\").click(function (e) {\n            $('BODY').on('click','.fixed-tabs',function (e) {\n                e.stopPropagation()\n            });\n\n            //$(\"BODY\").click(function () {\n            $(\"BODY\").on('click',function () {\n                $(\".fixed-tabs .active-tab .show-tab-link\").click()\n            });\n\n            // Закрывать табы при клике на .overlay\n            $('BODY').on('click','.overlay',function(){\n                $('.fixed-tabs .close').click();\n            });\n\n//            if ($(\"#shops-carousel\").length) {\n//                if ($(window).width() < 1377) {\n//                    $(\".fixed-tabs\").css(\"left\", \"-100px\");\n//                }\n//            }\n\n//            var sidebar = $('.sidebar');\n//\n//            if (sidebar.hasClass('sidebar-fixed')) {\n//                var lastScrollTop = 0;\n//                var header = $('#header');\n//                var footer = $('footer');\n//                var headerOffset = header.offset();\n//                var headerOffsetTop = headerOffset.top + header.height() + parseInt(header.css('padding-bottom'));\n//\n//                var sidebarWidth = sidebar.width();\n//                var sidebarHeight = $(window).height() - headerOffsetTop;\n//                var footerHeight = footer.height();\n//\n//                sidebar.css({'top': headerOffsetTop, 'height': sidebarHeight});\n//            }\n\n            var lastScrollTop = 0,\n                backToTopBtn = $(\"#back-to-top\"),\n                backToTopBtnWidth = parseInt(backToTopBtn.width()) + 5; // +5 что бы тень спрятать\n            $(window).scroll(function () {\n\n                // Показывать кнопку \"Вверх\" если пользователь скроллит вверх\n                var st = $(this).scrollTop();\n\n                if (st > 100) {\n                    if (st > lastScrollTop){ // Вниз\n                        //if (backToTopBtn.is(':visible')) { // Прятать, если видимый\n                            //backToTopBtn.css('left','-' + backToTopBtnWidth + 'px');\n                            backToTopBtn.css('right','-' + backToTopBtnWidth + 'px');\n                        //}\n                    } else { // Вверх\n                        //if (!backToTopBtn.is(':visible')) { // Показывать, если скрытый\n                            //backToTopBtn.css('left','20px');\n                            backToTopBtn.css('right','20px');\n                        //}\n                    }\n                } else { // Прятать кнопку если до верха осталось 100\n                    //if (backToTopBtn.is(':visible')) { // Прятать, если видимый\n                        //backToTopBtn.css('left','-' + backToTopBtnWidth + 'px');\n                        backToTopBtn.css('right','-' + backToTopBtnWidth + 'px');\n                    //}\n                }\n\n\n                // Показывать табы когда посетитель скролит вверх и если ширина экрана больше 960px\n                // и если до верха больше 100px\n                //if ($(window).width() > 960 && st > 100) {\n\n                // Показывать табы при любой ширине\n                if (st > 100) {\n                    if (st > lastScrollTop) { // Скролл вниз\n                        // Спрятать, если табы видны\n                        $(\".fixed-tabs\").css(\"left\", \"-100px\");\n                    } else { // Скролл вверх\n                        // Показать\n                        $(\".fixed-tabs\").css(\"left\", \"0\");\n                    }\n                } else {\n                    // Спрятать, если табы видны\n                    $(\".fixed-tabs\").css(\"left\", \"-100px\");\n                }\n\n//                if ($(\"#shops-carousel\").length) {\n//                    if ($(window).width() < 1377) {\n//                        if ($(this).scrollTop() >= 0 && $(this).scrollTop() < 150) {\n//                            $(\".fixed-tabs\").css(\"left\", \"-100px\")\n//                        } else {\n//                            $(\".fixed-tabs\").css(\"left\", \"0px\");\n//                        }\n//                    } else {\n//                        $(\".fixed-tabs\").css(\"left\", \"0px\");\n//                    }\n//                } else {\n//                    $(\".fixed-tabs\").css(\"left\", \"0px\");\n//                }\n\n//                if (sidebar.hasClass('sidebar-fixed')) {\n//                    // Сайдбар фиксированый\n//                    var sidebarTop = headerOffsetTop - st; // Сайдбар всегда ниже хедера\n//\n//                    var footerOffset = footer.offset();\n//                    var footerOffsetTop = footerOffset.top;\n//\n//                    var sidebarBottom = sidebar.height() + st; // Сайдбар всегда выше футера\n//\n//                    var footerVisible = ((footerOffsetTop - st - $(window).height()) <= 0);\n//\n//                    if (footerVisible) {\n//                        sidebarHeight = footerOffsetTop - st;\n//\n//                        if (sidebarHeight < 0) {\n//                            sidebarHeight = 0;\n//                        }\n//                        sidebar.css({'top': 0, 'height': sidebarHeight});\n//                    } else {\n//\n//                        if (sidebarTop < 0) {\n//                            sidebar.css({'top': 0, 'height': ''});\n//                        } else {\n//                            sidebarHeight = $(window).height() - sidebarTop;\n//                            sidebar.css({'top': sidebarTop, 'height': sidebarHeight});\n//                        }\n//                    }\n//                }\n\n\n                /* При ховере на табы, показывать табы полностью */\n                /*$('.fixed-tabs').hover(function(){\n                    $(\".fixed-tabs\").css(\"left\", \"0px\");\n                },function(){\n                    $(\".fixed-tabs\").css(\"left\", \"-70px\");\n                });*/\n\n                lastScrollTop = st;\n            });\n\n            // Прячем табы, если они закрывают контент\n//            if ($(window).width() < 1314 && $(window).width() > 1220) {\n//                $(\".fixed-tabs\").css(\"left\", \"-100px\");\n//            }\n\n            $(document).keyup(function(e) {\n                // Закрытие табов при нажатии ESC\n                if (e.keyCode == 27) {\n                    $('.fixed-tabs .active-tab .close').click();\n                }\n            });\n\n\n\n            /*  Выбор магазинов для подписки  */\n            /*$('BODY').on('click','.choose-shop-link',function () {\n                var form = $(this).parents('form');\n\n                var inputShops = $('.selected-shops-field',form); // Теперь будет по классу, что бы можно было name другое использовать в другой форме\n                inputShops.attr(\"data-prevvalue\", inputShops.val());\n                var chooseShops = $(\".choose-shops\",form);\n                if (chooseShops.is(\":visible\")) {\n                    chooseShops.hide();\n                } else {\n                    // Сначала загрузка аяксом магазинов, если они не загружены\n                    // Магазины всеравно загружаются аяксом при смене города\n                    // Это нужно что бы подгружались все любимые магазины\n                    $('.cities-filter-dropdown .dropdown-menu li.active a').click();\n\n                    chooseShops.show();\n                }\n                return false\n            }); */\n\n            /*$('BODY').on('click','.choose-shops .cancel-button',function () { // кнопка отмена при выборе магазинов\n                var form = $(this).parents('form');\n                var t = $('.selected-shops-field',form);\n                $(t).val($(t).attr(\"data-prevvalue\"));\n                $(\".choose-shops\").hide();\n                return false;\n            });*/\n            /*$('BODY').on('click','.choose-shops .submit-button',function () {\n                var form = $(this).parents('form');\n                var t = $('.selected-shops-field',form);\n                var sc = $('input[name=\"shops[]\"]:checked',form);\n                var s = $('input[name=\"shops[]\"]',form);\n                var h = $(\".choose-shop-link .selected-shops-name\",form);\n                var r = '',r2 = '';\n                if (sc.length && sc.length < s.length) {\n                    var n = [];\n                    sc.each(function () {\n                        n.push($(this).val());\n                        r += (r == '')?'':', ';\n                        r += $(this).attr(\"title\");\n                    });\n                    $(t).val(n);\n                    r2 = r;\n                } else {\n                    $(t).val(\"all\");\n                    r2 = \"Все Магазины\";\n                    r = \"Выбрать Магазины\";\n                }\n\n                h.text(r2);\n                h.attr({\"title\":r,\"data-original-title\":r});\n\n                $(\".choose-shops\",form).hide();\n\n                if (!config.isTouchDevice) {\n                    $('[data-toggle=\"tooltip\"]').tooltip();\n                }\n                return false;\n            }); */\n            $('BODY').on('click','.choose-shops .check-all',function () { // Выбрать все/Отменить все\n\n                var ct = $(this).parents('.category:first');\n                var cn = (ct.length)?ct:$(this).parents('form');\n\n                var sc = $('input[name=\"shops[]\"]:checked',cn);\n                var s = $('input[name=\"shops[]\"]',cn);\n\n                s.prop('checked', !(sc.length == s.length));\n\n                return false;\n            });\n            //$(\".choose-shops .cancel-all\").click(function () {\n//            $('BODY').on('click','.choose-shops .cancel-all',function () {\n//                var form = $(this).parents('form');\n//                $('input[name=\"shops[]\"]',form).prop('checked',false);\n//                return false;\n//            });\n            //$(\".subscribe-form\").submit(function () {\n            $('BODY').on('submit','.subscribe-form',function () {\n                var form = this;\n\n                var url = '/subscribe/subscribeProcess/';\n                var data = $(this).serialize();\n                data += '&is_ajax=1';\n\n                //$('[type=\"submit\"]',form).after('<div class=\"loader-mini\"></div>');\n                $('.messages',form).remove();\n\n                $.ajax({\n                    type: \"POST\",\n                    url: url,\n                    cache: false,\n                    data: data\n                }).done(function (response) {\n                    var responseObj = jQuery.parseJSON(response);\n\n                    //$('.loader-mini',form).remove();\n                    $('.has-error',form).removeClass('has-error');\n                    $('.form-element-errors',form).remove();\n\n                    $('[type=\"submit\"]',form).button('reset');\n\n                    if (responseObj.error == true) {\n                        $.each(responseObj.messages, function(index, value){\n                            var input = $('[name=\"' + index + '\"]',form);\n                            input.parents('.form-group:first').addClass('has-error');\n                            input.after('<ul class=\"form-element-errors\"><li>' + value + '</li></ul>');\n                        });\n                    } else {\n                        $(form).prepend( '<div class=\"messages\"><p class=\"alert-success\">' + responseObj.messages.success + '</p></div>' );\n                        //$(form).find(\"input[type=text], input[type=email], textarea\").val(\"\");\n                        $(form).find(\"input[name='email']\").val(\"\");\n                    }\n                });\n                return false;\n            });\n\n            $(\"a\",backToTopBtn).click(function () {\n                $(\"body,html\").stop().animate({\n                    scrollTop: 0\n                }, 800);\n                return false\n            });\n\n            // Контактная форма аякс\n            //$('#contact-form').on('submit',function(e){\n            $('BODY').on('submit','#contact-form',function (e) {\n\n                var url = '/contact/contactProcess/';\n                var data = $(this).serialize();\n                data += '&is_ajax=1';\n\n                //$('#contact-form [type=\"submit\"]').after('<div class=\"loader-mini\"></div>');\n                $('#contact-form .messages').remove();\n\n                $.ajax({\n                    type: \"POST\",\n                    url: url,\n                    cache: false,\n                    data: data\n                }).done(function( response ) {\n                    var responseObj = jQuery.parseJSON(response);\n\n                    //$('#contact-form .loader-mini').remove();\n                    $('#contact-form .has-error').removeClass('has-error');\n                    $('#contact-form .form-element-errors').remove();\n\n                    $('#contact-form [type=\"submit\"]').button('reset');\n\n                    if (responseObj.error == true) {\n                        $.each(responseObj.messages, function(index, value){\n                            var input = $('#contact-form [name=\"' + index + '\"]');\n                            input.parents('.form-group:first').addClass('has-error');\n                            input.after('<ul class=\"form-element-errors\"><li>' + value + '</li></ul>');\n                        });\n                    } else {\n                        $('#contact-form').prepend( '<div class=\"messages\"><p class=\"alert-success\">' + responseObj.messages.success + '</p></div>' );\n                        $('#contact-form').find(\"input[type=text], input[type=email], textarea\").val(\"\");\n                    }\n                });\n\n                e.preventDefault();\n            });\n\n\n\n                        $.ajaxSetup({\n                cache: true\n            });\n            \n                                    $.getScript(\"https://gotoshop.by/js/bootstrap.js?t=t1411035338\", function(){\n\n                /* Показывает предупреждение, если акция содержит алкоголь */\n                function discountHaveAlcohol(){\n                    var img = $('.product[data-havealcohol=\"1\"] .image img, .item[data-havealcohol=\"1\"] .image-link img');\n                    if (img.length) {\n                        if (config.have18age == -1) {\n                            $('#alcohol-modal').modal('show');\n\n                            config.have18age = true;\n\n                            $('BODY').on('click', '#alcohol-modal .btn-primary', function () {\n                                img.attr('src', '');\n                                img.css('display', 'block');\n                                $('#alcohol-modal').modal('hide');\n\n                                config.have18age = false;\n                            });\n                        } else if (!config.have18age) {\n                            img.attr('src', '');\n                            img.css('display', 'block');\n                        }\n                    }\n                }\n\n                /* Позволяет показывать несколько окон modal */\n                /*$('.modal').on('hidden.bs.modal', function( event ) {\n                    $(this).removeClass( 'fv-modal-stack' );\n                    $('body').data( 'fv_open_modals', $('body').data( 'fv_open_modals' ) - 1 );\n                });\n                $( '.modal' ).on( 'shown.bs.modal', function ( event ) {\n                    if ( typeof( $('body').data( 'fv_open_modals' ) ) == 'undefined' ){\n                        $('body').data( 'fv_open_modals', 0 );\n                    }\n                    if ( $(this).hasClass( 'fv-modal-stack' ) ){\n                        return;\n                    }\n                    $(this).addClass( 'fv-modal-stack' );\n                    $('body').data( 'fv_open_modals', $('body').data( 'fv_open_modals' ) + 1 );\n                    $(this).css('z-index', 1040 + (10 * $('body').data( 'fv_open_modals' )));\n                    $( '.modal-backdrop' ).not( '.fv-modal-stack' ).css( 'z-index', 1039 + (10 * $('body').data( 'fv_open_modals' )));\n                    $( '.modal-backdrop' ).not( 'fv-modal-stack' ).addClass( 'fv-modal-stack' );\n                }); */\n\n                \n                //$('.checkall').on('click',function(e){\n                $('BODY').on('click','.checkall',function (e) {\n\n                    var checkbox = $(this);\n                    var checked = checkbox.is(':checked');\n\n                    var checkboxesName =  checkbox.val();\n\n                    $('[name=\"' + checkboxesName + '\"]').prop('checked',checked);\n\n                    e.stopPropagation();\n                    //e.preventDefault();\n                });\n\n                \n                                                $.getScript(\"https://gotoshop.by/js/jquery.cookie.js?t=t1439187313\", function(){\n\n                    // Установка куки при выборе языка посетителем\n                    $('.change-lang-menu a.change-lang-link').on('click',function(){\n                        var date = new Date();\n                        date.setTime(date.getTime() + (365*24*60*60*1000));\n                        $.cookie('langmanual',$(this).attr('data-lang'),{path: '/',expires: date });\n                    });\n\n                    // Лимит для постраничной навигации\n                    $('.change-limit-link').on('click',function(e){\n                        var newLimit = $(this).attr('rel');\n                        var date = new Date();\n                        date.setTime(date.getTime() + (365*24*60*60*1000));\n                        $.cookie('discounts_pager_limit',newLimit,{path: '/', expires: date });\n\n                        window.location.reload();\n\n                        e.preventDefault();\n                    });\n\n                    // Добавление в заметки и удаление\n                    /*$('BODY').on('click','.btn-add-note',function(e){\n                        e.preventDefault();\n                    }); */\n\n                    function noteAfterAdd(btn){\n\n                        btn = $(btn);\n\n                        btn.popover('destroy');\n\n                        // Показать сообщение \"Добавлено в 'Мои заметки'\"\n                        var options = {\n                            content: 'Добавлено в <a href=\"/mynotes/\">Избранное</a>',\n                            html: true,\n                            template: '<div class=\"popover popover-notes\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"popover-content\"></div></div>',\n                            placement: 'bottom'\n                        };\n                        btn.popover(options);\n                        btn.popover('show');\n\n                        setTimeout(function(){\n                            btn.popover('destroy');\n                        },2000);\n                    }\n                    function noteAfterDelete(btn){\n\n                        btn = $(btn);\n\n                        btn.popover('destroy');\n\n                        // Показать сообщение \"Удалено\"\n                        var options = {\n                            content: 'Удалено из <a href=\"/mynotes/\">Избранное</a>',\n                            html: true,\n                            template: '<div class=\"popover popover-notes\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"popover-content\"></div></div>',\n                            placement: 'bottom'\n                        };\n                        btn.popover(options);\n                        btn.popover('show');\n\n                        setTimeout(function(){\n                            btn.popover('destroy');\n                        },2000);\n                    }\n\n                    // Обработка ответа после добавления/удаления заметки (авторизован)\n                    function notesProcessResponse(response,a){\n                        responseObj = jQuery.parseJSON(response);\n\n                        var productId = $(a).attr('rel');\n\n                        if (responseObj.count) {\n                            $('.mynotes-count').html(responseObj.count);\n                        }\n\n                        var btn = $('.btn-add-note[rel=\"' + productId + '\"]');\n                        if (responseObj.status) {\n                            btn.attr('data-basket','1');\n                            btn.attr('data-original-title','Удалить');\n                            btn.addClass('active');\n\n                            $('.tooltip .tooltip-inner').text('Удалить');\n\n                            noteAfterAdd(a);\n\n                        } else {\n                            btn.attr('data-basket','0');\n                            btn.attr('data-original-title','Добавить в избранное');\n                            btn.removeClass('active');\n\n                            $('.tooltip .tooltip-inner').text('Добавить в избранное');\n\n                            noteAfterDelete(a);\n\n\n                            if ($('BODY').hasClass('notes-page')) {\n                                // Перегрузка страницы, если это страница заметок\n                                //window.location = config.websiteurl + '/mynotes/';\n\n                                // Не перегружать, а просто удалять html\n                                $('.item[data-id=\"' + productId + '\"]').hide(300,function(){\n                                    $(this).remove();\n\n                                    $(window).resize(); // просто ресайз вызываем, а то так и не получилось по нормальному\n                                    // перестройка списка товаров\n                                    //discounts.grid( 'refresh' );\n                                    //console.log(discounts);\n                                    //discounts.grid( 'init', $('.item',discounts) );\n                                });\n                            }\n                        }\n                    }\n\n                    var addNoteNotLoggedIn = function(el) {\n                        if ($(el).attr('data-basket') == '1') { // Если добавлено, то удалить\n\n                            var currentProducts = $.cookie(config.notesCookieName);\n                            var delProductId = parseInt($(el).attr('rel'));\n\n                            var currentProductsArray = currentProducts.split(',');\n                            var newProducts = '';\n\n                            for (var i = 0; i < currentProductsArray.length; i++) {\n                                var productId = parseInt(currentProductsArray[i]);\n                                if (productId != delProductId) {\n                                    if (newProducts != '') {\n                                        newProducts += ',';\n                                    }\n                                    newProducts += currentProductsArray[i];\n                                }\n                            };\n\n                            $.cookie(config.notesCookieName, newProducts, {\n                                expires: 999,\n                                path: \"/\"\n                            });\n\n                            if (newProducts == '') {\n                                var currentProductsArray = new Array();\n                            } else {\n                                var currentProductsArray = newProducts.split(',');\n                            }\n\n                            $('.mynotes-count').html(currentProductsArray.length);\n\n                            noteAfterDelete(el);\n\n                            if ($('.notes-page').length) {\n                                // Перегрузка страницы, если это страница заметок\n                                window.location = config.websiteurl + '/mynotes/';\n                            } else {\n                                var btn = $('.btn-add-note[rel=\"' + delProductId + '\"]');\n\n                                btn.attr('data-basket','0');\n                                btn.attr('data-original-title','Добавить в избранное');\n                                btn.removeClass('active');\n\n                                $('.tooltip .tooltip-inner').text('Добавить в избранное');\n                            }\n\n                        } else { // Добавить в куки\n\n                            var currentProducts = $.cookie(config.notesCookieName);\n                            var newProductId = parseInt($(el).attr('rel'));\n\n                            if (currentProducts) {\n                                currentProducts += ',' + newProductId;\n                            } else {\n                                currentProducts = newProductId;\n                            }\n\n                            $.cookie(config.notesCookieName, currentProducts, {\n                                expires: 999,\n                                path: \"/\"\n                            });\n\n                            currentProducts = currentProducts.toString();\n\n                            var currentProductsArray = currentProducts.split(',');\n\n                            $('.mynotes-count').html(currentProductsArray.length);\n\n                            var btn = $('.btn-add-note[rel=\"' + newProductId + '\"]');\n                            btn.attr('data-basket','1');\n                            btn.attr('data-original-title','Удалить');\n                            btn.addClass('active');\n\n                            $('.tooltip .tooltip-inner').text('Удалить');\n\n                            // Показать сообщение \"Добавлено в 'Мои заметки'\"\n                            noteAfterAdd(el);\n                        }\n                    }; // addNoteNotLoggedIn\n\n                    var addNoteLoggedIn = function(el){\n                        var a = el;\n                        var productId = parseInt($(el).attr('rel'));\n\n                        if ($(el).attr('data-basket') == '1') { // Удаление\n                            var url = '/mynotes/delProcess/';\n\n                            url += '?is_ajax=1';\n                            url += '&product_id=' + productId;\n                            url += '&user_id=' + config.userId;\n\n                            var data = {\n                                product_id: productId,\n                                user_id: config.userId,\n                                is_ajax: 1\n                            };\n                            $.ajax({\n                                type: \"POST\",\n                                url: url,\n                                cache: false,\n                                data: data\n                            }).done(function( response ) {\n                                notesProcessResponse(response,a);\n                            });\n                        } else { // Добавление\n                            var url = '/mynotes/addProcess/';\n\n                            url += '?is_ajax=1';\n                            url += '&product_id=' + productId;\n                            url += '&user_id=' + config.userId;\n\n                            var data = {\n                                product_id: productId,\n                                user_id: config.userId,\n                                is_ajax: 1\n                            };\n                            $.ajax({\n                                type: \"POST\",\n                                url: url,\n                                cache: false,\n                                data: data\n                            }).done(function( response ) {\n                                notesProcessResponse(response,a);\n                            });\n                        }\n                    }; // addNoteLoggedIn\n\n                    // Клик добавить на заметку\n                    $('BODY').on('click','.btn-add-note',function(e){\n\n                        if (config.userId == 0) {\n                            addNoteNotLoggedIn(this); // Добавить в заметки если НЕ авторизован\n                        } else {\n                            addNoteLoggedIn(this); // Добавить в заметки если авторизован\n                        }\n\n                        e.preventDefault();\n                        e.stopPropagation();\n                    });\n\n                    $('BODY').on('click',function(e){\n                        $('.btn-add-note').popover('destroy');\n                    });\n\n                    if (config.userId == 0) {\n                        // Кол-во заметок при загрузке страницы\n                        var currentProducts = $.cookie(config.notesCookieName);\n                        if (currentProducts) {\n                            var currentProductsArray = currentProducts.split(',');\n                            $('.mynotes-count').html(currentProductsArray.length);\n                        }\n                    }\n\n                    // Очистка города из куки\n                    $('BODY').on('click','#cities-selector .more-link',function(e){\n                        if (config.userId == 0) {\n                            $.cookie('visitorcity', '', {\n                                expires: -1,\n                                path: \"/\"\n                            });\n                        }\n                    });\n\n                    // Загрузка данных пользователя при фокусе на страницу (если посетиитель авторизовался на другой странице)\n                    var loadLoggedInUser = function(){\n                        //if (config.userCookieName != \"\" && $.cookie(config.userCookieName)) { // Пользователь авторизовался\n\n                        // Нужно проверять каждый раз т.к. пользователь мог выйти в другом табе\n                        //if (config.userId == 0) { // Пользователь еще не загружен\n\n                        // Перегружаем формы добавления комментария\n                        var commentForms = $('.modal.product .add-comment-form');\n                        $('.messages', commentForms).remove();\n\n                        var nameFields = $('[name=\"username\"]', commentForms);\n                        var emailFields = $('[name=\"email\"]', commentForms);\n\n                        // Что бы не появлялись поля если пользователь не авторизован\n//                                    nameFields.attr('type', 'text').addClass('loading');\n//                                    emailFields.attr('type', 'text').addClass('loading');\n\n                        // Загрузка информации о пользователе в инпуты\n                        api.get('/apiv2/currentuser/', {}, function (response) {\n                            if (response.error) {\n\n                                // Не показывать ошибку \"Требуется авторизация\"\n                                if (response.error == 'unauthorized') {\n\n                                    // \"Обнуление\" полей, если они еще не обнулены, что бы уменьшить кол-во запросов\n                                    if (config.userId != 0) {\n                                        nameFields.attr('type', 'hidden');\n                                        emailFields.attr('type', 'hidden');\n\n                                        config.userId = 0;\n                                        config.user.id = 0;\n                                        config.user.username = '';\n                                        config.user.email = '';\n\n                                        // Перегрузка HTML аяксом, что перергужать определяется через аттрибут [data-loginreload]\n                                        $.ajax({\n                                            type: \"GET\",\n                                            url: config.originalState\n                                        }).done(function (html) {\n                                            $('[data-loginreload]', html).each(function () {\n                                                $('[data-loginreload=\"' + $(this).attr('data-loginreload') + '\"]').html($(this).html());\n                                            });\n                                        });\n\n                                        // Загрузка лайков\n                                        if (typeof window.updateData != 'undefined') { // На странице авторизации например нет такой функции\n                                            window.updateData();\n                                        }\n                                    }\n                                } else {\n                                    $(commentForms).prepend('<div class=\"messages\"><p class=\"alert-danger\">' + response.error_description + '</p></div>');\n                                }\n                            } else {\n                                // Обновляем если пользователь еще не загружен, что бы уменьшить кол-во запросов\n                                if (config.userId == 0) {\n                                    nameFields.attr('type', 'text');\n                                    emailFields.attr('type', 'text');\n\n                                    nameFields.val(response.user.name);\n                                    emailFields.val(response.user.username);\n\n                                    config.userId = response.user.id;\n                                    config.user.id = response.user.id; // Используется везде config.userId, а это на будущее, что бы в одном объекте все было\n                                    config.user.username = response.user.name;\n                                    config.user.email = response.user.username; // в response email находится в username даже не помню почему уже, что то с апи связано\n\n                                    // Перегрузка HTML аяксом, что перергужать определяется через аттрибут [data-loginreload]\n                                    $.ajax({\n                                        type: \"GET\",\n                                        url: config.originalState\n                                    }).done(function (html) {\n                                        $('[data-loginreload]', html).each(function () {\n                                            $('[data-loginreload=\"' + $(this).attr('data-loginreload') + '\"]').html($(this).html());\n                                        });\n                                    });\n\n                                    // Загрузка лайков\n                                    if (typeof window.updateData != 'undefined') { // На странице авторизации например нет такой функции\n                                        window.updateData();\n                                    }\n                                }\n                            }\n\n//                                        nameFields.removeClass('loading');\n//                                        emailFields.removeClass('loading');\n                        });\n                        //}\n                        //}\n                    };\n                    $(window).on('focus', function() {\n                        loadLoggedInUser();\n                    });\n\n                    // При клике на кнопку переход на авторизацию в новом окне\n                    $('BODY').on('click','.btn-loginnewwindow',function(e){\n                        if (config.userId == 0) { // Если пользователь не залогиненый\n\n                            // Нужно сделать reset для бутона, а то в форме добавления комента кнопка остается неактивной\n                            $(this).button('reset');\n\n                            // Проверяем если окно уже открыто, что бы не открывать несколько\n                            if (typeof config.loginWindow == 'undefined' || config.loginWindow.closed) {\n\n                                var url = '/account/login/?m=2';\n\n                                config.loginWindow = window.open(url, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');\n\n                                // Закрывать окно, когда пользователь авторизовался\n                                var interval = setInterval(function () {\n\n                                    // userCookieName никак не узнаешь...(раньше с PHP брали, но это не правильно т.к. для неавторизованых не правильный будет показывать)\n                                    //if (config.userCookieName != \"\" && $.cookie(config.userCookieName)) { // Пользователь авторизовался\n                                    //if (config.userId != 0) { // Здесь userId будет 0 пока не сфокусируешься на это окно с окна логина\n                                    if (config.userId != 0) { // Если userId 0, то будем вызывать функцию loadLoggedInUser, что бы загрузить пользователя, если он авторизовался в другом окне\n                                        config.loginWindow.close();\n                                    } else {\n                                        loadLoggedInUser(); // Кажду секунду будет отправляться этот запрос. Будет тормозить????!!!!\n                                    }\n                                    if (typeof config.loginWindow == 'undefined' || config.loginWindow.closed) { // Если окно закрылось то очищаем интервал\n                                        if (interval) {\n                                            clearInterval(interval);\n                                        }\n                                    }\n                                }, 1000);\n\n                            } else { // Окно уже есть, фокусируемся на нем\n                                config.loginWindow.focus();\n                            }\n\n                            e.preventDefault();\n                        }\n                    });\n\n                    /* Загрузка заметок для незалогиненых пользователей */\n                    function loadNotesToProductButtons() {\n                        if (!config.userId) {\n                            var currentProducts = $.cookie(config.notesCookieName);\n                            if (currentProducts) {\n                                var currentProductsArray = currentProducts.split(',');\n\n                                for(var i = 0; i < currentProductsArray.length; i++) {\n                                    var btn = $('.btn-add-note[rel=\"' + currentProductsArray[i] + '\"]');\n                                    if (btn.length) {\n                                        btn.attr('data-basket','1');\n                                        btn.attr('data-original-title','Удалить');\n                                        btn.addClass('active');\n\n                                        $('.tooltip .tooltip-inner').text('Удалить');\n                                    }\n                                }\n                            }\n\n                        }\n                    }\n                    loadNotesToProductButtons();\n\n                                        if (!$.cookie(\"subscribe_showed\")) {\n                        if ($('.fixed-tabs').is(':visible') && $(\".subscribe-form\").length) {\n                            setTimeout(function () {\n                                $(\".fixed-tabs\").css(\"left\", \"12px\");\n                                if (!$(\".subscribe-form\").is(\":visible\")) {\n                                    $(\".fixed-tabs .subscribe .show-tab-link\").click()\n                                }\n                                $.cookie(\"subscribe_showed\", \"1\", {\n                                    expires: 999,\n                                    path: \"/\"\n                                })\n                            }, 15e3)\n                        }\n                    }\n                    \n                    var api = new function(){var thisClass = this;thisClass.get = function(url, data, callback){var urlParams = '';for(var propertyName in data){urlParams += (urlParams == '')?'':'&';urlParams += propertyName + '=' + data[propertyName];}if (urlParams != ''){url += '?' + urlParams;}url = config.websiteurl + url;var xhr = $.ajax({type: \"GET\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web'); },url: url}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){ callback(jqXHR.responseJSON);} else { var data = {error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.post = function(url, data, callback){var postData = {};for(var propertyName in data){postData[propertyName] = data[propertyName];}url = config.websiteurl + url;var xhr = $.ajax({type: \"POST\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web'); },url: url,data: postData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){ callback(jqXHR.responseJSON);} else { var data = {error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.delete = function(url, data, callback){var deleteData = {};for(var propertyName in data){deleteData[propertyName] = data[propertyName];}url += '?' + $.param(deleteData);url = config.websiteurl + url;var xhr = $.ajax({type: 'DELETE',beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web'); },url: url,data: deleteData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){ callback(jqXHR.responseJSON);} else { var data = {error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.put = function(url, data, callback){var putData = {};for(var propertyName in data){putData[propertyName] = data[propertyName];}url += '?' + $.param(putData);url = config.websiteurl + url;var xhr = $.ajax({type: 'PUT',beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web'); },url: url,data: putData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){ callback(jqXHR.responseJSON);} else { var data = {error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};};$.getScript(\"https://gotoshop.by/js/md5.js\",function(){(function ($){$('#register-form').on('submit',function(){var password = $('[name=\"password\"]',this).val();if (password != ''){var newPassword = hex_md5(password);$('[name=\"password1\"]', this).val(newPassword);$('[name=\"password\"]',this).val('');}var password = $('[name=\"repeatpassword\"]',this).val();if (password != ''){var newPassword = hex_md5(password);$('[name=\"password2\"]', this).val(newPassword);$('[name=\"repeatpassword\"]',this).val('');}});})(jQuery);});function shopsSelectorClass(){var tc = this;tc.csel = '.choose-shops';tc.ssnsel = '.selected-shops-field'; tc.sLoaded = false;tc.sFavLoaded = false;tc.chooseShopBtnClick = function(e){var form = $(this).parents('form');var inputShops = $('.selected-shops-field',form); inputShops.attr(\"data-prevvalue\", inputShops.val());var chooseShops = $(tc.csel,form);if (chooseShops.is(\":visible\")){chooseShops.hide();} else {var c = $('.choose-shop-wrap',form);var cityId = $(this).attr('data-cityid');if (!cityId){cityId = config.cityId;}tc.loadShops(c, cityId);chooseShops.show();}e.preventDefault();};tc.cancelBtnClick = function(e){var form = $(this).parents('form');var t = $('.selected-shops-field',form);$(t).val($(t).attr(\"data-prevvalue\"));$(tc.csel).hide();e.preventDefault();};tc.submitBtnClick = function(e){var form = $(this).parents('form');var c = $('.choose-shop-wrap',form);var t = $('.selected-shops-field',c);var sc = $('input[name=\"shops[]\"]:checked',c);var s = $('input[name=\"shops[]\"]',c);var h = $(\".choose-shop-link .selected-shops-name\",c);var r = '',r2 = '';if (sc.length && sc.length < s.length){var n = [];sc.each(function (){n.push($(this).val());r += (r == '')?'':', ';r += $(this).attr(\"title\");});var favSIs = tc.getFavShopsIds(c);var diff1 = $(favSIs).not(n).get();var diff2 = $(n).not(favSIs).get();if (diff1.length == 0 && diff2.length == 0){$(t).val(\"favorite\");r = \"Выбрать магазины\";r2 = \"Любимые магазины\";} else {$(t).val(n);r2 = r;}} else {$(t).val(\"all\");r = \"Выбрать магазины\";r2 = \"Все магазины\";}h.text(r2);h.attr({\"title\":r,\"data-original-title\":r});$(tc.csel,form).hide();if (!config.isTouchDevice){$('[data-toggle=\"tooltip\"]').tooltip();}e.preventDefault();};tc.getShopsCategoryHTML = function(cI,cN){var shopsHtml = '<div class=\"category hidden\" data-id=\"' + cI + '\"><h4>' + cN;shopsHtml += '&nbsp;<small><a href=\"#\" class=\"check-all\">Выбрать все/Отменить все</a></small>';shopsHtml += '</h4><ul>';shopsHtml += '</ul></div>';return shopsHtml;};tc.getShopHTML = function(sI,sN,img50){var shopsHtml = '<li>';shopsHtml += '<label for=\"subscribe-shop-' + sI + '\" data-toggle=\"tooltip\" data-original-title=\"' + sN + '\">';shopsHtml += '<input id=\"subscribe-shop-' + sI + '\" name=\"shops[]\" value=\"' + sI + '\" title=\"' + sN + '\" type=\"checkbox\">';shopsHtml += '<span class=\"image\"> <img src=\"' + img50 + '\" alt=\"\" height=\"50\" width=\"50\"></span>';shopsHtml += '</label>';shopsHtml += '</li>';return shopsHtml;};tc.loadFavoriteShops = function(c,cityId){tc.sFavLoaded = false;var shopsWrap = $('.choose-shops .wrap',c);var url2 = '/apiv2/favoriteshops/';var data2 = {city_id: cityId,limit: 999,fields: 'id,name,image50,categories_id'};api.get(url2, data2, function (response2){if (response2.totalCount > 0){var shopsHtml = '';for (var key2 in response2.shops){var sI = response2.shops[key2].id;var sN = response2.shops[key2].name;var img50 = response2.shops[key2].image50;shopsHtml += tc.getShopHTML(sI,sN,img50);}$('.category[data-id=\"0\"]', shopsWrap).removeClass('hidden');$('.category[data-id=\"0\"] ul', shopsWrap).html(shopsHtml);}tc.sFavLoaded = true;if (tc.sLoaded){ tc.setChecked(c);}});};tc.loadShops = function(c,cityId){var shopsWrap = $('.choose-shops .wrap',c);tc.sLoaded = false;tc.sFavLoaded = false;var url = '/apiv2/categories/';var data = {city_id: cityId,limit: 999,fields: 'id,name'};shopsWrap.html('').addClass('loader-icon').attr('data-cityid', cityId);api.get(url, data, function (response){if (response.totalCount > 0){shopsWrap.append(tc.getShopsCategoryHTML(0,'Любимые'));var loaded = 0; for (var key in response.categories){var cat = response.categories[key];var cI = cat.id;var cN = cat.name;shopsWrap.append(tc.getShopsCategoryHTML(cI,cN));var url2 = '/apiv2/shops/';var data2 = {city_id: cityId,category_id: cI,limit: 999,fields: 'id,name,image50,categories_id'};api.get(url2, data2, function (response2){if (response2.totalCount > 0){var shopsHtml = '';for (var key2 in response2.shops){var sI = response2.shops[key2].id;var sN = response2.shops[key2].name;var img50 = response2.shops[key2].image50;var cI = response2.shops[key2].categories_id;shopsHtml += tc.getShopHTML(sI,sN,img50);}$('.category[data-id=\"' + cI + '\"]', shopsWrap).removeClass('hidden');$('.category[data-id=\"' + cI + '\"] ul', shopsWrap).html(shopsHtml);}loaded++;if (response.totalCount == loaded){ tc.sLoaded = true;tc.loadFavoriteShops(c,cityId);if (tc.sFavLoaded){ tc.setChecked(c);}}});}}shopsWrap.removeClass('loader-icon');});};tc.getSelectedShops = function(c){return $(tc.ssnsel,c).val();};tc.getFavShopsIds = function(c){var v = [];$('.category[data-id=\"0\"] [name=\"shops[]\"]',c).each(function(){v.push($(this).val());});return v;};tc.setChecked = function(c){var favSIs = tc.getFavShopsIds(c);for(var i = 0; i < favSIs.length; i++){$('.category[data-id!=\"0\"] [name=\"shops[]\"][value=\"' + favSIs[i] + '\"]', c).parents('li:first').remove();}var selS = tc.getSelectedShops(c);if (selS == 'all'){$('[name=\"shops[]\"]',c).prop(\"checked\", true);} else if (selS == 'favorite'){$('.category[data-id=\"0\"] [name=\"shops[]\"]',c).prop(\"checked\", true);} else {var selSArr = selS.split(',');for(var i = 0; i < selSArr.length; i++){$('[name=\"shops[]\"][value=\"' + selSArr[i] + '\"]', c).prop(\"checked\", true);}}};$('BODY').on('click','.choose-shop-link',tc.chooseShopBtnClick);$('BODY').on('click',tc.csel + ' .cancel-button',tc.cancelBtnClick);$('BODY').on('click',tc.csel + ' .submit-button',tc.submitBtnClick);};var shopsSelector = new shopsSelectorClass();(function( $){$('BODY').on('click','.btn-group-search .form-control',function(e){e.stopPropagation();});$('body').on('click','.btn-group-search .dropdown-menu.inner>li',function(e){if ($(this).hasClass('no-results')){return;}if ($(this).hasClass('disabled')){e.stopPropagation();return;}var btnGroup = $(this).parents('.btn-group-search:first');var id = $(this).attr('rel');var name = $('.text',this).text();var button = $('.btn',btnGroup);var buttonText = $('.text',button);buttonText.text(name);$('li.active',btnGroup).removeClass('active');$(this).addClass('active');if ($(button).attr('data-hiddeninput')){var hiddenInputName = $(button).attr('data-hiddeninput');var hiddenInput = $('[name=\"' + hiddenInputName + '\"]');$(hiddenInput).val(id);$(hiddenInput).attr('data-cityname', name);$(hiddenInput).trigger('change');}});$('BODY').on('click','.btn-group-search .dropdown-toggle',function(){var btnGroup = $(this).parents('.btn-group-search:first');var input = $('.typeahead,.typeahead-api',btnGroup);if (!btnGroup.hasClass('open')){var dropdownMenu = $(this).next('.dropdown-menu');var submenu = $('> .dropdown-menu.inner',dropdownMenu);var windowHeight = $(window).height();var submenuHeight = Math.round(windowHeight/2);if (submenuHeight < 150){submenuHeight = 150;}submenu.css('max-height', submenuHeight);dropdownMenu.addClass('open');if (!config.isTouchDevice){setTimeout(function(){input.focus();},0);}}});var xhr;var prevVal;$('BODY').on('keyup cut paste','.typeahead,.typeahead-api',function($e){var specialKeyCodeMap = {9: \"tab\",27: \"esc\",37: \"left\",39: \"right\",13: \"enter\",38: \"up\",40: \"down\",16: \"shift\",17: \"ctrl\",18: \"alt\"};if (specialKeyCodeMap[$e.which || $e.keyCode]){return;}var input = $(this);var searchVal = input.val();if (prevVal == searchVal){return;}prevVal = searchVal;if (xhr){xhr.abort();}var minlength = input.attr('data-minlenght');if (minlength){if (searchVal.length > 0 && searchVal.length < minlength){return true;}}var btnGroup = input.parents('.btn-group-search:first');var t = setTimeout(function(){input.addClass('loading');},100);var url = config.websiteurl + input.attr('data-ajax-url');url += '?name=' + encodeURIComponent(searchVal);if (input.attr('data-ajax-type')){url += '&type=' + input.attr('data-ajax-type');}if (input.attr('data-ajax-cityid')){url += '&city_id=' + input.attr('data-ajax-cityid');}if (input.attr('data-ajax-userid')){url += '&user_id=' + input.attr('data-ajax-userid');}if (input.attr('data-ajax-all')){url += '&all=' + input.attr('data-ajax-all');}if (input.attr('data-params')){var params = input.attr('data-params');var paramsArray = params.split('&');for(var i = 0; i < paramsArray.length; i++){var paramArray = paramsArray[i].split('=');var param = paramArray[0];var val = paramArray[1];if (param == 'parent' && searchVal.length > 0){continue;}url += '&' + param + '=' + val;}}var showCheckboxes = (input.attr('data-checkboxes')== '1');xhr = $.ajax({type: \"GET\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web'); },url: url}).done(function( response){var dropdownContainer = $('.dropdown-menu.inner',btnGroup);if (response.pcategories){ if (response.totalCount > 0){var btnTextObj = $('.btn .text',btnGroup);var selectedCategoriesIdsStr = $(btnTextObj).attr('data-ids');var selectedCategoriesIds = [];if (selectedCategoriesIdsStr){selectedCategoriesIds = selectedCategoriesIdsStr.split(',')}var itemsHTML = config.categoriesDropdown.getItemsHTML(response.pcategories, showCheckboxes, selectedCategoriesIds, searchVal);dropdownContainer.html(itemsHTML);} else {dropdownContainer.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}} else if (response.users){if (response.totalCount > 0){var userIdInput = $('[name=\"users_id\"]');var itemsHTML = '';for (var i = 0; i < response.users.length; i++){var user = response.users[i];var itemHTML = '';var itemClass = '';itemHTML += '<li' + ((itemClass == '')?'':' class=\"' + itemClass + '\"')+ ' rel=\"' + user.id + '\">';itemHTML += '<a href=\"javascript:;\" title=\"' + user.email + '\">';itemHTML += '<span class=\"text\">';itemHTML += user.username;itemHTML += '<br/><small>' + user.email + '</small>';itemHTML += '</span>';itemHTML += '</a>';itemHTML += '</li>';itemsHTML += itemHTML;}dropdownContainer.html(itemsHTML);} else {dropdownContainer.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}} else {dropdownContainer.html(response);}clearTimeout(t);input.removeClass('loading');if (!config.isTouchDevice){$('[data-toggle=\"tooltip\"]').tooltip();}});});$('BODY').on('click','.btn-group-search.btn-search-categories .dropdown-toggle',function(){var btnGroup = $(this).parents('.btn-group-search:first');var input = $('.typeahead-api',btnGroup);prevVal = -1; if ($('.dropdown-menu.inner', btnGroup).html()== ''){ input.trigger('keyup');}});$('.btn-group-search').each(function(){var activeItem = $('.dropdown-menu.inner .active',this);if (activeItem.length){activeItem.trigger('click');}});})( jQuery);(function( $){$('BODY').off('click','.select-tree li');$('BODY').off('click','.select-tree li a');$('BODY').off('click','.select-tree li a span');$('BODY').off('click','.select-tree [type=\"checkbox\"]');$('BODY').on('click','.select-tree li',function(e){e.preventDefault();e.stopPropagation();});$('BODY').on('click','.select-tree li a',function(e){e.preventDefault();e.stopPropagation();});var CategoriesDropdown = function(){this.getCategoriesIdsStr = function(wrapper,productIndex){var categoriesInputs = $('[name^=\"products[' + productIndex + '][productcategories]\"]',wrapper);var categoriesIds = '';if (categoriesInputs.length){categoriesInputs.each(function(){categoriesIds += (categoriesIds == '')?'':',';categoriesIds += $(this).val();});};return categoriesIds;};this.getCategoriesText = function(wrapper,productIndex){var categoriesInputs = $('[name^=\"products[' + productIndex + '][productcategories]\"]',wrapper);var categoriesText = '';if (categoriesInputs.length){categoriesInputs.each(function(){var text = $(this).attr('data-title');var childrens = $(this).attr('data-child');categoriesText += (categoriesText == '')?'':', ';if (childrens == 0){categoriesText += '<strong>';}categoriesText += text;if (childrens == 0){categoriesText += '</strong>';}});};return categoriesText;};this.getItemsHTML = function(pcategories, showCheckboxes, selectedCategoriesIds, searchText){var itemsHTML = '';for (var i = 0; i < pcategories.length; i++){var pcategory = pcategories[i];var haveChildrens = (pcategory.childcats && pcategory.childcats.length);var itemHTML = '';var itemClass = '';var showCheckbox = !(pcategory.children > 0 && !showCheckboxes);if (pcategory.children > 0){itemClass += (itemClass == '')?'':' ';itemClass += 'parent';}if (haveChildrens){itemClass += (itemClass == '')?'':' ';itemClass += 'open';}itemHTML += '<li' + ((itemClass == '')?'':' class=\"' + itemClass + '\"')+ '>';itemHTML += '<a href=\"javascript:;\" data-parent=\"' + pcategory.parent + '\" data-id=\"' + pcategory.id + '\" data-child=\"' + pcategory.children + '\">';if (pcategory.children > 0){itemHTML += '<span class=\"glyphicon glyphicon-plus\"></span>';itemHTML += '<span class=\"glyphicon glyphicon-minus\"></span>';} else {if (!showCheckbox){itemHTML += '<span class=\"glyphicon glyphicon-empty\"></span>';}}if (showCheckbox){var checked = (selectedCategoriesIds && (jQuery.inArray(pcategory.id,selectedCategoriesIds)!= -1));itemHTML += '<input' + (checked?' checked=\"checked\"':'')+ ' type=\"checkbox\" value=\"' + pcategory.id + '\" />';}var name = pcategory.name;if (searchText){searchText = (searchText + '').replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:])/g, \"\\\\$1\");name = name.replace( new RegExp( \"(\" + searchText + \")\" , 'gi'), \"<b>$1</b>\");}itemHTML += '<span class=\"text\">' + name + '</span>';itemHTML += '</a>';if (haveChildrens){itemHTML += '<ul class=\"dropdown-menu inner\">';itemHTML += config.categoriesDropdown.getItemsHTML(pcategory.childcats, showCheckboxes, selectedCategoriesIds, searchText);itemHTML += '</ul>';}itemHTML += '</li>';itemsHTML += itemHTML;}return itemsHTML;};};config.categoriesDropdown = new CategoriesDropdown;$('BODY').on('click','.select-tree li a span',function(e){var span = $(this);var a = span.parent('a');var li = a.parent('li');var productCategoryId = a.attr('data-id');var children = parseInt(a.attr('data-child'));var productItem = li.parents('.product-item');var wrapper = $(this).parents('.btn-group-search:first');if (children == 0){$('[type=\"checkbox\"]',li).click();return false;}var subUl = $('ul',li);if (subUl.length){li.toggleClass('open');return false;} else {li.append('<ul class=\"dropdown-menu inner\"></ul>');li.addClass('open');subUl = $('ul',li);}if (children > 0){var url = '/apiv2/pcategories/';var data = {};var input = $('input.typeahead-api',wrapper);var params = input.attr('data-params');if (params){var paramsArray = params.split('&');for(var i = 0; i < paramsArray.length; i++){var paramArray = paramsArray[i].split('=');var param = paramArray[0];var val = paramArray[1];if (param == 'parent'){ val = productCategoryId;}data[param] = val;}}var showCheckboxes = (input.attr('data-checkboxes')== '1');subUl.html('<li class=\"loading\"></li>');var btnTextObj = $('.btn .text',wrapper);var selectedCategoriesIdsStr = $(btnTextObj).attr('data-ids');var selectedCategoriesIds = [];if (selectedCategoriesIdsStr){selectedCategoriesIds = selectedCategoriesIdsStr.split(',')}api.get(url, data, function(response){if (response.totalCount > 0){if (response.pcategories){var itemsHTML = '';var searchText = false;for (var i = 0; i < response.pcategories.length; i++){var pcategory = response.pcategories[i];var itemHTML = '';var itemClass = '';var showCheckbox = !(pcategory.children > 0 && !showCheckboxes);if (pcategory.children > 0){itemClass += (itemClass == '')?'':' ';itemClass += 'parent';}itemHTML += '<li' + ((itemClass == '')?'':' class=\"' + itemClass + '\"')+ '>';itemHTML += '<a href=\"javascript:;\" data-parent=\"' + pcategory.parent + '\" data-id=\"' + pcategory.id + '\" data-child=\"' + pcategory.children + '\">';if (pcategory.children > 0){itemHTML += '<span class=\"glyphicon glyphicon-plus\"></span>';itemHTML += '<span class=\"glyphicon glyphicon-minus\"></span>';} else {if (!showCheckbox){itemHTML += '<span class=\"glyphicon glyphicon-empty\"></span>';}}if (showCheckbox){var checked = (selectedCategoriesIds && (jQuery.inArray(pcategory.id,selectedCategoriesIds)!= -1));itemHTML += '<input' + (checked?' checked=\"checked\"':'')+ ' type=\"checkbox\" value=\"' + pcategory.id + '\" />';}var name = pcategory.name;if (searchText){searchText = (searchText + '').replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:])/g, \"\\\\$1\");name = name.replace( new RegExp( \"(\" + searchText + \")\" , 'gi'), \"<b>$1</b>\");}itemHTML += '<span class=\"text\">' + name + '</span>';itemHTML += '</a>';itemHTML += '</li>';itemsHTML += itemHTML;}subUl.html(itemsHTML);}} else {subUl.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}});}e.preventDefault();});$('BODY').on('click','.select-tree [type=\"checkbox\"]',function(e){var currentCategoryId = $(this).val();var currentCategoryTitle = $(this).next('.text').text();var a = $(this).parents('a:first');var wrapper = $(this).parents('.btn-group-search:first');var productWrapper = $(this).parents('.product-item:first');if (productWrapper.length){var productIndex = productWrapper.attr('data-product');} else {var productIndex = 0;}if ($(this).is(':checked')){ $(wrapper).append('<input data-child=\"' + a.attr('data-child')+ '\" data-title=\"' + currentCategoryTitle + '\" type=\"hidden\" value=\"' + currentCategoryId + '\" name=\"products[' + productIndex + '][productcategories][' + currentCategoryId + ']\">');$('.dropdown-menu-removable',wrapper).append('<span class=\"removable-item\" data-id=\"' + currentCategoryId + '\">' + currentCategoryTitle + ' <span class=\"glyphicon glyphicon-remove\" title=\"Удалить\"></span></span>');} else { $('[name=\"products[' + productIndex + '][productcategories][' + currentCategoryId + ']\"]').remove();$('.dropdown-menu-removable .removable-item[data-id=\"' + currentCategoryId + '\"]').remove();}var categoriesIds = config.categoriesDropdown.getCategoriesIdsStr(wrapper,productIndex);var categoriesText = config.categoriesDropdown.getCategoriesText(wrapper,productIndex);var btnTextObj = $('.btn .text',wrapper);if (categoriesText == ''){btnTextObj.text(btnTextObj.attr('data-text'));} else {if (!btnTextObj.attr('data-text')){btnTextObj.attr('data-text',btnTextObj.text());}btnTextObj.html(categoriesText);}btnTextObj.attr('data-ids',categoriesIds); var openTree = false;var li = $(this).parents('li:first');if (li.hasClass('parent')&& !li.hasClass('open')){openTree = true;}if (openTree){$('span',a).click();}e.stopPropagation();});$('BODY').on('click','.removable-item',function(e){e.stopPropagation();});$('BODY').on('click','.removable-item .glyphicon',function(e){var removable = $(this).parents('.removable-item');var wrapper = $(this).parents('.btn-group-search');var productWrapper = $(this).parents('.product-item:first');if (productWrapper.length){var productIndex = productWrapper.attr('data-product');} else {var productIndex = 0;}var categoryId = removable.attr('data-id');var checkbox = $('.dropdown-menu.inner [type=\"checkbox\"][value=\"' + categoryId + '\"]',wrapper);if (checkbox.length){checkbox.prop('checked',false);} else {}var categoriesInputs = $('[name^=\"products[' + productIndex + '][productcategories][' + categoryId + ']\"]');categoriesInputs.remove();removable.remove();var categoriesIds = config.categoriesDropdown.getCategoriesIdsStr(wrapper,productIndex);var categoriesText = config.categoriesDropdown.getCategoriesText(wrapper,productIndex);var btnTextObj = $('.btn .text',wrapper);if (categoriesText == ''){btnTextObj.text(btnTextObj.attr('data-text'));} else {if (!btnTextObj.attr('data-text')){btnTextObj.attr('data-text',btnTextObj.text());}btnTextObj.html(categoriesText);}btnTextObj.attr('data-ids',categoriesIds); e.stopPropagation();});$('BODY').on('click','.btn-group-search .btn-filter-discounts-apply',function(e){var currentUrl = location.protocol + '/' + '/' + location.host + location.pathname;var params = '';if (config.originalState.indexOf('?')!= -1){var request = {};var pairs = config.originalState.substring(config.originalState.indexOf('?')+ 1).split('&');for (var i = 0; i < pairs.length; i++){if(!pairs[i])continue;var pair = pairs[i].split('=');request[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);}delete request['cids']; for (var key in request){params += (params == '')?'':'&';params += encodeURIComponent(key);if (request[key] != 'undefined'){params += '=' + encodeURIComponent(request[key]);}}}var categoriesInputs = $('[name^=\"products[0][productcategories]\"]');var categoriesIds = '';if (categoriesInputs.length){var categoryIdsArray = [];categoriesInputs.each(function(){if($.inArray($(this).val(), categoryIdsArray)=== -1)categoryIdsArray.push($(this).val());});$(categoryIdsArray).each(function(i,el){categoriesIds += (categoriesIds == '')?'':',';categoriesIds += el;});}if (categoriesIds != ''){params += (params == '')?'':'&';params += 'cids=' + categoriesIds;}var url = currentUrl;if (params != ''){url += '?' + params;}window.location = url;e.preventDefault();});$('BODY').on('click','.btn-group-search .btn-filter-discounts-clear',function(e){var categoriesInputs = $('[name^=\"products[0][productcategories]\"]');categoriesInputs.remove();var currentUrl = location.protocol + '/' + '/' + location.host + location.pathname;window.location = currentUrl;e.preventDefault();});})( jQuery);(function(e,t){function r(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return r(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp(\"^\"+n.toLowerCase()+\"([A-Z])\");n=new RegExp(\"^\"+n.toLowerCase());for(var a in r)if(n.test(a)){s=a.replace(o,u);i[s]=r[a]}return i}function l(t){var n={};if(!d[t]){t=t.split(\"-\")[0];if(!d[t])return}var r=d[t];e.each(p,function(e,t){if(t in r)n[t]=r[t]});return n}var n=e(window);var o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;if(!e.isArray(t))t=[t];this.clear();this.push.apply(this,t)},clear:function(){this.splice(0)},copy:function(){var e=new o;e.replace(this);return e}};return function(){var n=[];n.push.apply(n,arguments);e.extend(n,t);return n}}();var u=function(t,n){this.dates=new o;this.viewDate=i();this.focusDate=null;this._process_options(n);this.element=e(t);this.isInline=false;this.isInput=this.element.is(\"input\");this.component=this.element.is(\".date\")?this.element.find(\".add-on, .input-group-addon, .btn\"):false;this.hasInput=this.component&&this.element.find(\"input\").length;if(this.component&&this.component.length===0)this.component=false;this.picker=e(v.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass(\"datepicker-inline\").appendTo(this.element)}else{this.picker.addClass(\"datepicker-dropdown dropdown-menu\")}if(this.o.rtl){this.picker.addClass(\"datepicker-rtl\")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find(\"tfoot th.today\").attr(\"colspan\",function(e,t){return parseInt(t)+1});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o);var r=n.language;if(!d[r]){r=r.split(\"-\")[0];if(!d[r])r=h.language}n.language=r;switch(n.startView){case 2:case\"decade\":n.startView=2;break;case 1:case\"year\":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case\"months\":n.minViewMode=1;break;case 2:case\"years\":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode);if(n.multidate!==true){n.multidate=Number(n.multidate)||false;if(n.multidate!==false)n.multidate=Math.max(0,n.multidate);else n.multidate=1}n.multidateSeparator=String(n.multidateSeparator);n.weekStart%=7;n.weekEnd=(n.weekStart+6)%7;var i=v.parseFormat(n.format);if(n.startDate!==-Infinity){if(!!n.startDate){if(n.startDate instanceof Date)n.startDate=this._local_to_utc(this._zero_time(n.startDate));else n.startDate=v.parseDate(n.startDate,i,n.language)}else{n.startDate=-Infinity}}if(n.endDate!==Infinity){if(!!n.endDate){if(n.endDate instanceof Date)n.endDate=this._local_to_utc(this._zero_time(n.endDate));else n.endDate=v.parseDate(n.endDate,i,n.language)}else{n.endDate=Infinity}}n.daysOfWeekDisabled=n.daysOfWeekDisabled||[];if(!e.isArray(n.daysOfWeekDisabled))n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\\s]*/);n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)});n.orientation={x:\"auto\",y:\"auto\"};if(!o||o===\"auto\");else if(s.length===1){switch(s[0]){case\"top\":case\"bottom\":n.orientation.y=s[0];break;case\"left\":case\"right\":n.orientation.x=s[0];break}}else{o=e.grep(s,function(e){return/^left|right$/.test(e)});n.orientation.x=o[0]||\"auto\";o=e.grep(s,function(e){return/^top|bottom$/.test(e)});n.orientation.y=o[0]||\"auto\"}},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++){r=e[n][0];if(e[n].length===2){i=t;s=e[n][1]}else if(e[n].length===3){i=e[n][1];s=e[n][2]}r.on(s,i)}},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++){r=e[n][0];if(e[n].length===2){s=t;i=e[n][1]}else if(e[n].length===3){s=e[n][1];i=e[n][2]}r.off(i,s)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){if(e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find(\"input\"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){if(e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]}else if(this.element.is(\"div\")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}this._events.push([this.element,\"*\",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]);this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{\"mousedown touchstart\":e.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){if(arguments.length===0){e=this.dates.length-1;t=this.o.format}else if(typeof e===\"string\"){t=e;e=this.dates.length-1}t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){if(!this.isInline)this.picker.appendTo(\"body\");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger(\"show\")},hide:function(){if(this.isInline)return;if(!this.picker.is(\":visible\"))return;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find(\"input\").val()))this.setValue();this._trigger(\"hide\")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger(\"changeDate\");this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local));this._trigger(\"changeDate\");this.setValue()},setDate:s(\"setDates\"),setUTCDate:s(\"setUTCDates\"),setValue:function(){var e=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find(\"input\").val(e).change()}}else{this.element.val(e).change()}},getFormattedDate:function(n){if(n===t)n=this.o.format;var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e});this.update();this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var t=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=n.width(),o=n.height(),u=n.scrollTop();var a=parseInt(this.element.parents().filter(function(){return e(this).css(\"z-index\")!==\"auto\"}).first().css(\"z-index\"))+10;var f=this.component?this.component.parent().offset():this.element.offset();var l=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var c=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var h=f.left,p=f.top;this.picker.removeClass(\"datepicker-orient-top datepicker-orient-bottom \"+\"datepicker-orient-right datepicker-orient-left\");if(this.o.orientation.x!==\"auto\"){this.picker.addClass(\"datepicker-orient-\"+this.o.orientation.x);if(this.o.orientation.x===\"right\")h-=t-c}else{this.picker.addClass(\"datepicker-orient-left\");if(f.left<0)h-=f.left-i;else if(f.left+t>s)h=s-t-i}var d=this.o.orientation.y,v,m;if(d===\"auto\"){v=-u+f.top-r;m=u+o-(f.top+l+r);if(Math.max(v,m)===m)d=\"top\";else d=\"bottom\"}this.picker.addClass(\"datepicker-orient-\"+d);if(d===\"top\")p+=l;else p-=r+parseInt(this.picker.css(\"padding-top\"));this.picker.css({top:p,left:h,zIndex:a})},_allow_update:true,update:function(){if(!this._allow_update)return;var t=this.dates.copy(),n=[],r=false;if(arguments.length){e.each(arguments,e.proxy(function(e,t){if(t instanceof Date)t=this._local_to_utc(t);n.push(t)},this));r=true}else{n=this.isInput?this.element.val():this.element.data(\"date\")||this.element.find(\"input\").val();if(n&&this.o.multidate)n=n.split(this.o.multidateSeparator);else n=[n];delete this.element.data().date}n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this));n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),true);this.dates.replace(n);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);if(r){this.setValue()}else if(n.length){if(String(t)!==String(this.dates))this._trigger(\"changeDate\")}if(!this.dates.length&&t.length)this._trigger(\"clearDate\");this.fill()},fillDow:function(){var e=this.o.weekStart,t=\"<tr>\";if(this.o.calendarWeeks){var n='<th class=\"cw\">&nbsp;</th>';t+=n;this.picker.find(\".datepicker-days thead tr:first-child\").prepend(n)}while(e<this.o.weekStart+7){t+='<th class=\"dow\">'+d[this.o.language].daysMin[e++%7]+\"</th>\"}t+=\"</tr>\";this.picker.find(\".datepicker-days thead\").append(t)},fillMonths:function(){var e=\"\",t=0;while(t<12){e+='<span class=\"month\">'+d[this.o.language].monthsShort[t++]+\"</span>\"}this.picker.find(\".datepicker-months td\").html(e)},setRange:function(t){if(!t||!t.length)delete this.range;else this.range=e.map(t,function(e){return e.valueOf()});this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;if(t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i){n.push(\"old\")}else if(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i){n.push(\"new\")}if(this.focusDate&&t.valueOf()===this.focusDate.valueOf())n.push(\"focused\");if(this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()){n.push(\"today\")}if(this.dates.contains(t)!==-1)n.push(\"active\");if(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){n.push(\"disabled\")}if(this.range){if(t>this.range[0]&&t<this.range[this.range.length-1]){n.push(\"range\")}if(e.inArray(t.valueOf(),this.range)!==-1){n.push(\"selected\")}}return n},fill:function(){var n=new Date(this.viewDate),i=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=d[this.o.language].today||d[\"en\"].today||\"\",c=d[this.o.language].clear||d[\"en\"].clear||\"\",h;this.picker.find(\".datepicker-days thead th.datepicker-switch\").text(d[this.o.language].months[s]+\" \"+i);this.picker.find(\"tfoot th.today\").text(l).toggle(this.o.todayBtn!==false);this.picker.find(\"tfoot th.clear\").text(c).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var p=r(i,s-1,28),m=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m);p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42);g=g.valueOf();var y=[];var b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push(\"<tr>\");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(7+4-w.getUTCDay())%7*864e5),S=new Date(Number(S=r(E.getUTCFullYear(),0,1))+(7+4-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class=\"cw\">'+x+\"</td>\")}}b=this.getClassNames(p);b.push(\"day\");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));if(T===t)T={};else if(typeof T===\"boolean\")T={enabled:T};else if(typeof T===\"string\")T={classes:T};if(T.enabled===false)b.push(\"disabled\");if(T.classes)b=b.concat(T.classes.split(/\\s+/));if(T.tooltip)h=T.tooltip}b=e.unique(b);y.push('<td class=\"'+b.join(\" \")+'\"'+(h?' title=\"'+h+'\"':\"\")+\">\"+p.getUTCDate()+\"</td>\");if(p.getUTCDay()===this.o.weekEnd){y.push(\"</tr>\")}p.setUTCDate(p.getUTCDate()+1)}this.picker.find(\".datepicker-days tbody\").empty().append(y.join(\"\"));var N=this.picker.find(\".datepicker-months\").find(\"th:eq(1)\").text(i).end().find(\"span\").removeClass(\"active\");e.each(this.dates,function(e,t){if(t.getUTCFullYear()===i)N.eq(t.getUTCMonth()).addClass(\"active\")});if(i<o||i>a){N.addClass(\"disabled\")}if(i===o){N.slice(0,u).addClass(\"disabled\")}if(i===a){N.slice(f+1).addClass(\"disabled\")}y=\"\";i=parseInt(i/10,10)*10;var C=this.picker.find(\".datepicker-years\").find(\"th:eq(1)\").text(i+\"-\"+(i+9)).end().find(\"td\");i-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++){L=[\"year\"];if(A===-1)L.push(\"old\");else if(A===10)L.push(\"new\");if(e.inArray(i,k)!==-1)L.push(\"active\");if(i<o||i>a)L.push(\"disabled\");y+='<span class=\"'+L.join(\" \")+'\">'+i+\"</span>\";i+=1}C.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()){this.picker.find(\".prev\").css({visibility:\"hidden\"})}else{this.picker.find(\".prev\").css({visibility:\"visible\"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()){this.picker.find(\".next\").css({visibility:\"hidden\"})}else{this.picker.find(\".next\").css({visibility:\"visible\"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()){this.picker.find(\".prev\").css({visibility:\"hidden\"})}else{this.picker.find(\".prev\").css({visibility:\"visible\"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()){this.picker.find(\".next\").css({visibility:\"hidden\"})}else{this.picker.find(\".next\").css({visibility:\"visible\"})}break}},click:function(t){t.preventDefault();t.stopPropagation();var n=e(t.target).closest(\"span, td, th\"),i,s,o;if(n.length===1){switch(n[0].nodeName.toLowerCase()){case\"th\":switch(n[0].className){case\"datepicker-switch\":this.showMode(1);break;case\"prev\":case\"next\":var u=v.modes[this.viewMode].navStep*(n[0].className===\"prev\"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u);this._trigger(\"changeMonth\",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u);if(this.viewMode===1)this._trigger(\"changeYear\",this.viewDate);break}this.fill();break;case\"today\":var a=new Date;a=r(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);this.showMode(-2);var f=this.o.todayBtn===\"linked\"?null:\"view\";this._setDate(a,f);break;case\"clear\":var l;if(this.isInput)l=this.element;else if(this.component)l=this.element.find(\"input\");if(l)l.val(\"\").change();this.update();this._trigger(\"changeDate\");if(this.o.autoclose)this.hide();break}break;case\"span\":if(!n.is(\".disabled\")){this.viewDate.setUTCDate(1);if(n.is(\".month\")){o=1;s=n.parent().find(\"span\").index(n);i=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(s);this._trigger(\"changeMonth\",this.viewDate);if(this.o.minViewMode===1){this._setDate(r(i,s,o))}}else{o=1;s=0;i=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(i);this._trigger(\"changeYear\",this.viewDate);if(this.o.minViewMode===2){this._setDate(r(i,s,o))}}this.showMode(-1);this.fill()}break;case\"td\":if(n.is(\".day\")&&!n.is(\".disabled\")){o=parseInt(n.text(),10)||1;i=this.viewDate.getUTCFullYear();s=this.viewDate.getUTCMonth();if(n.is(\".old\")){if(s===0){s=11;i-=1}else{s-=1}}else if(n.is(\".new\")){if(s===11){s=0;i+=1}else{s+=1}}this._setDate(r(i,s,o))}break}}if(this.picker.is(\":visible\")&&this._focused_from){e(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(!e){this.dates.clear()}else if(t!==-1){this.dates.remove(t)}else{this.dates.push(e)}if(typeof this.o.multidate===\"number\")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){if(!t||t===\"date\")this._toggle_multidate(e&&new Date(e));if(!t||t===\"view\")this.viewDate=e&&new Date(e);this.fill();this.setValue();this._trigger(\"changeDate\");var n;if(this.isInput){n=this.element}else if(this.component){n=this.element.find(\"input\")}if(n){n.change()}if(this.o.autoclose&&(!t||t===\"date\")){this.hide()}},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u};u=s+n;r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth();r.setUTCDate(i);a=function(){return u!==r.getUTCMonth()}}while(a()){r.setUTCDate(--i);r.setUTCMonth(u)}return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(\":not(:visible)\")){if(e.keyCode===27)this.show();return}var t=false,n,r,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1;if(e.ctrlKey){r=this.moveYear(this.dates.get(-1)||i(),n);s=this.moveYear(o,n);this._trigger(\"changeYear\",this.viewDate)}else if(e.shiftKey){r=this.moveMonth(this.dates.get(-1)||i(),n);s=this.moveMonth(o,n);this._trigger(\"changeMonth\",this.viewDate)}else{r=new Date(this.dates.get(-1)||i());r.setUTCDate(r.getUTCDate()+n);s=new Date(o);s.setUTCDate(o.getUTCDate()+n)}if(this.dateWithinRange(r)){this.focusDate=this.viewDate=s;this.setValue();this.fill();e.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1;if(e.ctrlKey){r=this.moveYear(this.dates.get(-1)||i(),n);s=this.moveYear(o,n);this._trigger(\"changeYear\",this.viewDate)}else if(e.shiftKey){r=this.moveMonth(this.dates.get(-1)||i(),n);s=this.moveMonth(o,n);this._trigger(\"changeMonth\",this.viewDate)}else{r=new Date(this.dates.get(-1)||i());r.setUTCDate(r.getUTCDate()+n*7);s=new Date(o);s.setUTCDate(o.getUTCDate()+n*7)}if(this.dateWithinRange(r)){this.focusDate=this.viewDate=s;this.setValue();this.fill();e.preventDefault()}break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(o);t=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(\":visible\")){e.preventDefault();if(this.o.autoclose)this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(t){if(this.dates.length)this._trigger(\"changeDate\");else this._trigger(\"clearDate\");var u;if(this.isInput){u=this.element}else if(this.component){u=this.element.find(\"input\")}if(u){u.change()}}},showMode:function(e){if(e){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(\">div\").hide().filter(\".datepicker-\"+v.modes[this.viewMode].clsName).css(\"display\",\"block\");this.updateNavArrows()}};var a=function(t,n){this.element=e(t);this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e});delete n.inputs;e(this.inputs).datepicker(n).bind(\"changeDate\",e.proxy(this.dateUpdated,this));this.pickers=e.map(this.inputs,function(t){return e(t).data(\"datepicker\")});this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=true;var n=e(t.target).data(\"datepicker\"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){if(!t.getUTCDate())t.setUTCDate(r)});if(r<this.dates[i]){while(i>=0&&r<this.dates[i]){this.pickers[i--].setUTCDate(r)}}else if(r>this.dates[i]){while(i<s&&r>this.dates[i]){this.pickers[i++].setUTCDate(r)}}this.updateDates();delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()});delete this.element.data().datepicker}};var c=e.fn.datepicker;e.fn.datepicker=function(n){var r=Array.apply(null,arguments);r.shift();var i;this.each(function(){var s=e(this),o=s.data(\"datepicker\"),c=typeof n===\"object\"&&n;if(!o){var p=f(this,\"date\"),d=e.extend({},h,p,c),v=l(d.language),m=e.extend({},h,v,p,c);if(s.is(\".input-daterange\")||m.inputs){var g={inputs:m.inputs||s.find(\"input\").toArray()};s.data(\"datepicker\",o=new a(this,e.extend(m,g)))}else{s.data(\"datepicker\",o=new u(this,m))}}if(typeof n===\"string\"&&typeof o[n]===\"function\"){i=o[n].apply(o,r);if(i!==t)return false}});if(i!==t)return i;else return this};var h=e.fn.datepicker.defaults={autoclose:false,beforeShowDay:e.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:\"mm/dd/yyyy\",keyboardNavigation:true,language:\"en\",minViewMode:0,multidate:false,multidateSeparator:\",\",orientation:\"auto\",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var p=e.fn.datepicker.locale_opts=[\"format\",\"rtl\",\"weekStart\"];e.fn.datepicker.Constructor=u;var d=e.fn.datepicker.dates={en:{days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"],daysShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],daysMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\",\"Su\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthsShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],today:\"Today\",clear:\"Clear\"}};var v={modes:[{clsName:\"days\",navFnc:\"Month\",navStep:1},{clsName:\"months\",navFnc:\"FullYear\",navStep:1},{clsName:\"years\",navFnc:\"FullYear\",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,\"\\0\").split(\"\\0\"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0){throw new Error(\"Invalid date format.\")}return{separators:t,parts:n}},parseDate:function(n,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;if(typeof i===\"string\")i=v.parseFormat(i);var o=/([\\-+]\\d+)([dmwy])/,a=n.match(/([\\-+]\\d+)([dmwy])/g),f,l,c;if(/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(n)){n=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]);l=parseInt(f[1]);switch(f[2]){case\"d\":n.setUTCDate(n.getUTCDate()+l);break;case\"m\":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case\"w\":n.setUTCDate(n.getUTCDate()+l*7);break;case\"y\":n=u.prototype.moveYear.call(u.prototype,n,l);break}}return r(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}a=n&&n.match(this.nonpunctuation)||[];n=new Date;var h={},p=[\"yyyy\",\"yy\",\"M\",\"MM\",\"m\",\"mm\",\"d\",\"dd\"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;m[\"M\"]=m[\"MM\"]=m[\"mm\"]=m[\"m\"];m[\"dd\"]=m[\"d\"];n=r(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=i.parts.slice();if(a.length!==b.length){b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray()}if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10);f=b[c];if(isNaN(g)){switch(f){case\"MM\":y=e(d[s].months).filter(w);g=e.inArray(y[0],d[s].months)+1;break;case\"M\":y=e(d[s].monthsShort).filter(w);g=e.inArray(y[0],d[s].monthsShort)+1;break}}h[f]=g}var S,x;for(c=0;c<p.length;c++){x=p[c];if(x in h&&!isNaN(h[x])){S=new Date(n);m[x](S,h[x]);if(!isNaN(S))n=S}}}return n},formatDate:function(t,n,r){if(!t)return\"\";if(typeof n===\"string\")n=v.parseFormat(n);var i={d:t.getUTCDate(),D:d[r].daysShort[t.getUTCDay()],DD:d[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[r].monthsShort[t.getUTCMonth()],MM:d[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?\"0\":\"\")+i.d;i.mm=(i.m<10?\"0\":\"\")+i.m;t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++){if(s.length)t.push(s.shift());t.push(i[n.parts[o]])}return t.join(\"\")},headTemplate:\"<thead>\"+\"<tr>\"+'<th class=\"prev\">&laquo;</th>'+'<th colspan=\"5\" class=\"datepicker-switch\"></th>'+'<th class=\"next\">&raquo;</th>'+\"</tr>\"+\"</thead>\",contTemplate:'<tbody><tr><td colspan=\"7\"></td></tr></tbody>',footTemplate:\"<tfoot>\"+\"<tr>\"+'<th colspan=\"7\" class=\"today\"></th>'+\"</tr>\"+\"<tr>\"+'<th colspan=\"7\" class=\"clear\"></th>'+\"</tr>\"+\"</tfoot>\"};v.template='<div class=\"datepicker\">'+'<div class=\"datepicker-days\">'+'<table class=\" table-condensed\">'+v.headTemplate+\"<tbody></tbody>\"+v.footTemplate+\"</table>\"+\"</div>\"+'<div class=\"datepicker-months\">'+'<table class=\"table-condensed\">'+v.headTemplate+v.contTemplate+v.footTemplate+\"</table>\"+\"</div>\"+'<div class=\"datepicker-years\">'+'<table class=\"table-condensed\">'+v.headTemplate+v.contTemplate+v.footTemplate+\"</table>\"+\"</div>\"+\"</div>\";e.fn.datepicker.DPGlobal=v;e.fn.datepicker.noConflict=function(){e.fn.datepicker=c;return this};e(document).on(\"focus.datepicker.data-api click.datepicker.data-api\",'[data-provide=\"datepicker\"]',function(t){var n=e(this);if(n.data(\"datepicker\"))return;t.preventDefault();n.datepicker(\"show\")});e(function(){e('[data-provide=\"datepicker-inline\"]').datepicker()})})(window.jQuery)/**\n * Russian translation for bootstrap-datepicker\n * Victor Taranenko <darwin@snowdale.com>\n */\n;(function($){\n\t$.fn.datepicker.dates['be'] = {\n\t\tdays: [\"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\", \"Нядзеля\"],\n\t\tdaysShort: [\"Ндз\", \"Пнд\", \"Атр\", \"Срд\", \"Чцв\", \"Птн\", \"Суб\", \"Ндз\"],\n\t\tdaysMin: [\"Нд\", \"Пн\", \"Ат\", \"Ср\", \"Чт\", \"Пт\", \"Сб\", \"Нд\"],\n\t\tmonths: [\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Травень\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],\n\t\tmonthsShort: [\"Стд\", \"Лют\", \"Сак\", \"Крс\", \"Трв\", \"Чэр\", \"Ліп\", \"Жнв\", \"Вер\", \"Кас\", \"Ліс\", \"Снж\"],\n\t\ttoday: \"Cёння\",\n\t\tweekStart: 1\n\t};\n}(jQuery));\n\n                    \n                                        $('.datepicker').datepicker({\n                        format: 'dd-mm-yyyy',\n                        language: 'be',\n                        autoclose: true,\n                        todayHighlight: true\n                    });\n                    $('BODY').on('click','#btn-discounts-date',function(){\n                        if ($('#form-control-discounts-date').val() != '') {\n                            //window.location = config.websiteurl + config.cityurl + $('#form-control-discounts-date').val() + '/';\n                            var url = config.originalState;\n                            if (typeof config.discountsdate == 'undefined') {\n                                url = url.replace(config.cityurl,config.cityurl + $('#form-control-discounts-date').val() + '/');\n                            } else {\n                                url = url.replace(config.discountsdate + '/',$('#form-control-discounts-date').val() + '/');\n                            }\n                            window.location = url;\n                        }\n                    });\n                });\n\n                \n                // Подсказка при наведении\n                if (!config.isTouchDevice) {\n                    $('[data-toggle~=\"tooltip\"]').tooltip();\n                }\n\n                                // Timepicker\n                                $.getScript(\"https://gotoshop.by/js/bootstrap-timepicker.js?t=t1411035338\", function(){\n                    $('.timepicker').timepicker({\n                        minuteStep: 5,\n                        showMeridian: false,\n                        showInputs: false,\n                        disableFocus: true\n                    });\n                });\n            });\n\n            \n            \n        })( jQuery );\n    }\n\n            /**\n         * Функция, которая отслеживает клики по исходящим ссылк в Analytics.\n         * Эта функция применяет в качестве аргумента строку с действительным URL, после чего использует ее\n         * как ярлык события. Если указать beacon в качестве метода передачи, данные обращений\n         * будут отправляться с использованием метода navigator.sendBeacon в поддерживающих его браузерах.\n         */\n        var trackOutboundLink = function(url) {\n            ga('send', 'event', 'outbound', 'click', url, {\n                'transport': 'beacon',\n                'hitCallback': function(){window.open(url);}\n            });\n        };\n        /* function isIE () {\n        var myNav = navigator.userAgent.toLowerCase();\n        return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;\n    } */\n\n    /*if (isIE() && isIE() <= 8) {\n        document.getElementById('supported-browsers').style.display = 'block';\n        document.getElementById('wrapper').style.display = 'none';\n    } else {*/\n        (function() {\n            var script = document.createElement(\"script\");\n            /*script.src = \"http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js\";*/\n            script.src = \"//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\";\n            script.onload = script.onreadystatechange = startScripts;\n            script.async = true;\n            document.body.appendChild( script );\n        })()\n    /*}*/\n</script><script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\" async=\"\"></script>\n\n\n<!--<script type=\"text/javascript\">var switchTo5x=true;</script>\n<script type=\"text/javascript\" src=\"http://w.sharethis.com/button/buttons.js\"></script>\n<script type=\"text/javascript\">stLight.options({publisher: \"802df145-6d90-4c5f-ac6d-1648869054b3\", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>-->\n\n\n<div class=\"sidebar-menu-overlay\"></div>\n<div class=\"sidebar sidebar-menu hidden-print\">\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            \n            \n            <div data-loginreload=\"mobileaccountmenu\">\n                                    <div role=\"complementary\" class=\"hidden-print\">\n    <ul class=\"nav\">\n        <li>\n            <a href=\"/account/login/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> Вход            </a>\n        </li>\n        <li class=\"active\">\n            <a href=\"/account/register/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> Регистрация            </a>\n        </li>\n        <li>\n            <a href=\"/account/resetpassword/\">\n                <span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-repeat\" aria-hidden=\"true\"></span> Восстановление пароля            </a>\n        </li>\n    </ul>\n</div>\n                            </div>\n\n            <hr>\n            <div role=\"complementary\" class=\"hidden-print\">\n    <ul class=\"nav\">\n        <li><a href=\"/about/\">О сайте</a></li>\n        <li><a href=\"/about/help/\">Помощь</a></li>\n        <li><a href=\"/about/rules/\">Правила</a></li>\n        <li><a href=\"/contact/\">Связаться с нами</a></li>\n\n                    <li><a href=\"/about/privacypolicy/\">Политика конфиденциальности</a></li>\n        \n        \n                    <li><a href=\"/about/apps/\">Приложения для телефонов</a></li>\n        \n                    <li><a href=\"/subscribe/\">Подписка</a></li>\n            </ul>\n</div>\n        </div>\n    </div>\n\n</div>\n\n\n<div class=\"modal fade\" id=\"alcohol-modal\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>\n                <h4 class=\"modal-title\">Просмотр ассортимента продукции в данном разделе доступен для совершеннолетних лиц</h4>\n            </div>\n            <div class=\"modal-body\">\n                <p>Вам исполнилось 18 лет?</p>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Да</button>\n                <button type=\"button\" class=\"btn btn-primary\">Нет</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n</body>"}
{"link":"gotoshop.by","html":"<head><meta charset=\"utf-8\"><title>Акции и скидки супермаркетов Беларуси</title><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><meta http-equiv=\"x-dns-prefetch-control\" content=\"on\"><meta name=\"description\" content=\"Скидки на продукты, стройматериалы, электронику и бытовую технику, косметику, одежду, товары для детей и др.\"><link rel=\"image_src\" href=\"https://gotoshop.by/img/logo-large.png\"><meta property=\"og:image\" content=\"https://gotoshop.by/img/logo-large.png\"><meta property=\"og:title\" content=\"Акции и скидки супермаркетов Беларуси\"><meta property=\"og:description\" content=\"Скидки на продукты, стройматериалы, электронику и бытовую технику, косметику, одежду, товары для детей и др.\"><link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img/favicon/apple-touch-icon-57x57.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img/favicon/apple-touch-icon-60x60.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img/favicon/apple-touch-icon-72x72.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img/favicon/apple-touch-icon-76x76.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img/favicon/apple-touch-icon-114x114.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img/favicon/apple-touch-icon-120x120.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img/favicon/apple-touch-icon-144x144.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img/favicon/apple-touch-icon-152x152.png?v=gAAb6eWEj8\"><link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img/favicon/apple-touch-icon-180x180.png?v=gAAb6eWEj8\"><link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-32x32.png?v=gAAb6eWEj8\" sizes=\"32x32\"><link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/android-chrome-192x192.png?v=gAAb6eWEj8\" sizes=\"192x192\"><link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-96x96.png?v=gAAb6eWEj8\" sizes=\"96x96\"><link rel=\"icon\" type=\"image/png\" href=\"/img/favicon/favicon-16x16.png?v=gAAb6eWEj8\" sizes=\"16x16\"><link rel=\"manifest\" href=\"/img/favicon/manifest.json?v=gAAb6eWEj8\"><link rel=\"mask-icon\" href=\"/img/favicon/safari-pinned-tab.svg?v=gAAb6eWEj8\" color=\"#72b728\"><link rel=\"shortcut icon\" href=\"/img/favicon/favicon.ico?v=gAAb6eWEj8\"><meta name=\"apple-mobile-web-app-title\" content=\"GoToShop\"><meta name=\"application-name\" content=\"GoToShop\"><meta name=\"msapplication-TileColor\" content=\"#72b728\"><meta name=\"msapplication-TileImage\" content=\"/img/favicon/mstile-144x144.png?v=gAAb6eWEj8\"><meta name=\"msapplication-config\" content=\"/img/favicon/browserconfig.xml?v=gAAb6eWEj8\"><meta name=\"theme-color\" content=\"#72b728\"><meta name=\"p:domain_verify\" content=\"7f99cfbb82c461c852ad42d25958602c\"><link href=\"https://gotoshop.by/css/style.css?t=t1492694705\" rel=\"stylesheet\"><script src=\"https://pagead2.googlesyndication.com/pub-config/r20160913/ca-pub-4948808761837166.js\"></script><script async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script async=\"\" src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script></head><body class=\"index-page\"><script>(adsbygoogle=window.adsbygoogle || []).push({google_ad_client: \"ca-pub-4948808761837166\",enable_page_level_ads: true});</script><div class=\"wrapper\" id=\"wrapper\"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-54943312-1', 'auto');ga('send', 'pageview');</script><header class=\"navbar navbar-inverse hidden-print\" role=\"navigation\"><div class=\"container\"><div class=\"navbar-header\"><button type=\"button\" class=\"navbar-toggle\" data-toggle=\"offcanvas\"><span class=\"sr-only\">Переключить меню</span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span></button><a class=\"navbar-brand visible-xs-inline-block\" rel=\"home\" title=\"GoToShop - Акции и скидки супермаркетов Беларуси\" href=\"/\"><span><img height=\"20\" alt=\"GoToShop - Акции и скидки супермаркетов Беларуси\" src=\"https://gotoshop.by/img/logo-transp.png?1\"></span></a></div><div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"><ul class=\"nav navbar-nav navbar-right\"><li class=\"dropdown account-menu-item\" data-loginreload=\"accountdropdown\"><a href=\"/account/login/\"><span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> Вход </a></li></ul><ul class=\"nav navbar-nav\"><li class=\"dropdown account-menu-item\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"><span class=\"text\">О сайте</span><span class=\"glyphicon glyphicon-menu-down\"></span></a><ul class=\"dropdown-menu\"><li><a href=\"/about/\">О сайте</a></li><li><a href=\"/contact/\">Связаться с нами</a></li><li><a href=\"/?clearcity\">Города</a></li><li><a href=\"/about/privacypolicy/\">Политика конфиденциальности</a></li><li class=\"divider\"></li><li><a href=\"/about/apps/\">Приложения для телефонов</a></li></ul></li></ul></div></div></header><div id=\"header\" class=\"hidden-print hidden-xs\"><div class=\"container\"><div class=\"logo\"><a rel=\"home\" title=\"Акции и скидки супермаркетов Беларуси\" href=\"/\"><img width=\"348\" height=\"60\" alt=\"GoToShop\" src=\"https://gotoshop.by/img/logo.png?1\"><span class=\"tag-line\"> Акции и скидки супермаркетов Беларуси </span></a></div></div></div><div id=\"content\"><div class=\"container\"><div class=\"row content\"><div class=\"col-xs-12\"><h2>Выберите город:</h2><div class=\"row cities-list\"><div class=\"col-xs-12\"><div class=\"row\"><div class=\"col-sm-4\"><ul><li><a title=\"Барановичский район\" href=\"/baranovichi/\"><span class=\"text\">Барановичи</span></a></li><li><a title=\"Бобруйский район\" href=\"/bobrujjsk/\"><span class=\"text\">Бобруйск</span></a></li><li><a title=\"Борисовский район\" href=\"/borisov/\"><span class=\"text\">Борисов</span></a></li><li><a title=\"Брестский район\" href=\"/brest/\"><span class=\"text\">Брест</span></a></li><li><a title=\"Витебский район\" href=\"/vitebsk/\"><span class=\"text\">Витебск</span></a></li><li><a title=\"Гомельский район\" href=\"/gomel/\"><span class=\"text\">Гомель</span></a></li><li><a title=\"Гродненский район\" href=\"/grodno/\"><span class=\"text\">Гродно</span></a></li><li><a title=\"Жлобинский район\" href=\"/zhlobin/\"><span class=\"text\">Жлобин</span></a></li></ul></div><div class=\"col-sm-4\"><ul><li><a title=\"Лидский район\" href=\"/lida/\"><span class=\"text\">Лида</span></a></li><li><a title=\"Минский район\" href=\"/minsk/\"><strong><span class=\"text\">Минск</span></strong></a></li><li><a title=\"Могилевский район\" href=\"/mogilev/\"><span class=\"text\">Могилев</span></a></li><li><a title=\"Мозырский район\" href=\"/mozyr/\"><span class=\"text\">Мозырь</span></a></li><li><a title=\"Молодеченский район\" href=\"/molodechno/\"><span class=\"text\">Молодечно</span></a></li><li><a title=\"Полоцкий район\" href=\"/novopolock/\"><span class=\"text\">Новополоцк</span></a></li><li><a title=\"Оршанский район\" href=\"/orsha/\"><span class=\"text\">Орша</span></a></li><li><a title=\"Пинский район\" href=\"/pinsk/\"><span class=\"text\">Пинск</span></a></li></ul></div><div class=\"col-sm-4\"><ul><li><a title=\"Полоцкий район\" href=\"/polock/\"><span class=\"text\">Полоцк</span></a></li><li><a title=\"Речицкий район\" href=\"/rechica/\"><span class=\"text\">Речица</span></a></li><li><a title=\"Светлогорский район\" href=\"/svetlogorsk/\"><span class=\"text\">Светлогорск</span></a></li><li><a title=\"Солигорский район\" href=\"/soligorsk/\"><span class=\"text\">Солигорск</span></a></li></ul></div></div></div><div class=\"col-xs-12\"><p><a class=\"more-link\" href=\"/cities/\">больше городов</a></p></div><div class=\"col-xs-12\"><div class=\"hidden-print\"><div class=\"ads ads-bottom\" style=\"visibility:visible!important;display:block!important;\"><div class=\"ads-item\"><ins class=\"adsbygoogle\" style=\"display: block; height: 60px;\" data-ad-client=\"ca-pub-4948808761837166\" data-ad-slot=\"3938945330\" data-ad-format=\"auto\" data-adsbygoogle-status=\"done\"><ins id=\"aswift_1_expand\" style=\"display:inline-table;border:none;height:60px;margin:0;padding:0;position:relative;visibility:visible;width:721px;background-color:transparent\"><ins id=\"aswift_1_anchor\" style=\"display:block;border:none;height:60px;margin:0;padding:0;position:relative;visibility:visible;width:721px;background-color:transparent\"><iframe width=\"721\" height=\"60\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" vspace=\"0\" hspace=\"0\" allowtransparency=\"true\" scrolling=\"no\" allowfullscreen=\"true\" onload=\"var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}\" id=\"aswift_1\" name=\"aswift_1\" style=\"left:0;position:absolute;top:0;\"></iframe></ins></ins></ins><script>(adsbygoogle=window.adsbygoogle || []).push({});</script></div></div></div></div></div></div><div class=\"ads\"></div></div></div></div><div class=\"welcome-text\"><div class=\"container\"></div></div><footer class=\"hidden-print\"><div class=\"container\"><ul class=\"menu\"><li><a href=\"/about/\">О сайте</a></li><li>|</li><li><a href=\"/contact/\">Связаться с нами</a></li><li>|</li><li><a href=\"/about/apps/\">Приложения для телефонов</a></li></ul><p>©2017 GoToShop.by - акции и скидки супермаркетов Беларуси. Все права защищены.</p></div></footer></div><script type=\"text/javascript\"> var config={websiteurl: 'https://gotoshop.by', originaltitle: document.title, country: 'Belarus', mapZoom: 12, mapsScriptUrl: 'https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCpcSITwX5lqVY48omDLAWFMcTnQ-9AZ7w', countryLat: '49.397535', countryLng: '31.365991', originalState: window.location.href, userId:0, user:{id:0, username:'', email:'', admin:0}, notesCookieName: \"notes_\", favShopsCookieName: \"favshops_\", have18age: -1, isTouchDevice: (true==(\"ontouchstart\" in window || window.DocumentTouch && document instanceof DocumentTouch)), isISO: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream), browserTabActive: true, mousePressedDown: false, lang: 'be', money: '', disableAjax: false, categoriesDropdown: false, commentsguest: true, dateformaturl: 'd-m-Y', adsensePopupRight: '<ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4948808761837166\" data-ad-slot=\"9575827732\" data-ad-format=\"auto\"></ins>', adsensePopupLeft: '<ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4948808761837166\" data-ad-slot=\"3734584132\" data-ad-format=\"auto\"></ins>'};var scriptsStarted=false;function startScripts(){if (typeof jQuery=='undefined' || scriptsStarted==true){return;}scriptsStarted=true;jQuery.noConflict();(function( $ ){if (config.websiteurl.search(\"https://gotoshop\"+\".\"+\"by\")==-1){$('html').remove();}$('.discounts-carousel ul').width( ($('.discounts-carousel ul li').length * 459) );$('BODY').on('mouseup',function(e){config.mousePressedDown=false;});$('.disable-all-ajax-on-submit').on('submit',function(){config.disableAjax=true;});function isJsonString(str){try{JSON.parse(str);}catch (e){return false;}return true;}var showMessagePopup=function(type,message,title){var popupId='message-popup';var popup=$('#'+popupId);if (!popup.length){var popupHTML='';popupHTML+='<div class=\"modal-fixed\" id=\"'+popupId+ '\" tabindex=\"-1\" style=\"display:none;\">';popupHTML+='<div class=\"message-body\"></div>';popupHTML+='</div>';$('BODY').append(popupHTML);popup=$('#'+popupId);}if (type=='error'){$('.message-body',popup).html('<p class=\"alert alert-danger text-center\">'+message+'</p>');}else{$('.message-body',popup).html('<p class=\"alert alert-info text-center\">'+message+'</p>');}$(popup).show();setTimeout(function(){$(popup).hide();},5000);};var c=new Image();c.onload=function(){$(\".loader-bottom .loader-icon\").css(\"background-image\", \"url(https://gotoshop.by/img/ajax-loader-form-control.gif?t=t1411028826)\");$(\".loader-bottom\").remove();};c.src=\"https://gotoshop.by/img/ajax-loader-form-control.gif?t=t1411028826\";$('BODY').on('click','.dropdown-discounts-date .discounts-date-selector, .datepicker.dropdown-menu',function(e){e.stopPropagation();});$('body').on('click','.btn',function(){if ($(this).attr('data-loading-text')){$(this).button('loading');}});$('BODY').on('click','.share-links .share-link',function(e){var shareUrl=config.originalState;var shareTitle=$('meta[property=\"og:title\"]',document).attr('content');var shareDesc=$('meta[property=\"og:description\"]',document).attr('content');var shareImage=$('meta[property=\"og:image\"]',document).attr('content');var url=$(this).attr('href');url=url.replace('{url}',shareUrl);url=url.replace('{description}',shareDesc);url=url.replace('{title}',shareTitle);url=url.replace('{image}',shareImage);if (typeof ga !=='undefined'){ga('send', 'event', 'outbound', 'sharewebsite', url,{'transport': 'beacon'});}window.open(url);e.preventDefault();e.stopPropagation();});if (config.isTouchDevice){$.getScript(\"https://gotoshop.by/js/jquery.mobile.js?t=t1490128380\", function(){$.getScript(\"https://gotoshop.by/js/touch-device.js?t=t1490128380\");});}else{$('BODY').on('click','[data-toggle=\"offcanvas\"]',function (){$('BODY').toggleClass('sidebar-menu-open');});$('BODY').on('click','.sidebar-menu-overlay',function (){$('BODY').toggleClass('sidebar-menu-open');});}var isPopupShowed=function(){return $('.modal.product:visible').length;};var getVisiblePopupObj=function(){var currentItemId=$('.modal.product:visible').attr('data-id');var currentItem=$('.item[data-id='+currentItemId+']');return currentItem.data('popup');};window.onpopstate=function(e){if ($('BODY').hasClass('sidebar-menu-open')){$('BODY').removeClass('sidebar-menu-open');}if (window.history.state !=null && window.history.state.sidebarmenu !=null){$('BODY').addClass('sidebar-menu-open');}if (e.state !=null && e.state.productId !=null){var el=$('.item[data-id=\"'+e.state.productId+'\"] .'+e.state.className);el.attr('disablepushstate','1');el.click();}else{if ($('BODY').hasClass('modal-open')){if (isPopupShowed()){var currentPopup=getVisiblePopupObj();currentPopup.hide();}if (e.state !=null && typeof e.state.scrollTop !='undefined' && e.state.scrollTop !=null){window.scrollTo(0,e.state.scrollTop);}}}};$(window).on(\"blur focus\", function(e){var prevType=$(this).data(\"prevType\");if (prevType !=e.type){switch (e.type){case \"blur\": config.browserTabActive=false;break;case \"focus\": config.browserTabActive=true;break;}}$(this).data(\"prevType\", e.type);});jQuery.fn.sortElements=(function(){var sort=[].sort;return function(comparator, getSortable){getSortable=getSortable || function(){return this;};var placements=this.map(function(){var sortElement=getSortable.call(this), parentNode=sortElement.parentNode, nextSibling=parentNode.insertBefore( document.createTextNode(''), sortElement.nextSibling );return function(){if (parentNode===this){throw new Error( \"You can't sort elements if any one is a descendant of another.\" );}parentNode.insertBefore(this, nextSibling);parentNode.removeChild(nextSibling);};});return sort.call(this, comparator).each(function(i){placements[i].call(getSortable.call(this));});};})();$('.btn-group-search').each(function(){var activeItem=$('.dropdown-menu.inner .active',this);if (activeItem.length){var button=$('.btn',this);var buttonText=$('.text',button);buttonText.text($('.text',activeItem).text());}});$('BODY').on('click','.fixed-tabs .close',function(){if ($(this).parents('.choose-shops').length){$(\".choose-shops\").hide();}else{$('.overlay').remove();var li=$(this).parents(\"li.active-tab\");var a=$('.tab-link',li);var t=$(a).attr(\"href\");$(li).removeClass(\"active-tab\");$(t).css(\"display\", \"none\");}return false;});$('BODY').on('click','.fixed-tabs .show-tab-link',function (){$(\".overlay\").remove();$(\".fixed-tabs .active-tab .fixed-tabs-content\").css(\"display\", \"none\");$(\".fixed-tabs .active-tab\").removeClass(\"active-tab\");var t=$(this).attr(\"href\");var n=$(this).parents(\"li:first\");if ($(t).is(\":visible\")){$(n).removeClass(\"active-tab\");$(t).css(\"display\", \"none\")}else{$(n).addClass(\"active-tab\");$(t).css(\"display\", \"block\");$(\"body\").append('<div class=\"overlay\"></div>');if ($(\".subscribe-form\").is(':visible')){$(\".subscribe-form [name='email']\").focus();}if ($(\"#contact-form\").is(':visible')){$(\"#contact-form [name='message']\").focus();}}return false});$('BODY').on('click','.fixed-tabs',function (e){e.stopPropagation()});$(\"BODY\").on('click',function (){$(\".fixed-tabs .active-tab .show-tab-link\").click()});$('BODY').on('click','.overlay',function(){$('.fixed-tabs .close').click();});var lastScrollTop=0, backToTopBtn=$(\"#back-to-top\"), backToTopBtnWidth=parseInt(backToTopBtn.width())+5;$(window).scroll(function (){var st=$(this).scrollTop();if (st > 100){if (st > lastScrollTop){backToTopBtn.css('right','-'+backToTopBtnWidth+'px');}else{backToTopBtn.css('right','20px');}}else{backToTopBtn.css('right','-'+backToTopBtnWidth+'px');}if (st > 100){if (st > lastScrollTop){$(\".fixed-tabs\").css(\"left\", \"-100px\");}else{$(\".fixed-tabs\").css(\"left\", \"0\");}}else{$(\".fixed-tabs\").css(\"left\", \"-100px\");}lastScrollTop=st;});$(document).keyup(function(e){if (e.keyCode==27){$('.fixed-tabs .active-tab .close').click();}});$('BODY').on('click','.choose-shops .check-all',function (){var ct=$(this).parents('.category:first');var cn=(ct.length)?ct:$(this).parents('form');var sc=$('input[name=\"shops[]\"]:checked',cn);var s=$('input[name=\"shops[]\"]',cn);s.prop('checked', !(sc.length==s.length));return false;});$('BODY').on('submit','.subscribe-form',function (){var form=this;var url='/subscribe/subscribeProcess/';var data=$(this).serialize();data+='&is_ajax=1';$('.messages',form).remove();$.ajax({type: \"POST\", url: url, cache: false, data: data}).done(function (response){var responseObj=jQuery.parseJSON(response);$('.has-error',form).removeClass('has-error');$('.form-element-errors',form).remove();$('[type=\"submit\"]',form).button('reset');if (responseObj.error==true){$.each(responseObj.messages, function(index, value){var input=$('[name=\"'+index+'\"]',form);input.parents('.form-group:first').addClass('has-error');input.after('<ul class=\"form-element-errors\"><li>'+value+'</li></ul>');});}else{$(form).prepend( '<div class=\"messages\"><p class=\"alert-success\">'+responseObj.messages.success+'</p></div>' );$(form).find(\"input[name='email']\").val(\"\");}});return false;});$(\"a\",backToTopBtn).click(function (){$(\"body,html\").stop().animate({scrollTop: 0}, 800);return false});$('BODY').on('submit','#contact-form',function (e){var url='/contact/contactProcess/';var data=$(this).serialize();data+='&is_ajax=1';$('#contact-form .messages').remove();$.ajax({type: \"POST\", url: url, cache: false, data: data}).done(function( response ){var responseObj=jQuery.parseJSON(response);$('#contact-form .has-error').removeClass('has-error');$('#contact-form .form-element-errors').remove();$('#contact-form [type=\"submit\"]').button('reset');if (responseObj.error==true){$.each(responseObj.messages, function(index, value){var input=$('#contact-form [name=\"'+index+'\"]');input.parents('.form-group:first').addClass('has-error');input.after('<ul class=\"form-element-errors\"><li>'+value+'</li></ul>');});}else{$('#contact-form').prepend( '<div class=\"messages\"><p class=\"alert-success\">'+responseObj.messages.success+'</p></div>' );$('#contact-form').find(\"input[type=text], input[type=email], textarea\").val(\"\");}});e.preventDefault();});$.ajaxSetup({cache: true});$.getScript(\"https://gotoshop.by/js/bootstrap.js?t=t1411035338\", function(){function discountHaveAlcohol(){var img=$('.product[data-havealcohol=\"1\"] .image img, .item[data-havealcohol=\"1\"] .image-link img');if (img.length){if (config.have18age==-1){$('#alcohol-modal').modal('show');config.have18age=true;$('BODY').on('click', '#alcohol-modal .btn-primary', function (){img.attr('src', '');img.css('display', 'block');$('#alcohol-modal').modal('hide');config.have18age=false;});}else if (!config.have18age){img.attr('src', '');img.css('display', 'block');}}}$('BODY').on('click','.checkall',function (e){var checkbox=$(this);var checked=checkbox.is(':checked');var checkboxesName=checkbox.val();$('[name=\"'+checkboxesName+'\"]').prop('checked',checked);e.stopPropagation();});$.getScript(\"https://gotoshop.by/js/jquery.cookie.js?t=t1439187313\", function(){$('.change-lang-menu a.change-lang-link').on('click',function(){var date=new Date();date.setTime(date.getTime()+(365*24*60*60*1000));$.cookie('langmanual',$(this).attr('data-lang'),{path: '/',expires: date});});$('.change-limit-link').on('click',function(e){var newLimit=$(this).attr('rel');var date=new Date();date.setTime(date.getTime()+(365*24*60*60*1000));$.cookie('discounts_pager_limit',newLimit,{path: '/', expires: date});window.location.reload();e.preventDefault();});function noteAfterAdd(btn){btn=$(btn);btn.popover('destroy');var options={content: 'Добавлено в <a href=\"/mynotes/\">Избранное</a>', html: true, template: '<div class=\"popover popover-notes\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"popover-content\"></div></div>', placement: 'bottom'};btn.popover(options);btn.popover('show');setTimeout(function(){btn.popover('destroy');},2000);}function noteAfterDelete(btn){btn=$(btn);btn.popover('destroy');var options={content: 'Удалено из <a href=\"/mynotes/\">Избранное</a>', html: true, template: '<div class=\"popover popover-notes\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"popover-content\"></div></div>', placement: 'bottom'};btn.popover(options);btn.popover('show');setTimeout(function(){btn.popover('destroy');},2000);}function notesProcessResponse(response,a){responseObj=jQuery.parseJSON(response);var productId=$(a).attr('rel');if (responseObj.count){$('.mynotes-count').html(responseObj.count);}var btn=$('.btn-add-note[rel=\"'+productId+'\"]');if (responseObj.status){btn.attr('data-basket','1');btn.attr('data-original-title','Удалить');btn.addClass('active');$('.tooltip .tooltip-inner').text('Удалить');noteAfterAdd(a);}else{btn.attr('data-basket','0');btn.attr('data-original-title','Добавить в избранное');btn.removeClass('active');$('.tooltip .tooltip-inner').text('Добавить в избранное');noteAfterDelete(a);if ($('BODY').hasClass('notes-page')){$('.item[data-id=\"'+productId+'\"]').hide(300,function(){$(this).remove();$(window).resize();});}}}var addNoteNotLoggedIn=function(el){if ($(el).attr('data-basket')=='1'){var currentProducts=$.cookie(config.notesCookieName);var delProductId=parseInt($(el).attr('rel'));var currentProductsArray=currentProducts.split(',');var newProducts='';for (var i=0;i < currentProductsArray.length;i++){var productId=parseInt(currentProductsArray[i]);if (productId !=delProductId){if (newProducts !=''){newProducts+=',';}newProducts+=currentProductsArray[i];}};$.cookie(config.notesCookieName, newProducts,{expires: 999, path: \"/\"});if (newProducts==''){var currentProductsArray=new Array();}else{var currentProductsArray=newProducts.split(',');}$('.mynotes-count').html(currentProductsArray.length);noteAfterDelete(el);if ($('.notes-page').length){window.location=config.websiteurl+'/mynotes/';}else{var btn=$('.btn-add-note[rel=\"'+delProductId+'\"]');btn.attr('data-basket','0');btn.attr('data-original-title','Добавить в избранное');btn.removeClass('active');$('.tooltip .tooltip-inner').text('Добавить в избранное');}}else{var currentProducts=$.cookie(config.notesCookieName);var newProductId=parseInt($(el).attr('rel'));if (currentProducts){currentProducts+=','+newProductId;}else{currentProducts=newProductId;}$.cookie(config.notesCookieName, currentProducts,{expires: 999, path: \"/\"});currentProducts=currentProducts.toString();var currentProductsArray=currentProducts.split(',');$('.mynotes-count').html(currentProductsArray.length);var btn=$('.btn-add-note[rel=\"'+newProductId+'\"]');btn.attr('data-basket','1');btn.attr('data-original-title','Удалить');btn.addClass('active');$('.tooltip .tooltip-inner').text('Удалить');noteAfterAdd(el);}};var addNoteLoggedIn=function(el){var a=el;var productId=parseInt($(el).attr('rel'));if ($(el).attr('data-basket')=='1'){var url='/mynotes/delProcess/';url+='?is_ajax=1';url+='&product_id='+productId;url+='&user_id='+config.userId;var data={product_id: productId, user_id: config.userId, is_ajax: 1};$.ajax({type: \"POST\", url: url, cache: false, data: data}).done(function( response ){notesProcessResponse(response,a);});}else{var url='/mynotes/addProcess/';url+='?is_ajax=1';url+='&product_id='+productId;url+='&user_id='+config.userId;var data={product_id: productId, user_id: config.userId, is_ajax: 1};$.ajax({type: \"POST\", url: url, cache: false, data: data}).done(function( response ){notesProcessResponse(response,a);});}};$('BODY').on('click','.btn-add-note',function(e){if (config.userId==0){addNoteNotLoggedIn(this);}else{addNoteLoggedIn(this);}e.preventDefault();e.stopPropagation();});$('BODY').on('click',function(e){$('.btn-add-note').popover('destroy');});if (config.userId==0){var currentProducts=$.cookie(config.notesCookieName);if (currentProducts){var currentProductsArray=currentProducts.split(',');$('.mynotes-count').html(currentProductsArray.length);}}$('BODY').on('click','#cities-selector .more-link',function(e){if (config.userId==0){$.cookie('visitorcity', '',{expires: -1, path: \"/\"});}});var loadLoggedInUser=function(){var commentForms=$('.modal.product .add-comment-form');$('.messages', commentForms).remove();var nameFields=$('[name=\"username\"]', commentForms);var emailFields=$('[name=\"email\"]', commentForms);api.get('/apiv2/currentuser/',{}, function (response){if (response.error){if (response.error=='unauthorized'){if (config.userId !=0){nameFields.attr('type', 'hidden');emailFields.attr('type', 'hidden');config.userId=0;config.user.id=0;config.user.username='';config.user.email='';$.ajax({type: \"GET\", url: config.originalState}).done(function (html){$('[data-loginreload]', html).each(function (){$('[data-loginreload=\"'+$(this).attr('data-loginreload')+'\"]').html($(this).html());});});if (typeof window.updateData !='undefined'){window.updateData();}}}else{$(commentForms).prepend('<div class=\"messages\"><p class=\"alert-danger\">'+response.error_description+'</p></div>');}}else{if (config.userId==0){nameFields.attr('type', 'text');emailFields.attr('type', 'text');nameFields.val(response.user.name);emailFields.val(response.user.username);config.userId=response.user.id;config.user.id=response.user.id;config.user.username=response.user.name;config.user.email=response.user.username;$.ajax({type: \"GET\", url: config.originalState}).done(function (html){$('[data-loginreload]', html).each(function (){$('[data-loginreload=\"'+$(this).attr('data-loginreload')+'\"]').html($(this).html());});});if (typeof window.updateData !='undefined'){window.updateData();}}}});};$(window).on('focus', function(){loadLoggedInUser();});$('BODY').on('click','.btn-loginnewwindow',function(e){if (config.userId==0){$(this).button('reset');if (typeof config.loginWindow=='undefined' || config.loginWindow.closed){var url='/account/login/?m=2';config.loginWindow=window.open(url, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');var interval=setInterval(function (){if (config.userId !=0){config.loginWindow.close();}else{loadLoggedInUser();}if (typeof config.loginWindow=='undefined' || config.loginWindow.closed){if (interval){clearInterval(interval);}}}, 1000);}else{config.loginWindow.focus();}e.preventDefault();}});function loadNotesToProductButtons(){if (!config.userId){var currentProducts=$.cookie(config.notesCookieName);if (currentProducts){var currentProductsArray=currentProducts.split(',');for(var i=0;i < currentProductsArray.length;i++){var btn=$('.btn-add-note[rel=\"'+currentProductsArray[i]+'\"]');if (btn.length){btn.attr('data-basket','1');btn.attr('data-original-title','Удалить');btn.addClass('active');$('.tooltip .tooltip-inner').text('Удалить');}}}}}loadNotesToProductButtons();if (!$.cookie(\"subscribe_showed\")){if ($('.fixed-tabs').is(':visible') && $(\".subscribe-form\").length){setTimeout(function (){$(\".fixed-tabs\").css(\"left\", \"12px\");if (!$(\".subscribe-form\").is(\":visible\")){$(\".fixed-tabs .subscribe .show-tab-link\").click()}$.cookie(\"subscribe_showed\", \"1\",{expires: 999, path: \"/\"})}, 15e3)}}var api=new function(){var thisClass=this;thisClass.get=function(url, data, callback){var urlParams='';for(var propertyName in data){urlParams+=(urlParams=='')?'':'&';urlParams+=propertyName+'='+data[propertyName];}if (urlParams !=''){url+='?'+urlParams;}url=config.websiteurl+url;var xhr=$.ajax({type: \"GET\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web');},url: url}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){callback(jqXHR.responseJSON);}else{var data={error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.post=function(url, data, callback){var postData={};for(var propertyName in data){postData[propertyName]=data[propertyName];}url=config.websiteurl+url;var xhr=$.ajax({type: \"POST\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web');},url: url,data: postData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){callback(jqXHR.responseJSON);}else{var data={error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.delete=function(url, data, callback){var deleteData={};for(var propertyName in data){deleteData[propertyName]=data[propertyName];}url+='?'+$.param(deleteData);url=config.websiteurl+url;var xhr=$.ajax({type: 'DELETE',beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web');},url: url,data: deleteData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){callback(jqXHR.responseJSON);}else{var data={error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};thisClass.put=function(url, data, callback){var putData={};for(var propertyName in data){putData[propertyName]=data[propertyName];}url+='?'+$.param(putData);url=config.websiteurl+url;var xhr=$.ajax({type: 'PUT',beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web');},url: url,data: putData}).done(function(data){callback(data);}).fail(function(jqXHR, textStatus){if (jqXHR.responseJSON){callback(jqXHR.responseJSON);}else{var data={error: jqXHR.status,error_description: jqXHR.statusText};callback(data);}});return xhr;};};function shopsSelectorClass(){var tc=this;tc.csel='.choose-shops';tc.ssnsel='.selected-shops-field';tc.sLoaded=false;tc.sFavLoaded=false;tc.chooseShopBtnClick=function(e){var form=$(this).parents('form');var inputShops=$('.selected-shops-field',form);inputShops.attr(\"data-prevvalue\", inputShops.val());var chooseShops=$(tc.csel,form);if (chooseShops.is(\":visible\")){chooseShops.hide();}else{var c=$('.choose-shop-wrap',form);var cityId=$(this).attr('data-cityid');if (!cityId){cityId=config.cityId;}tc.loadShops(c, cityId);chooseShops.show();}e.preventDefault();};tc.cancelBtnClick=function(e){var form=$(this).parents('form');var t=$('.selected-shops-field',form);$(t).val($(t).attr(\"data-prevvalue\"));$(tc.csel).hide();e.preventDefault();};tc.submitBtnClick=function(e){var form=$(this).parents('form');var c=$('.choose-shop-wrap',form);var t=$('.selected-shops-field',c);var sc=$('input[name=\"shops[]\"]:checked',c);var s=$('input[name=\"shops[]\"]',c);var h=$(\".choose-shop-link .selected-shops-name\",c);var r='',r2='';if (sc.length && sc.length < s.length){var n=[];sc.each(function (){n.push($(this).val());r+=(r=='')?'':', ';r+=$(this).attr(\"title\");});var favSIs=tc.getFavShopsIds(c);var diff1=$(favSIs).not(n).get();var diff2=$(n).not(favSIs).get();if (diff1.length==0 && diff2.length==0){$(t).val(\"favorite\");r=\"Выбрать магазины\";r2=\"Любимые магазины\";}else{$(t).val(n);r2=r;}}else{$(t).val(\"all\");r=\"Выбрать магазины\";r2=\"Все магазины\";}h.text(r2);h.attr({\"title\":r,\"data-original-title\":r});$(tc.csel,form).hide();if (!config.isTouchDevice){$('[data-toggle=\"tooltip\"]').tooltip();}e.preventDefault();};tc.getShopsCategoryHTML=function(cI,cN){var shopsHtml='<div class=\"category hidden\" data-id=\"'+cI+'\"><h4>'+cN;shopsHtml+='&nbsp;<small><a href=\"#\" class=\"check-all\">Выбрать все/Отменить все</a></small>';shopsHtml+='</h4><ul>';shopsHtml+='</ul></div>';return shopsHtml;};tc.getShopHTML=function(sI,sN,img50){var shopsHtml='<li>';shopsHtml+='<label for=\"subscribe-shop-'+sI+'\" data-toggle=\"tooltip\" data-original-title=\"'+sN+'\">';shopsHtml+='<input id=\"subscribe-shop-'+sI+'\" name=\"shops[]\" value=\"'+sI+'\" title=\"'+sN+'\" type=\"checkbox\">';shopsHtml+='<span class=\"image\"><img src=\"'+img50+'\" alt=\"\" height=\"50\" width=\"50\"></span>';shopsHtml+='</label>';shopsHtml+='</li>';return shopsHtml;};tc.loadFavoriteShops=function(c,cityId){tc.sFavLoaded=false;var shopsWrap=$('.choose-shops .wrap',c);var url2='/apiv2/favoriteshops/';var data2={city_id: cityId,limit: 999,fields: 'id,name,image50,categories_id'};api.get(url2, data2, function (response2){if (response2.totalCount > 0){var shopsHtml='';for (var key2 in response2.shops){var sI=response2.shops[key2].id;var sN=response2.shops[key2].name;var img50=response2.shops[key2].image50;shopsHtml+=tc.getShopHTML(sI,sN,img50);}$('.category[data-id=\"0\"]', shopsWrap).removeClass('hidden');$('.category[data-id=\"0\"] ul', shopsWrap).html(shopsHtml);}tc.sFavLoaded=true;if (tc.sLoaded){tc.setChecked(c);}});};tc.loadShops=function(c,cityId){var shopsWrap=$('.choose-shops .wrap',c);tc.sLoaded=false;tc.sFavLoaded=false;var url='/apiv2/categories/';var data={city_id: cityId,limit: 999,fields: 'id,name'};shopsWrap.html('').addClass('loader-icon').attr('data-cityid', cityId);api.get(url, data, function (response){if (response.totalCount > 0){shopsWrap.append(tc.getShopsCategoryHTML(0,'Любимые'));var loaded=0;for (var key in response.categories){var cat=response.categories[key];var cI=cat.id;var cN=cat.name;shopsWrap.append(tc.getShopsCategoryHTML(cI,cN));var url2='/apiv2/shops/';var data2={city_id: cityId,category_id: cI,limit: 999,fields: 'id,name,image50,categories_id'};api.get(url2, data2, function (response2){if (response2.totalCount > 0){var shopsHtml='';for (var key2 in response2.shops){var sI=response2.shops[key2].id;var sN=response2.shops[key2].name;var img50=response2.shops[key2].image50;var cI=response2.shops[key2].categories_id;shopsHtml+=tc.getShopHTML(sI,sN,img50);}$('.category[data-id=\"'+cI+'\"]', shopsWrap).removeClass('hidden');$('.category[data-id=\"'+cI+'\"] ul', shopsWrap).html(shopsHtml);}loaded++;if (response.totalCount==loaded){tc.sLoaded=true;tc.loadFavoriteShops(c,cityId);if (tc.sFavLoaded){tc.setChecked(c);}}});}}shopsWrap.removeClass('loader-icon');});};tc.getSelectedShops=function(c){return $(tc.ssnsel,c).val();};tc.getFavShopsIds=function(c){var v=[];$('.category[data-id=\"0\"] [name=\"shops[]\"]',c).each(function(){v.push($(this).val());});return v;};tc.setChecked=function(c){var favSIs=tc.getFavShopsIds(c);for(var i=0;i < favSIs.length;i++){$('.category[data-id!=\"0\"] [name=\"shops[]\"][value=\"'+favSIs[i]+'\"]', c).parents('li:first').remove();}var selS=tc.getSelectedShops(c);if (selS=='all'){$('[name=\"shops[]\"]',c).prop(\"checked\", true);}else if (selS=='favorite'){$('.category[data-id=\"0\"] [name=\"shops[]\"]',c).prop(\"checked\", true);}else{var selSArr=selS.split(',');for(var i=0;i < selSArr.length;i++){$('[name=\"shops[]\"][value=\"'+selSArr[i]+'\"]', c).prop(\"checked\", true);}}};$('BODY').on('click','.choose-shop-link',tc.chooseShopBtnClick);$('BODY').on('click',tc.csel+' .cancel-button',tc.cancelBtnClick);$('BODY').on('click',tc.csel+' .submit-button',tc.submitBtnClick);};var shopsSelector=new shopsSelectorClass();(function( $){$('BODY').on('click','.btn-group-search .form-control',function(e){e.stopPropagation();});$('body').on('click','.btn-group-search .dropdown-menu.inner>li',function(e){if ($(this).hasClass('no-results')){return;}if ($(this).hasClass('disabled')){e.stopPropagation();return;}var btnGroup=$(this).parents('.btn-group-search:first');var id=$(this).attr('rel');var name=$('.text',this).text();var button=$('.btn',btnGroup);var buttonText=$('.text',button);buttonText.text(name);$('li.active',btnGroup).removeClass('active');$(this).addClass('active');if ($(button).attr('data-hiddeninput')){var hiddenInputName=$(button).attr('data-hiddeninput');var hiddenInput=$('[name=\"'+hiddenInputName+'\"]');$(hiddenInput).val(id);$(hiddenInput).attr('data-cityname', name);$(hiddenInput).trigger('change');}});$('BODY').on('click','.btn-group-search .dropdown-toggle',function(){var btnGroup=$(this).parents('.btn-group-search:first');var input=$('.typeahead,.typeahead-api',btnGroup);if (!btnGroup.hasClass('open')){var dropdownMenu=$(this).next('.dropdown-menu');var submenu=$('> .dropdown-menu.inner',dropdownMenu);var windowHeight=$(window).height();var submenuHeight=Math.round(windowHeight/2);if (submenuHeight < 150){submenuHeight=150;}submenu.css('max-height', submenuHeight);dropdownMenu.addClass('open');if (!config.isTouchDevice){setTimeout(function(){input.focus();},0);}}});var xhr;var prevVal;$('BODY').on('keyup cut paste','.typeahead,.typeahead-api',function($e){var specialKeyCodeMap={9: \"tab\",27: \"esc\",37: \"left\",39: \"right\",13: \"enter\",38: \"up\",40: \"down\",16: \"shift\",17: \"ctrl\",18: \"alt\"};if (specialKeyCodeMap[$e.which || $e.keyCode]){return;}var input=$(this);var searchVal=input.val();if (prevVal==searchVal){return;}prevVal=searchVal;if (xhr){xhr.abort();}var minlength=input.attr('data-minlenght');if (minlength){if (searchVal.length > 0 && searchVal.length < minlength){return true;}}var btnGroup=input.parents('.btn-group-search:first');var t=setTimeout(function(){input.addClass('loading');},100);var url=config.websiteurl+input.attr('data-ajax-url');url+='?name='+encodeURIComponent(searchVal);if (input.attr('data-ajax-type')){url+='&type='+input.attr('data-ajax-type');}if (input.attr('data-ajax-cityid')){url+='&city_id='+input.attr('data-ajax-cityid');}if (input.attr('data-ajax-userid')){url+='&user_id='+input.attr('data-ajax-userid');}if (input.attr('data-ajax-all')){url+='&all='+input.attr('data-ajax-all');}if (input.attr('data-params')){var params=input.attr('data-params');var paramsArray=params.split('&');for(var i=0;i < paramsArray.length;i++){var paramArray=paramsArray[i].split('=');var param=paramArray[0];var val=paramArray[1];if (param=='parent' && searchVal.length > 0){continue;}url+='&'+param+'='+val;}}var showCheckboxes=(input.attr('data-checkboxes')=='1');xhr=$.ajax({type: \"GET\",beforeSend: function (request){request.setRequestHeader(\"Platform\", 'Web');},url: url}).done(function( response){var dropdownContainer=$('.dropdown-menu.inner',btnGroup);if (response.pcategories){if (response.totalCount > 0){var btnTextObj=$('.btn .text',btnGroup);var selectedCategoriesIdsStr=$(btnTextObj).attr('data-ids');var selectedCategoriesIds=[];if (selectedCategoriesIdsStr){selectedCategoriesIds=selectedCategoriesIdsStr.split(',')}var itemsHTML=config.categoriesDropdown.getItemsHTML(response.pcategories, showCheckboxes, selectedCategoriesIds, searchVal);dropdownContainer.html(itemsHTML);}else{dropdownContainer.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}}else if (response.users){if (response.totalCount > 0){var userIdInput=$('[name=\"users_id\"]');var itemsHTML='';for (var i=0;i < response.users.length;i++){var user=response.users[i];var itemHTML='';var itemClass='';itemHTML+='<li'+((itemClass=='')?'':' class=\"'+itemClass+'\"')+ ' rel=\"'+user.id+'\">';itemHTML+='<a href=\"javascript:;\" title=\"'+user.email+'\">';itemHTML+='<span class=\"text\">';itemHTML+=user.username;itemHTML+='<br/><small>'+user.email+'</small>';itemHTML+='</span>';itemHTML+='</a>';itemHTML+='</li>';itemsHTML+=itemHTML;}dropdownContainer.html(itemsHTML);}else{dropdownContainer.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}}else{dropdownContainer.html(response);}clearTimeout(t);input.removeClass('loading');if (!config.isTouchDevice){$('[data-toggle=\"tooltip\"]').tooltip();}});});$('BODY').on('click','.btn-group-search.btn-search-categories .dropdown-toggle',function(){var btnGroup=$(this).parents('.btn-group-search:first');var input=$('.typeahead-api',btnGroup);prevVal=-1;if ($('.dropdown-menu.inner', btnGroup).html()==''){input.trigger('keyup');}});$('.btn-group-search').each(function(){var activeItem=$('.dropdown-menu.inner .active',this);if (activeItem.length){activeItem.trigger('click');}});})( jQuery);(function( $){$('BODY').off('click','.select-tree li');$('BODY').off('click','.select-tree li a');$('BODY').off('click','.select-tree li a span');$('BODY').off('click','.select-tree [type=\"checkbox\"]');$('BODY').on('click','.select-tree li',function(e){e.preventDefault();e.stopPropagation();});$('BODY').on('click','.select-tree li a',function(e){e.preventDefault();e.stopPropagation();});var CategoriesDropdown=function(){this.getCategoriesIdsStr=function(wrapper,productIndex){var categoriesInputs=$('[name^=\"products['+productIndex+'][productcategories]\"]',wrapper);var categoriesIds='';if (categoriesInputs.length){categoriesInputs.each(function(){categoriesIds+=(categoriesIds=='')?'':',';categoriesIds+=$(this).val();});};return categoriesIds;};this.getCategoriesText=function(wrapper,productIndex){var categoriesInputs=$('[name^=\"products['+productIndex+'][productcategories]\"]',wrapper);var categoriesText='';if (categoriesInputs.length){categoriesInputs.each(function(){var text=$(this).attr('data-title');var childrens=$(this).attr('data-child');categoriesText+=(categoriesText=='')?'':', ';if (childrens==0){categoriesText+='<strong>';}categoriesText+=text;if (childrens==0){categoriesText+='</strong>';}});};return categoriesText;};this.getItemsHTML=function(pcategories, showCheckboxes, selectedCategoriesIds, searchText){var itemsHTML='';for (var i=0;i < pcategories.length;i++){var pcategory=pcategories[i];var haveChildrens=(pcategory.childcats && pcategory.childcats.length);var itemHTML='';var itemClass='';var showCheckbox=!(pcategory.children > 0 && !showCheckboxes);if (pcategory.children > 0){itemClass+=(itemClass=='')?'':' ';itemClass+='parent';}if (haveChildrens){itemClass+=(itemClass=='')?'':' ';itemClass+='open';}itemHTML+='<li'+((itemClass=='')?'':' class=\"'+itemClass+'\"')+ '>';itemHTML+='<a href=\"javascript:;\" data-parent=\"'+pcategory.parent+'\" data-id=\"'+pcategory.id+'\" data-child=\"'+pcategory.children+'\">';if (pcategory.children > 0){itemHTML+='<span class=\"glyphicon glyphicon-plus\"></span>';itemHTML+='<span class=\"glyphicon glyphicon-minus\"></span>';}else{if (!showCheckbox){itemHTML+='<span class=\"glyphicon glyphicon-empty\"></span>';}}if (showCheckbox){var checked=(selectedCategoriesIds && (jQuery.inArray(pcategory.id,selectedCategoriesIds)!=-1));itemHTML+='<input'+(checked?' checked=\"checked\"':'')+ ' type=\"checkbox\" value=\"'+pcategory.id+'\" />';}var name=pcategory.name;if (searchText){searchText=(searchText+'').replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:])/g, \"\\\\$1\");name=name.replace( new RegExp( \"(\"+searchText+\")\" , 'gi'), \"<b>$1</b>\");}itemHTML+='<span class=\"text\">'+name+'</span>';itemHTML+='</a>';if (haveChildrens){itemHTML+='<ul class=\"dropdown-menu inner\">';itemHTML+=config.categoriesDropdown.getItemsHTML(pcategory.childcats, showCheckboxes, selectedCategoriesIds, searchText);itemHTML+='</ul>';}itemHTML+='</li>';itemsHTML+=itemHTML;}return itemsHTML;};};config.categoriesDropdown=new CategoriesDropdown;$('BODY').on('click','.select-tree li a span',function(e){var span=$(this);var a=span.parent('a');var li=a.parent('li');var productCategoryId=a.attr('data-id');var children=parseInt(a.attr('data-child'));var productItem=li.parents('.product-item');var wrapper=$(this).parents('.btn-group-search:first');if (children==0){$('[type=\"checkbox\"]',li).click();return false;}var subUl=$('ul',li);if (subUl.length){li.toggleClass('open');return false;}else{li.append('<ul class=\"dropdown-menu inner\"></ul>');li.addClass('open');subUl=$('ul',li);}if (children > 0){var url='/apiv2/pcategories/';var data={};var input=$('input.typeahead-api',wrapper);var params=input.attr('data-params');if (params){var paramsArray=params.split('&');for(var i=0;i < paramsArray.length;i++){var paramArray=paramsArray[i].split('=');var param=paramArray[0];var val=paramArray[1];if (param=='parent'){val=productCategoryId;}data[param]=val;}}var showCheckboxes=(input.attr('data-checkboxes')=='1');subUl.html('<li class=\"loading\"></li>');var btnTextObj=$('.btn .text',wrapper);var selectedCategoriesIdsStr=$(btnTextObj).attr('data-ids');var selectedCategoriesIds=[];if (selectedCategoriesIdsStr){selectedCategoriesIds=selectedCategoriesIdsStr.split(',')}api.get(url, data, function(response){if (response.totalCount > 0){if (response.pcategories){var itemsHTML='';var searchText=false;for (var i=0;i < response.pcategories.length;i++){var pcategory=response.pcategories[i];var itemHTML='';var itemClass='';var showCheckbox=!(pcategory.children > 0 && !showCheckboxes);if (pcategory.children > 0){itemClass+=(itemClass=='')?'':' ';itemClass+='parent';}itemHTML+='<li'+((itemClass=='')?'':' class=\"'+itemClass+'\"')+ '>';itemHTML+='<a href=\"javascript:;\" data-parent=\"'+pcategory.parent+'\" data-id=\"'+pcategory.id+'\" data-child=\"'+pcategory.children+'\">';if (pcategory.children > 0){itemHTML+='<span class=\"glyphicon glyphicon-plus\"></span>';itemHTML+='<span class=\"glyphicon glyphicon-minus\"></span>';}else{if (!showCheckbox){itemHTML+='<span class=\"glyphicon glyphicon-empty\"></span>';}}if (showCheckbox){var checked=(selectedCategoriesIds && (jQuery.inArray(pcategory.id,selectedCategoriesIds)!=-1));itemHTML+='<input'+(checked?' checked=\"checked\"':'')+ ' type=\"checkbox\" value=\"'+pcategory.id+'\" />';}var name=pcategory.name;if (searchText){searchText=(searchText+'').replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:])/g, \"\\\\$1\");name=name.replace( new RegExp( \"(\"+searchText+\")\" , 'gi'), \"<b>$1</b>\");}itemHTML+='<span class=\"text\">'+name+'</span>';itemHTML+='</a>';itemHTML+='</li>';itemsHTML+=itemHTML;}subUl.html(itemsHTML);}}else{subUl.html(\"<li class=\\\"no-results\\\"><a>Ничего не найдено</a></li>\");}});}e.preventDefault();});$('BODY').on('click','.select-tree [type=\"checkbox\"]',function(e){var currentCategoryId=$(this).val();var currentCategoryTitle=$(this).next('.text').text();var a=$(this).parents('a:first');var wrapper=$(this).parents('.btn-group-search:first');var productWrapper=$(this).parents('.product-item:first');if (productWrapper.length){var productIndex=productWrapper.attr('data-product');}else{var productIndex=0;}if ($(this).is(':checked')){$(wrapper).append('<input data-child=\"'+a.attr('data-child')+ '\" data-title=\"'+currentCategoryTitle+'\" type=\"hidden\" value=\"'+currentCategoryId+'\" name=\"products['+productIndex+'][productcategories]['+currentCategoryId+']\">');$('.dropdown-menu-removable',wrapper).append('<span class=\"removable-item\" data-id=\"'+currentCategoryId+'\">'+currentCategoryTitle+' <span class=\"glyphicon glyphicon-remove\" title=\"Удалить\"></span></span>');}else{$('[name=\"products['+productIndex+'][productcategories]['+currentCategoryId+']\"]').remove();$('.dropdown-menu-removable .removable-item[data-id=\"'+currentCategoryId+'\"]').remove();}var categoriesIds=config.categoriesDropdown.getCategoriesIdsStr(wrapper,productIndex);var categoriesText=config.categoriesDropdown.getCategoriesText(wrapper,productIndex);var btnTextObj=$('.btn .text',wrapper);if (categoriesText==''){btnTextObj.text(btnTextObj.attr('data-text'));}else{if (!btnTextObj.attr('data-text')){btnTextObj.attr('data-text',btnTextObj.text());}btnTextObj.html(categoriesText);}btnTextObj.attr('data-ids',categoriesIds);var openTree=false;var li=$(this).parents('li:first');if (li.hasClass('parent')&& !li.hasClass('open')){openTree=true;}if (openTree){$('span',a).click();}e.stopPropagation();});$('BODY').on('click','.removable-item',function(e){e.stopPropagation();});$('BODY').on('click','.removable-item .glyphicon',function(e){var removable=$(this).parents('.removable-item');var wrapper=$(this).parents('.btn-group-search');var productWrapper=$(this).parents('.product-item:first');if (productWrapper.length){var productIndex=productWrapper.attr('data-product');}else{var productIndex=0;}var categoryId=removable.attr('data-id');var checkbox=$('.dropdown-menu.inner [type=\"checkbox\"][value=\"'+categoryId+'\"]',wrapper);if (checkbox.length){checkbox.prop('checked',false);}else{}var categoriesInputs=$('[name^=\"products['+productIndex+'][productcategories]['+categoryId+']\"]');categoriesInputs.remove();removable.remove();var categoriesIds=config.categoriesDropdown.getCategoriesIdsStr(wrapper,productIndex);var categoriesText=config.categoriesDropdown.getCategoriesText(wrapper,productIndex);var btnTextObj=$('.btn .text',wrapper);if (categoriesText==''){btnTextObj.text(btnTextObj.attr('data-text'));}else{if (!btnTextObj.attr('data-text')){btnTextObj.attr('data-text',btnTextObj.text());}btnTextObj.html(categoriesText);}btnTextObj.attr('data-ids',categoriesIds);e.stopPropagation();});$('BODY').on('click','.btn-group-search .btn-filter-discounts-apply',function(e){var currentUrl=location.protocol+'/'+'/'+location.host+location.pathname;var params='';if (config.originalState.indexOf('?')!=-1){var request={};var pairs=config.originalState.substring(config.originalState.indexOf('?')+ 1).split('&');for (var i=0;i < pairs.length;i++){if(!pairs[i])continue;var pair=pairs[i].split('=');request[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]);}delete request['cids'];for (var key in request){params+=(params=='')?'':'&';params+=encodeURIComponent(key);if (request[key] !='undefined'){params+='='+encodeURIComponent(request[key]);}}}var categoriesInputs=$('[name^=\"products[0][productcategories]\"]');var categoriesIds='';if (categoriesInputs.length){var categoryIdsArray=[];categoriesInputs.each(function(){if($.inArray($(this).val(), categoryIdsArray)===-1)categoryIdsArray.push($(this).val());});$(categoryIdsArray).each(function(i,el){categoriesIds+=(categoriesIds=='')?'':',';categoriesIds+=el;});}if (categoriesIds !=''){params+=(params=='')?'':'&';params+='cids='+categoriesIds;}var url=currentUrl;if (params !=''){url+='?'+params;}window.location=url;e.preventDefault();});$('BODY').on('click','.btn-group-search .btn-filter-discounts-clear',function(e){var categoriesInputs=$('[name^=\"products[0][productcategories]\"]');categoriesInputs.remove();var currentUrl=location.protocol+'/'+'/'+location.host+location.pathname;window.location=currentUrl;e.preventDefault();});})( jQuery);(function(e,t){function r(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return r(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp(\"^\"+n.toLowerCase()+\"([A-Z])\");n=new RegExp(\"^\"+n.toLowerCase());for(var a in r)if(n.test(a)){s=a.replace(o,u);i[s]=r[a]}return i}function l(t){var n={};if(!d[t]){t=t.split(\"-\")[0];if(!d[t])return}var r=d[t];e.each(p,function(e,t){if(t in r)n[t]=r[t]});return n}var n=e(window);var o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;if(!e.isArray(t))t=[t];this.clear();this.push.apply(this,t)},clear:function(){this.splice(0)},copy:function(){var e=new o;e.replace(this);return e}};return function(){var n=[];n.push.apply(n,arguments);e.extend(n,t);return n}}();var u=function(t,n){this.dates=new o;this.viewDate=i();this.focusDate=null;this._process_options(n);this.element=e(t);this.isInline=false;this.isInput=this.element.is(\"input\");this.component=this.element.is(\".date\")?this.element.find(\".add-on, .input-group-addon, .btn\"):false;this.hasInput=this.component&&this.element.find(\"input\").length;if(this.component&&this.component.length===0)this.component=false;this.picker=e(v.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass(\"datepicker-inline\").appendTo(this.element)}else{this.picker.addClass(\"datepicker-dropdown dropdown-menu\")}if(this.o.rtl){this.picker.addClass(\"datepicker-rtl\")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find(\"tfoot th.today\").attr(\"colspan\",function(e,t){return parseInt(t)+1});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o);var r=n.language;if(!d[r]){r=r.split(\"-\")[0];if(!d[r])r=h.language}n.language=r;switch(n.startView){case 2:case\"decade\":n.startView=2;break;case 1:case\"year\":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case\"months\":n.minViewMode=1;break;case 2:case\"years\":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode);if(n.multidate!==true){n.multidate=Number(n.multidate)||false;if(n.multidate!==false)n.multidate=Math.max(0,n.multidate);else n.multidate=1}n.multidateSeparator=String(n.multidateSeparator);n.weekStart%=7;n.weekEnd=(n.weekStart+6)%7;var i=v.parseFormat(n.format);if(n.startDate!==-Infinity){if(!!n.startDate){if(n.startDate instanceof Date)n.startDate=this._local_to_utc(this._zero_time(n.startDate));else n.startDate=v.parseDate(n.startDate,i,n.language)}else{n.startDate=-Infinity}}if(n.endDate!==Infinity){if(!!n.endDate){if(n.endDate instanceof Date)n.endDate=this._local_to_utc(this._zero_time(n.endDate));else n.endDate=v.parseDate(n.endDate,i,n.language)}else{n.endDate=Infinity}}n.daysOfWeekDisabled=n.daysOfWeekDisabled||[];if(!e.isArray(n.daysOfWeekDisabled))n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\\s]*/);n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)});n.orientation={x:\"auto\",y:\"auto\"};if(!o||o===\"auto\");else if(s.length===1){switch(s[0]){case\"top\":case\"bottom\":n.orientation.y=s[0];break;case\"left\":case\"right\":n.orientation.x=s[0];break}}else{o=e.grep(s,function(e){return/^left|right$/.test(e)});n.orientation.x=o[0]||\"auto\";o=e.grep(s,function(e){return/^top|bottom$/.test(e)});n.orientation.y=o[0]||\"auto\"}},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++){r=e[n][0];if(e[n].length===2){i=t;s=e[n][1]}else if(e[n].length===3){i=e[n][1];s=e[n][2]}r.on(s,i)}},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++){r=e[n][0];if(e[n].length===2){s=t;i=e[n][1]}else if(e[n].length===3){s=e[n][1];i=e[n][2]}r.off(i,s)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){if(e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find(\"input\"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){if(e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]}else if(this.element.is(\"div\")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}this._events.push([this.element,\"*\",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]);this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{\"mousedown touchstart\":e.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){if(arguments.length===0){e=this.dates.length-1;t=this.o.format}else if(typeof e===\"string\"){t=e;e=this.dates.length-1}t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){if(!this.isInline)this.picker.appendTo(\"body\");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger(\"show\")},hide:function(){if(this.isInline)return;if(!this.picker.is(\":visible\"))return;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find(\"input\").val()))this.setValue();this._trigger(\"hide\")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger(\"changeDate\");this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local));this._trigger(\"changeDate\");this.setValue()},setDate:s(\"setDates\"),setUTCDate:s(\"setUTCDates\"),setValue:function(){var e=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find(\"input\").val(e).change()}}else{this.element.val(e).change()}},getFormattedDate:function(n){if(n===t)n=this.o.format;var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e});this.update();this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var t=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=n.width(),o=n.height(),u=n.scrollTop();var a=parseInt(this.element.parents().filter(function(){return e(this).css(\"z-index\")!==\"auto\"}).first().css(\"z-index\"))+10;var f=this.component?this.component.parent().offset():this.element.offset();var l=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var c=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var h=f.left,p=f.top;this.picker.removeClass(\"datepicker-orient-top datepicker-orient-bottom \"+\"datepicker-orient-right datepicker-orient-left\");if(this.o.orientation.x!==\"auto\"){this.picker.addClass(\"datepicker-orient-\"+this.o.orientation.x);if(this.o.orientation.x===\"right\")h-=t-c}else{this.picker.addClass(\"datepicker-orient-left\");if(f.left<0)h-=f.left-i;else if(f.left+t>s)h=s-t-i}var d=this.o.orientation.y,v,m;if(d===\"auto\"){v=-u+f.top-r;m=u+o-(f.top+l+r);if(Math.max(v,m)===m)d=\"top\";else d=\"bottom\"}this.picker.addClass(\"datepicker-orient-\"+d);if(d===\"top\")p+=l;else p-=r+parseInt(this.picker.css(\"padding-top\"));this.picker.css({top:p,left:h,zIndex:a})},_allow_update:true,update:function(){if(!this._allow_update)return;var t=this.dates.copy(),n=[],r=false;if(arguments.length){e.each(arguments,e.proxy(function(e,t){if(t instanceof Date)t=this._local_to_utc(t);n.push(t)},this));r=true}else{n=this.isInput?this.element.val():this.element.data(\"date\")||this.element.find(\"input\").val();if(n&&this.o.multidate)n=n.split(this.o.multidateSeparator);else n=[n];delete this.element.data().date}n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this));n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),true);this.dates.replace(n);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);if(r){this.setValue()}else if(n.length){if(String(t)!==String(this.dates))this._trigger(\"changeDate\")}if(!this.dates.length&&t.length)this._trigger(\"clearDate\");this.fill()},fillDow:function(){var e=this.o.weekStart,t=\"<tr>\";if(this.o.calendarWeeks){var n='<th class=\"cw\">&nbsp;</th>';t+=n;this.picker.find(\".datepicker-days thead tr:first-child\").prepend(n)}while(e<this.o.weekStart+7){t+='<th class=\"dow\">'+d[this.o.language].daysMin[e++%7]+\"</th>\"}t+=\"</tr>\";this.picker.find(\".datepicker-days thead\").append(t)},fillMonths:function(){var e=\"\",t=0;while(t<12){e+='<span class=\"month\">'+d[this.o.language].monthsShort[t++]+\"</span>\"}this.picker.find(\".datepicker-months td\").html(e)},setRange:function(t){if(!t||!t.length)delete this.range;else this.range=e.map(t,function(e){return e.valueOf()});this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;if(t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i){n.push(\"old\")}else if(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i){n.push(\"new\")}if(this.focusDate&&t.valueOf()===this.focusDate.valueOf())n.push(\"focused\");if(this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()){n.push(\"today\")}if(this.dates.contains(t)!==-1)n.push(\"active\");if(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){n.push(\"disabled\")}if(this.range){if(t>this.range[0]&&t<this.range[this.range.length-1]){n.push(\"range\")}if(e.inArray(t.valueOf(),this.range)!==-1){n.push(\"selected\")}}return n},fill:function(){var n=new Date(this.viewDate),i=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=d[this.o.language].today||d[\"en\"].today||\"\",c=d[this.o.language].clear||d[\"en\"].clear||\"\",h;this.picker.find(\".datepicker-days thead th.datepicker-switch\").text(d[this.o.language].months[s]+\" \"+i);this.picker.find(\"tfoot th.today\").text(l).toggle(this.o.todayBtn!==false);this.picker.find(\"tfoot th.clear\").text(c).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var p=r(i,s-1,28),m=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m);p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42);g=g.valueOf();var y=[];var b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push(\"<tr>\");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(7+4-w.getUTCDay())%7*864e5),S=new Date(Number(S=r(E.getUTCFullYear(),0,1))+(7+4-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class=\"cw\">'+x+\"</td>\")}}b=this.getClassNames(p);b.push(\"day\");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));if(T===t)T={};else if(typeof T===\"boolean\")T={enabled:T};else if(typeof T===\"string\")T={classes:T};if(T.enabled===false)b.push(\"disabled\");if(T.classes)b=b.concat(T.classes.split(/\\s+/));if(T.tooltip)h=T.tooltip}b=e.unique(b);y.push('<td class=\"'+b.join(\" \")+'\"'+(h?' title=\"'+h+'\"':\"\")+\">\"+p.getUTCDate()+\"</td>\");if(p.getUTCDay()===this.o.weekEnd){y.push(\"</tr>\")}p.setUTCDate(p.getUTCDate()+1)}this.picker.find(\".datepicker-days tbody\").empty().append(y.join(\"\"));var N=this.picker.find(\".datepicker-months\").find(\"th:eq(1)\").text(i).end().find(\"span\").removeClass(\"active\");e.each(this.dates,function(e,t){if(t.getUTCFullYear()===i)N.eq(t.getUTCMonth()).addClass(\"active\")});if(i<o||i>a){N.addClass(\"disabled\")}if(i===o){N.slice(0,u).addClass(\"disabled\")}if(i===a){N.slice(f+1).addClass(\"disabled\")}y=\"\";i=parseInt(i/10,10)*10;var C=this.picker.find(\".datepicker-years\").find(\"th:eq(1)\").text(i+\"-\"+(i+9)).end().find(\"td\");i-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++){L=[\"year\"];if(A===-1)L.push(\"old\");else if(A===10)L.push(\"new\");if(e.inArray(i,k)!==-1)L.push(\"active\");if(i<o||i>a)L.push(\"disabled\");y+='<span class=\"'+L.join(\" \")+'\">'+i+\"</span>\";i+=1}C.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()){this.picker.find(\".prev\").css({visibility:\"hidden\"})}else{this.picker.find(\".prev\").css({visibility:\"visible\"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()){this.picker.find(\".next\").css({visibility:\"hidden\"})}else{this.picker.find(\".next\").css({visibility:\"visible\"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()){this.picker.find(\".prev\").css({visibility:\"hidden\"})}else{this.picker.find(\".prev\").css({visibility:\"visible\"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()){this.picker.find(\".next\").css({visibility:\"hidden\"})}else{this.picker.find(\".next\").css({visibility:\"visible\"})}break}},click:function(t){t.preventDefault();t.stopPropagation();var n=e(t.target).closest(\"span, td, th\"),i,s,o;if(n.length===1){switch(n[0].nodeName.toLowerCase()){case\"th\":switch(n[0].className){case\"datepicker-switch\":this.showMode(1);break;case\"prev\":case\"next\":var u=v.modes[this.viewMode].navStep*(n[0].className===\"prev\"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u);this._trigger(\"changeMonth\",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u);if(this.viewMode===1)this._trigger(\"changeYear\",this.viewDate);break}this.fill();break;case\"today\":var a=new Date;a=r(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);this.showMode(-2);var f=this.o.todayBtn===\"linked\"?null:\"view\";this._setDate(a,f);break;case\"clear\":var l;if(this.isInput)l=this.element;else if(this.component)l=this.element.find(\"input\");if(l)l.val(\"\").change();this.update();this._trigger(\"changeDate\");if(this.o.autoclose)this.hide();break}break;case\"span\":if(!n.is(\".disabled\")){this.viewDate.setUTCDate(1);if(n.is(\".month\")){o=1;s=n.parent().find(\"span\").index(n);i=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(s);this._trigger(\"changeMonth\",this.viewDate);if(this.o.minViewMode===1){this._setDate(r(i,s,o))}}else{o=1;s=0;i=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(i);this._trigger(\"changeYear\",this.viewDate);if(this.o.minViewMode===2){this._setDate(r(i,s,o))}}this.showMode(-1);this.fill()}break;case\"td\":if(n.is(\".day\")&&!n.is(\".disabled\")){o=parseInt(n.text(),10)||1;i=this.viewDate.getUTCFullYear();s=this.viewDate.getUTCMonth();if(n.is(\".old\")){if(s===0){s=11;i-=1}else{s-=1}}else if(n.is(\".new\")){if(s===11){s=0;i+=1}else{s+=1}}this._setDate(r(i,s,o))}break}}if(this.picker.is(\":visible\")&&this._focused_from){e(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(!e){this.dates.clear()}else if(t!==-1){this.dates.remove(t)}else{this.dates.push(e)}if(typeof this.o.multidate===\"number\")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){if(!t||t===\"date\")this._toggle_multidate(e&&new Date(e));if(!t||t===\"view\")this.viewDate=e&&new Date(e);this.fill();this.setValue();this._trigger(\"changeDate\");var n;if(this.isInput){n=this.element}else if(this.component){n=this.element.find(\"input\")}if(n){n.change()}if(this.o.autoclose&&(!t||t===\"date\")){this.hide()}},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u};u=s+n;r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth();r.setUTCDate(i);a=function(){return u!==r.getUTCMonth()}}while(a()){r.setUTCDate(--i);r.setUTCMonth(u)}return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(\":not(:visible)\")){if(e.keyCode===27)this.show();return}var t=false,n,r,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1;if(e.ctrlKey){r=this.moveYear(this.dates.get(-1)||i(),n);s=this.moveYear(o,n);this._trigger(\"changeYear\",this.viewDate)}else if(e.shiftKey){r=this.moveMonth(this.dates.get(-1)||i(),n);s=this.moveMonth(o,n);this._trigger(\"changeMonth\",this.viewDate)}else{r=new Date(this.dates.get(-1)||i());r.setUTCDate(r.getUTCDate()+n);s=new Date(o);s.setUTCDate(o.getUTCDate()+n)}if(this.dateWithinRange(r)){this.focusDate=this.viewDate=s;this.setValue();this.fill();e.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1;if(e.ctrlKey){r=this.moveYear(this.dates.get(-1)||i(),n);s=this.moveYear(o,n);this._trigger(\"changeYear\",this.viewDate)}else if(e.shiftKey){r=this.moveMonth(this.dates.get(-1)||i(),n);s=this.moveMonth(o,n);this._trigger(\"changeMonth\",this.viewDate)}else{r=new Date(this.dates.get(-1)||i());r.setUTCDate(r.getUTCDate()+n*7);s=new Date(o);s.setUTCDate(o.getUTCDate()+n*7)}if(this.dateWithinRange(r)){this.focusDate=this.viewDate=s;this.setValue();this.fill();e.preventDefault()}break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(o);t=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(\":visible\")){e.preventDefault();if(this.o.autoclose)this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(t){if(this.dates.length)this._trigger(\"changeDate\");else this._trigger(\"clearDate\");var u;if(this.isInput){u=this.element}else if(this.component){u=this.element.find(\"input\")}if(u){u.change()}}},showMode:function(e){if(e){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(\">div\").hide().filter(\".datepicker-\"+v.modes[this.viewMode].clsName).css(\"display\",\"block\");this.updateNavArrows()}};var a=function(t,n){this.element=e(t);this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e});delete n.inputs;e(this.inputs).datepicker(n).bind(\"changeDate\",e.proxy(this.dateUpdated,this));this.pickers=e.map(this.inputs,function(t){return e(t).data(\"datepicker\")});this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=true;var n=e(t.target).data(\"datepicker\"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){if(!t.getUTCDate())t.setUTCDate(r)});if(r<this.dates[i]){while(i>=0&&r<this.dates[i]){this.pickers[i--].setUTCDate(r)}}else if(r>this.dates[i]){while(i<s&&r>this.dates[i]){this.pickers[i++].setUTCDate(r)}}this.updateDates();delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()});delete this.element.data().datepicker}};var c=e.fn.datepicker;e.fn.datepicker=function(n){var r=Array.apply(null,arguments);r.shift();var i;this.each(function(){var s=e(this),o=s.data(\"datepicker\"),c=typeof n===\"object\"&&n;if(!o){var p=f(this,\"date\"),d=e.extend({},h,p,c),v=l(d.language),m=e.extend({},h,v,p,c);if(s.is(\".input-daterange\")||m.inputs){var g={inputs:m.inputs||s.find(\"input\").toArray()};s.data(\"datepicker\",o=new a(this,e.extend(m,g)))}else{s.data(\"datepicker\",o=new u(this,m))}}if(typeof n===\"string\"&&typeof o[n]===\"function\"){i=o[n].apply(o,r);if(i!==t)return false}});if(i!==t)return i;else return this};var h=e.fn.datepicker.defaults={autoclose:false,beforeShowDay:e.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:\"mm/dd/yyyy\",keyboardNavigation:true,language:\"en\",minViewMode:0,multidate:false,multidateSeparator:\",\",orientation:\"auto\",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var p=e.fn.datepicker.locale_opts=[\"format\",\"rtl\",\"weekStart\"];e.fn.datepicker.Constructor=u;var d=e.fn.datepicker.dates={en:{days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"],daysShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],daysMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\",\"Su\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthsShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],today:\"Today\",clear:\"Clear\"}};var v={modes:[{clsName:\"days\",navFnc:\"Month\",navStep:1},{clsName:\"months\",navFnc:\"FullYear\",navStep:1},{clsName:\"years\",navFnc:\"FullYear\",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,\"\\0\").split(\"\\0\"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0){throw new Error(\"Invalid date format.\")}return{separators:t,parts:n}},parseDate:function(n,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;if(typeof i===\"string\")i=v.parseFormat(i);var o=/([\\-+]\\d+)([dmwy])/,a=n.match(/([\\-+]\\d+)([dmwy])/g),f,l,c;if(/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(n)){n=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]);l=parseInt(f[1]);switch(f[2]){case\"d\":n.setUTCDate(n.getUTCDate()+l);break;case\"m\":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case\"w\":n.setUTCDate(n.getUTCDate()+l*7);break;case\"y\":n=u.prototype.moveYear.call(u.prototype,n,l);break}}return r(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}a=n&&n.match(this.nonpunctuation)||[];n=new Date;var h={},p=[\"yyyy\",\"yy\",\"M\",\"MM\",\"m\",\"mm\",\"d\",\"dd\"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;m[\"M\"]=m[\"MM\"]=m[\"mm\"]=m[\"m\"];m[\"dd\"]=m[\"d\"];n=r(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=i.parts.slice();if(a.length!==b.length){b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray()}if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10);f=b[c];if(isNaN(g)){switch(f){case\"MM\":y=e(d[s].months).filter(w);g=e.inArray(y[0],d[s].months)+1;break;case\"M\":y=e(d[s].monthsShort).filter(w);g=e.inArray(y[0],d[s].monthsShort)+1;break}}h[f]=g}var S,x;for(c=0;c<p.length;c++){x=p[c];if(x in h&&!isNaN(h[x])){S=new Date(n);m[x](S,h[x]);if(!isNaN(S))n=S}}}return n},formatDate:function(t,n,r){if(!t)return\"\";if(typeof n===\"string\")n=v.parseFormat(n);var i={d:t.getUTCDate(),D:d[r].daysShort[t.getUTCDay()],DD:d[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[r].monthsShort[t.getUTCMonth()],MM:d[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?\"0\":\"\")+i.d;i.mm=(i.m<10?\"0\":\"\")+i.m;t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++){if(s.length)t.push(s.shift());t.push(i[n.parts[o]])}return t.join(\"\")},headTemplate:\"<thead>\"+\"<tr>\"+'<th class=\"prev\">&laquo;</th>'+'<th colspan=\"5\" class=\"datepicker-switch\"></th>'+'<th class=\"next\">&raquo;</th>'+\"</tr>\"+\"</thead>\",contTemplate:'<tbody><tr><td colspan=\"7\"></td></tr></tbody>',footTemplate:\"<tfoot>\"+\"<tr>\"+'<th colspan=\"7\" class=\"today\"></th>'+\"</tr>\"+\"<tr>\"+'<th colspan=\"7\" class=\"clear\"></th>'+\"</tr>\"+\"</tfoot>\"};v.template='<div class=\"datepicker\">'+'<div class=\"datepicker-days\">'+'<table class=\" table-condensed\">'+v.headTemplate+\"<tbody></tbody>\"+v.footTemplate+\"</table>\"+\"</div>\"+'<div class=\"datepicker-months\">'+'<table class=\"table-condensed\">'+v.headTemplate+v.contTemplate+v.footTemplate+\"</table>\"+\"</div>\"+'<div class=\"datepicker-years\">'+'<table class=\"table-condensed\">'+v.headTemplate+v.contTemplate+v.footTemplate+\"</table>\"+\"</div>\"+\"</div>\";e.fn.datepicker.DPGlobal=v;e.fn.datepicker.noConflict=function(){e.fn.datepicker=c;return this};e(document).on(\"focus.datepicker.data-api click.datepicker.data-api\",'[data-provide=\"datepicker\"]',function(t){var n=e(this);if(n.data(\"datepicker\"))return;t.preventDefault();n.datepicker(\"show\")});e(function(){e('[data-provide=\"datepicker-inline\"]').datepicker()})})(window.jQuery);(function($){$.fn.datepicker.dates['be']={days: [\"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\", \"Нядзеля\"],daysShort: [\"Ндз\", \"Пнд\", \"Атр\", \"Срд\", \"Чцв\", \"Птн\", \"Суб\", \"Ндз\"],daysMin: [\"Нд\", \"Пн\", \"Ат\", \"Ср\", \"Чт\", \"Пт\", \"Сб\", \"Нд\"],months: [\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Травень\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],monthsShort: [\"Стд\", \"Лют\", \"Сак\", \"Крс\", \"Трв\", \"Чэр\", \"Ліп\", \"Жнв\", \"Вер\", \"Кас\", \"Ліс\", \"Снж\"],today: \"Cёння\",weekStart: 1};}(jQuery));$('.datepicker').datepicker({format: 'dd-mm-yyyy', language: 'be', autoclose: true, todayHighlight: true});$('BODY').on('click','#btn-discounts-date',function(){if ($('#form-control-discounts-date').val() !=''){var url=config.originalState;if (typeof config.discountsdate=='undefined'){url=url.replace(config.cityurl,config.cityurl+$('#form-control-discounts-date').val()+'/');}else{url=url.replace(config.discountsdate+'/',$('#form-control-discounts-date').val()+'/');}window.location=url;}});});if (!config.isTouchDevice){$('[data-toggle~=\"tooltip\"]').tooltip();}$.getScript(\"https://gotoshop.by/js/bootstrap-timepicker.js?t=t1411035338\", function(){$('.timepicker').timepicker({minuteStep: 5, showMeridian: false, showInputs: false, disableFocus: true});});});})( jQuery );}var trackOutboundLink=function(url){ga('send', 'event', 'outbound', 'click', url,{'transport': 'beacon', 'hitCallback': function(){window.open(url);}});};(function(){var script=document.createElement(\"script\");script.src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\";script.onload=script.onreadystatechange=startScripts;script.async=true;document.body.appendChild( script );})() </script><script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\" async=\"\"></script><!--<script type=\"text/javascript\">var switchTo5x=true;</script><script type=\"text/javascript\" src=\"http://w.sharethis.com/button/buttons.js\"></script><script type=\"text/javascript\">stLight.options({publisher: \"802df145-6d90-4c5f-ac6d-1648869054b3\", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>--><div class=\"sidebar-menu-overlay\"></div><div class=\"sidebar sidebar-menu hidden-print\"><div class=\"row\"><div class=\"col-xs-12\"><div data-loginreload=\"mobileaccountmenu\"><div role=\"complementary\" class=\"hidden-print\"><ul class=\"nav\"><li><a href=\"/account/login/\"><span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> Вход </a></li><li><a href=\"/account/register/\"><span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> Регистрация </a></li><li><a href=\"/account/resetpassword/\"><span class=\"plus-icon\"></span><span class=\"glyphicon glyphicon-repeat\" aria-hidden=\"true\"></span> Восстановление пароля </a></li></ul></div></div><hr><div role=\"complementary\" class=\"hidden-print\"><ul class=\"nav\"><li><a href=\"/about/\">О сайте</a></li><li><a href=\"/about/help/\">Помощь</a></li><li><a href=\"/about/rules/\">Правила</a></li><li><a href=\"/contact/\">Связаться с нами</a></li><li><a href=\"/about/privacypolicy/\">Политика конфиденциальности</a></li><li><a href=\"/about/apps/\">Приложения для телефонов</a></li><li><a href=\"/subscribe/\">Подписка</a></li></ul></div></div></div></div><div class=\"modal fade\" id=\"alcohol-modal\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button><h4 class=\"modal-title\">Просмотр ассортимента продукции в данном разделе доступен для совершеннолетних лиц</h4></div><div class=\"modal-body\"><p>Вам исполнилось 18 лет?</p></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Да</button><button type=\"button\" class=\"btn btn-primary\">Нет</button></div></div></div></div><ins class=\"adsbygoogle\" data-adsbygoogle-status=\"done\" style=\"display: none; width: auto; height: auto;\"><ins id=\"aswift_0_expand\" style=\"display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent\"><ins id=\"aswift_0_anchor\" style=\"display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent\"><iframe width=\"0\" height=\"0\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" vspace=\"0\" hspace=\"0\" allowtransparency=\"true\" scrolling=\"no\" allowfullscreen=\"true\" onload=\"var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}\" id=\"aswift_0\" name=\"aswift_0\" style=\"left:0;position:absolute;top:0;\"></iframe></ins></ins></ins></body>"}
