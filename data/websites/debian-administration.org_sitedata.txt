{"link":"debian-administration.org","html":"<head>\n<meta name=\"generator\" content=\"HTML Tidy for Linux (vers 25 March 2009), see www.w3.org\">\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"Content-Language\" content=\"en\">\n<meta name=\"description\" content=\"Tips for a Debian GNU/Linux System Administrator.\">\n<meta name=\"keywords\" content=\"Debian System Administration News, Debian Sysadmin, Linux Administration, Linux Sysadmin, Sysadmin\">\n<meta name=\"copyright\" content=\"(c) 2004-2015 Debian Administration\">\n<meta name=\"author\" content=\"Debian Administration\">\n<meta name=\"robots\" content=\"index,follow\">\n<meta name=\"resource-type\" content=\"document\">\n<meta name=\"classification\" content=\"Personal\">\n<meta name=\"language\" content=\"en\">\n<link rel=\"icon\" href=\"/favicon.ico\">\n<link rel=\"shortcut icon\" href=\"/favicon.ico\">\n<link rel=\"top\" title=\"home\" href=\"/\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/view.css\" media=\"screen\" title=\"Site Layout\">\n<link rel=\"search\" title=\"Search\" href=\"/about/search\">\n<link rel=\"alternate\" title=\"Debian Administration RSS\" href=\"/articles.rdf\" type=\"application/rdf+xml\">\n<link rel=\"alternate\" title=\"Atom\" href=\"/atom.xml\" type=\"application/atom+xml\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<title>Debian Administration - Debian Administration Resources</title>\n<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" type=\"text/css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/jquery.socialshareprivacy.min.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/jquery.autocomplete.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/view.css\" media=\"screen\" title=\"Site Layout\">\n<script async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script type=\"text/javascript\" async=\"\" src=\"//api.flattr.com/js/0.6/load.js?mode=auto\"></script><script type=\"text/javascript\">\n//<![CDATA[\n      (function() {\n      var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];\n      s.type = 'text/javascript';\n      s.async = true;\n      s.src = '//api.flattr.com/js/0.6/load.js?mode=auto';\n      t.parentNode.insertBefore(s, t);\n      })();\n//]]>\n</script>\n<script type=\"text/javascript\">\n//<![CDATA[\n      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n      ga('create', 'UA-80553159-8', 'auto');\n      ga('send', 'pageview');\n\n//]]>\n</script>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js\" type=\"text/javascript\">\n</script>\n<script src=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\" type=\"text/javascript\">\n</script>\n</head>\n<body>\n<div class=\"container-fluid\">\n<div class=\"navbar-header\"><a class=\"navbar-brand pull-left\" href=\"/\"><img height=\"75\" width=\"75\" src=\"/images/logo.png\" alt=\"logo\"></a></div>\n<ul class=\"nav navbar-nav\">\n<li><a href=\"/\">Home</a></li>\n<li><a href=\"/about/Debian%20Administration\">About</a></li>\n<li><a href=\"/archive/\">Archive</a></li>\n<li><a href=\"/about/Contribute\">Contribute</a></li>\n<li><a href=\"/about/FAQ\">FAQ</a></li>\n<li><a href=\"/tag\">Tags</a></li>\n</ul>\n<ul class=\"nav navbar-nav navbar-right\">\n<li style=\"list-style: none; display: inline\">\n<form class=\"navbar-form navbar-left\" role=\"search\" action=\"/search/\" method=\"post\">\n<div class=\"form-group\"><input type=\"hidden\" name=\"mode\" value=\"article_search\"><input type=\"text\" name=\"q\" class=\"form-control\" placeholder=\"Search..\"></div>\n<button type=\"submit\" class=\"btn btn-default\"><span class=\"glyphicon glyphicon-search\">&nbsp;</span></button></form>\n</li>\n<li><a href=\"/create/user\"><span class=\"glyphicon glyphicon-user\">&nbsp;</span> Sign Up</a></li>\n<li><a href=\"/login\"><span class=\"glyphicon glyphicon-log-in\">&nbsp;</span> Login</a></li>\n</ul>\n</div>\n<p>&nbsp;</p>\n<div class=\"container-fluid\">\n<div class=\"row\">\n<div class=\"col-md-2\">\n<p>&nbsp;</p>\n<div id=\"poll\" style=\"margin-left:15px;\">\n<h3><b>Do you use let's encrypt?</b></h3>\n<form method=\"post\" action=\"/polls/167\"><input type=\"hidden\" name=\"poll_id\" value=\"167\"> <label><input type=\"radio\" name=\"pollanswer\" value=\"1\">Yes</label><br>\n<label><input type=\"radio\" name=\"pollanswer\" value=\"2\">No</label><br>\n<label><input type=\"radio\" name=\"pollanswer\" value=\"3\">Huh?</label><br>\n<input type=\"hidden\" name=\"mode\" value=\"poll_vote\"> <input type=\"hidden\" name=\"id\" value=\"167\"> <input type=\"submit\" value=\"Vote\"><br>\n<p class=\"votescast\"><a href=\"/polls/167\">6989 votes ~ 22 comments</a></p>\n</form>\n</div>\n<!-- Flattr -->\n<p>&nbsp;</p>\n<div style=\"text-align:center;\"><iframe src=\"https://button.flattr.com/view/?e=1&amp;url=http%3A%2F%2Fdebian-administration.org%2F&amp;\" class=\"FlattrButton\" width=\"55\" height=\"62\" frameborder=\"0\" scrolling=\"no\" title=\"Flattr\" border=\"0\" marginheight=\"0\" marginwidth=\"0\" allowtransparency=\"true\"></iframe></div>\n</div>\n<div class=\"col-md-8\">\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/727/Installing_the_Go_programming_language_on_Debian_GNU/Linux\">Installing the Go programming language on Debian GNU/Linux</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Thu 15 Dec 2016 at 08:25</div>\n<div class=\"tags\">Tags: <a href=\"/tag/go\" title=\"Find more content with this tag\" rel=\"tag\">go</a>, <a href=\"/tag/golang\" title=\"Find more content with this tag\" rel=\"tag\">golang</a></div>\n<div class=\"body\">\n<p>Go is an open source programming language that makes it easy to build simple, reliable, and efficient software. In this brief article we'll show how to install binary releases of the compiler/toolset, and test them.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/727/Installing_the_Go_programming_language_on_Debian_GNU/Linux\">Read 519 more words</a> ~ 0 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/726/Performing_IMAP_queries_via_curl\">Performing IMAP queries via curl</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Thu 14 Jan 2016 at 08:27</div>\n<div class=\"tags\">Tags: <a href=\"/tag/curl\" title=\"Find more content with this tag\" rel=\"tag\">curl</a>, <a href=\"/tag/imap\" title=\"Find more content with this tag\" rel=\"tag\">imap</a></div>\n<div class=\"body\">\n<p>Most people are familiar with curl, the tool that allows you to make HTTP-requests, and FTP-requests, via the command-line. Recently it gained the ability to perform IMAP operations, and this brief article demonstrates how that is done.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/726/Performing_IMAP_queries_via_curl\">Read 765 more words</a> ~ 3 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/725/Simplifying_repetitive_Apache_configuration_with_mod_macro\">Simplifying repetitive Apache configuration with mod_macro</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Wed 9 Dec 2015 at 12:34</div>\n<div class=\"tags\">Tags: <a href=\"/tag/apache2\" title=\"Find more content with this tag\" rel=\"tag\">apache2</a>, <a href=\"/tag/apache2%20modules\" title=\"Find more content with this tag\" rel=\"tag\">apache2 modules</a>, <a href=\"/tag/letsencrypt\" title=\"Find more content with this tag\" rel=\"tag\">letsencrypt</a>, <a href=\"/tag/ssl\" title=\"Find more content with this tag\" rel=\"tag\">ssl</a></div>\n<div class=\"body\">\n<p>Apache is one of the more flexible webservers, and most of this is achieved via the use of various extension modules bundled with it, or externally available. <tt>mod_macro</tt> is a great module allowing you to simplifying configuration of multiple virtual hosts enormously.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/725/Simplifying_repetitive_Apache_configuration_with_mod_macro\">Read 576 more words</a> ~ 1 comment posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/724/Enabling_swap_on_debian_based_system\">Enabling swap on debian based system</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/tuwid\">tuwid</a> on Tue 8 Dec 2015 at 18:01</div>\n<div class=\"tags\">Tags: <a href=\"/tag/swap\" title=\"Find more content with this tag\" rel=\"tag\">swap</a></div>\n<div class=\"body\">\n<p>Recently I found myself without a swap partition (having installed another OS and reworked my disk-setup) so I wanted to share a quick guide to enable swap again.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/724/Enabling_swap_on_debian_based_system\">Read 302 more words</a> ~ 7 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/723/Offering_IPv4-only_services_over_IPv6\">Offering IPv4-only services over IPv6</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Sun 29 Nov 2015 at 08:06</div>\n<div class=\"tags\">Tags: <a href=\"/tag/ipv4\" title=\"Find more content with this tag\" rel=\"tag\">ipv4</a>, <a href=\"/tag/ipv6\" title=\"Find more content with this tag\" rel=\"tag\">ipv6</a>, <a href=\"/tag/puppet\" title=\"Find more content with this tag\" rel=\"tag\">puppet</a>, <a href=\"/tag/socat\" title=\"Find more content with this tag\" rel=\"tag\">socat</a></div>\n<div class=\"body\">\n<p>Although IPv6 is clearly the way of the future there are some software services which only support IPv4 access. Here we'll show a simple approach to exporting them to IPv6-based clients.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/723/Offering_IPv4-only_services_over_IPv6\">Read 446 more words</a> ~ 3 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/722/Analysing_performance_problems_with_systemd\">Analysing performance problems with systemd</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Sat 26 Sep 2015 at 18:06</div>\n<div class=\"tags\">Tags: <a href=\"/tag/systemd\" title=\"Find more content with this tag\" rel=\"tag\">systemd</a></div>\n<div class=\"body\">\n<p>Now that Systemd is the default init-system in fresh installations of Debian GNU/Linux it is worth highlighting some of the new features.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/722/Analysing_performance_problems_with_systemd\">Read 243 more words</a> ~ 9 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/721/Validating_SPF_and_DKIM_at_SMTP-time_with_exim\">Validating SPF and DKIM at SMTP-time with exim</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Tue 4 Aug 2015 at 07:58</div>\n<div class=\"tags\">Tags: <a href=\"/tag/dmarc\" title=\"Find more content with this tag\" rel=\"tag\">dmarc</a>, <a href=\"/tag/exim4\" title=\"Find more content with this tag\" rel=\"tag\">exim4</a>, <a href=\"/tag/spf\" title=\"Find more content with this tag\" rel=\"tag\">spf</a></div>\n<div class=\"body\">\n<p>In our recent articles we've discussed creating SPF-records to avoid spoofed mails, and the creation and setup for DKIM-signing emails, for a similar purpose. Here we'll look at the other side of the coin; performing DKIM and SPF testing on your <i>incoming</i> email.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/721/Validating_SPF_and_DKIM_at_SMTP-time_with_exim\">Read 686 more words</a> ~ 1 comment posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/720/Tying_together_SPF_and_DKIM_with_DMARC\">Tying together SPF and DKIM with DMARC</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Mon 3 Aug 2015 at 19:35</div>\n<div class=\"tags\">Tags: <a href=\"/tag/dkim\" title=\"Find more content with this tag\" rel=\"tag\">dkim</a>, <a href=\"/tag/dmarc\" title=\"Find more content with this tag\" rel=\"tag\">dmarc</a>, <a href=\"/tag/spf\" title=\"Find more content with this tag\" rel=\"tag\">spf</a></div>\n<div class=\"body\">\n<p>When it comes to increasing deliverabiity of email, and preventing spoofed/forged emails the preferred solution these days is DMARC, which allows the use of SPF and DKIM to be enforced for domains in a unified manner.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/720/Tying_together_SPF_and_DKIM_with_DMARC\">Read 551 more words</a> ~ 2 comments posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/719/Avoiding_mail-spoofing_with_SPF\">Avoiding mail-spoofing with SPF</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Sat 1 Aug 2015 at 17:34</div>\n<div class=\"tags\">Tags: <a href=\"/tag/dns\" title=\"Find more content with this tag\" rel=\"tag\">dns</a>, <a href=\"/tag/email\" title=\"Find more content with this tag\" rel=\"tag\">email</a>, <a href=\"/tag/spf\" title=\"Find more content with this tag\" rel=\"tag\">spf</a></div>\n<div class=\"body\">\n<p>The Sender Policy Framework, or SPF, is an email-validation system which is designed to allow spoofed mails to be indentified. In this brief introduction we'll look at how you can configure your outgoing emails to take advantage of this validation.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/719/Avoiding_mail-spoofing_with_SPF\">Read 638 more words</a> ~ 1 comment posted )</div>\n</div>\n<div class=\"teaser\">\n<h1 class=\"title\"><a href=\"/article/718/DKIM-signing_outgoing_mail_with_exim4\">DKIM-signing outgoing mail with exim4</a></h1>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> on Wed 29 Jul 2015 at 06:28</div>\n<div class=\"tags\">Tags: <a href=\"/tag/dkim\" title=\"Find more content with this tag\" rel=\"tag\">dkim</a>, <a href=\"/tag/dmarc\" title=\"Find more content with this tag\" rel=\"tag\">dmarc</a>, <a href=\"/tag/email\" title=\"Find more content with this tag\" rel=\"tag\">email</a>, <a href=\"/tag/exim4\" title=\"Find more content with this tag\" rel=\"tag\">exim4</a>, <a href=\"/tag/spf\" title=\"Find more content with this tag\" rel=\"tag\">spf</a></div>\n<div class=\"body\">\n<p>There have been several systems designed to prevent mail spoofing over the years, the two most prominent solutions are DKIM and SPF. Here we're going to document the setup of using DKIM to signing outgoing mails with Debian's default mail transfer agent, exim4.</p>\n</div>\n<div class=\"readmore\">( <a href=\"/article/718/DKIM-signing_outgoing_mail_with_exim4\">Read 1152 more words</a> ~ 25 comments posted )</div>\n</div>\n<ul class=\"pager\">\n<li class=\"previous\"><a href=\"/start/717\">&lt;&lt;&lt; Previous 10 Articles</a></li>\n</ul>\n</div>\n<div class=\"col-md-2\">\n<p>&nbsp;</p>\n<div id=\"blogs\">\n<h3>Recent Weblogs</h3>\n<div class=\"weblogs\">\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/havoc/weblog/1\">First entry at my debian admnistration blog.</a></div>\n<div class=\"tagline\">by <a href=\"/users/havoc\">havoc</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/nick0268/weblog/1\">Firefox vs Firefox ESR</a></div>\n<div class=\"tagline\">by <a href=\"/users/nick0268\">nick0268</a></div>\n<div class=\"comments\"><a href=\"/users/nick0268/weblog/1#comments\">2 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/116\">Changes for GnuPG in Debian</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/116#comments\">10 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/echtap/weblog/1\">Is it ever too late to learn?</a></div>\n<div class=\"tagline\">by <a href=\"/users/echtap\">echtap</a></div>\n<div class=\"comments\"><a href=\"/users/echtap/weblog/1#comments\">3 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/rkreider/weblog/6\">I still creep</a></div>\n<div class=\"tagline\">by <a href=\"/users/rkreider\">rkreider</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/Steve/weblog/246\">Site overhaul complete ...</a></div>\n<div class=\"tagline\">by <a href=\"/users/Steve\">Steve</a></div>\n<div class=\"comments\"><a href=\"/users/Steve/weblog/246#comments\">4 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/simonw/weblog/491\">Logitech Wireless Headset with Jessie</a></div>\n<div class=\"tagline\">by <a href=\"/users/simonw\">simonw</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/naresh3410/weblog/1\">linuc file system creation</a></div>\n<div class=\"tagline\">by <a href=\"/users/naresh3410\">naresh3410</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/ajt/weblog/213\">Debian surprises</a></div>\n<div class=\"tagline\">by <a href=\"/users/ajt\">ajt</a></div>\n<div class=\"comments\"><a href=\"/users/ajt/weblog/213#comments\">4 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/lee/weblog/51\">Selective and multiple domain DKIM with Exim</a></div>\n<div class=\"tagline\">by <a href=\"/users/lee\">lee</a></div>\n<div class=\"comments\"></div>\n</div>\n<p><a href=\"https://planet.debian-administration.org\" title=\"Planet Debian Administration\" style=\"float:right;\">Archived weblogs</a></p>\n<p>&nbsp;</p>\n</div>\n</div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div id=\"tipbox\">\n<h3>Recent Tips</h3>\n<div class=\"weblogs\">\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/112\">Bootable grub USB stick (EFI and BIOS for Intel)</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/112#comments\">15 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/Steve/weblog/241\">Site code is public once again.</a></div>\n<div class=\"tagline\">by <a href=\"/users/Steve\">Steve</a></div>\n<div class=\"comments\"><a href=\"/users/Steve/weblog/241#comments\">2 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/64\">You should be using ssh-agent</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/64#comments\">16 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/fsateler/weblog/22\">Finding packages not directly depended upon</a></div>\n<div class=\"tagline\">by <a href=\"/users/fsateler\">fsateler</a></div>\n<div class=\"comments\"><a href=\"/users/fsateler/weblog/22#comments\">1 comment</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/lee/weblog/45\">Blocking mail in exim4 based on the sender NS</a></div>\n<div class=\"tagline\">by <a href=\"/users/lee\">lee</a></div>\n<div class=\"comments\"><a href=\"/users/lee/weblog/45#comments\">1 comment</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/71\">resetting passphrases for mapped LUKS volumes</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/71#comments\">9 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/68\">forwarding unix domain sockets with ssh and socat</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/68#comments\">6 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/60\">Avoiding erroneous OpenPGP certifications</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/60#comments\">3 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/rossen/weblog/2\">use logger(1) to reduce sysadmin mail</a></div>\n<div class=\"tagline\">by <a href=\"/users/rossen\">rossen</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/Steve/weblog/210\">IPv6 address updated</a></div>\n<div class=\"tagline\">by <a href=\"/users/Steve\">Steve</a></div>\n<div class=\"comments\"><a href=\"/users/Steve/weblog/210#comments\">4 comments</a></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div id=\"footer\">\n<p>Articles and comments are the property of their respective posters.</p>\n<p>Trademarks are the property of their respective owners.<br>\nDebian is <a href=\"http://tarr.uspto.gov/servlet/tarr?regser=serial&amp;entry=75386376&amp;action=Request+Status\">a registered trademark</a> of <a href=\"http://www.spi-inc.org\">Software in the Public Interest, Inc</a>.</p>\n<p>This site is copyright <span class=\"copyright\">�</span>; 2004-2016 <a href=\"https://steve.kemp.fi/\">Steve Kemp</a>.<br>\nSite hosting provided by <a href=\"http://www.bytemark.co.uk/\">Bytemark Hosting</a> on the <a href=\"http://bigv.io/\">BigV</a> platform.</p>\n<p><a href=\"/about/Syndication\">Article Feeds in Atom, RSS, &amp; RDF formats</a></p>\n</div>\n</div>\n\n\n</body>"}
{"link":"https://debian-administration.org/article/718/DKIM-signing_outgoing_mail_with_exim4","html":"<head>\n<meta name=\"generator\" content=\"HTML Tidy for Linux (vers 25 March 2009), see www.w3.org\">\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"Content-Language\" content=\"en\">\n<meta name=\"description\" content=\"Tips for a Debian GNU/Linux System Administrator.\">\n<meta name=\"keywords\" content=\"Debian System Administration News, Debian Sysadmin, Linux Administration, Linux Sysadmin, Sysadmin\">\n<meta name=\"copyright\" content=\"(c) 2004-2015 Debian Administration\">\n<meta name=\"author\" content=\"Debian Administration\">\n<meta name=\"robots\" content=\"index,follow\">\n<meta name=\"resource-type\" content=\"document\">\n<meta name=\"classification\" content=\"Personal\">\n<meta name=\"language\" content=\"en\">\n<link rel=\"icon\" href=\"/favicon.ico\">\n<link rel=\"shortcut icon\" href=\"/favicon.ico\">\n<link rel=\"top\" title=\"home\" href=\"/\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/view.css\" media=\"screen\" title=\"Site Layout\">\n<link rel=\"search\" title=\"Search\" href=\"/about/search\">\n<link rel=\"alternate\" title=\"Debian Administration RSS\" href=\"/articles.rdf\" type=\"application/rdf+xml\">\n<link rel=\"alternate\" title=\"Atom\" href=\"/atom.xml\" type=\"application/atom+xml\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"canonincal\" href=\"https://debian-administration.org/article/718/DKIM-signing_outgoing_mail_with_exim4\">\n<title>DKIM-signing outgoing mail with exim4</title>\n<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" type=\"text/css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/jquery.socialshareprivacy.min.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/jquery.autocomplete.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/view.css\" media=\"screen\" title=\"Site Layout\">\n<script src=\"https://pagead2.googlesyndication.com/pub-config/r20160913/ca-pub-1910202134166551.js\"></script><script async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script type=\"text/javascript\" async=\"\" src=\"//api.flattr.com/js/0.6/load.js?mode=auto\"></script><script type=\"text/javascript\">\n//<![CDATA[\n      (function() {\n      var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];\n      s.type = 'text/javascript';\n      s.async = true;\n      s.src = '//api.flattr.com/js/0.6/load.js?mode=auto';\n      t.parentNode.insertBefore(s, t);\n      })();\n//]]>\n</script>\n<script type=\"text/javascript\">\n//<![CDATA[\n      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n      ga('create', 'UA-80553159-8', 'auto');\n      ga('send', 'pageview');\n\n//]]>\n</script>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js\" type=\"text/javascript\">\n</script>\n<script src=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\" type=\"text/javascript\">\n</script>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/scripts/jquery.socialshareprivacy.css\"></head>\n<body>\n<div class=\"container-fluid\">\n<div class=\"navbar-header\"><a class=\"navbar-brand pull-left\" href=\"/\"><img height=\"75\" width=\"75\" src=\"/images/logo.png\" alt=\"logo\"></a></div>\n<ul class=\"nav navbar-nav\">\n<li><a href=\"/\">Home</a></li>\n<li><a href=\"/about/Debian%20Administration\">About</a></li>\n<li><a href=\"/archive/\">Archive</a></li>\n<li><a href=\"/about/Contribute\">Contribute</a></li>\n<li><a href=\"/about/FAQ\">FAQ</a></li>\n<li><a href=\"/tag\">Tags</a></li>\n</ul>\n<ul class=\"nav navbar-nav navbar-right\">\n<li style=\"list-style: none; display: inline\">\n<form class=\"navbar-form navbar-left\" role=\"search\" action=\"/search/\" method=\"post\">\n<div class=\"form-group\"><input type=\"hidden\" name=\"mode\" value=\"article_search\"><input type=\"text\" name=\"q\" class=\"form-control\" placeholder=\"Search..\"></div>\n<button type=\"submit\" class=\"btn btn-default\"><span class=\"glyphicon glyphicon-search\">&nbsp;</span></button></form>\n</li>\n<li><a href=\"/create/user\"><span class=\"glyphicon glyphicon-user\">&nbsp;</span> Sign Up</a></li>\n<li><a href=\"/login\"><span class=\"glyphicon glyphicon-log-in\">&nbsp;</span> Login</a></li>\n</ul>\n</div>\n<p>&nbsp;</p>\n<div class=\"container-fluid\">\n<div class=\"row\">\n<div class=\"col-md-2\">\n<p>&nbsp;</p>\n<div id=\"poll\" style=\"margin-left:15px;\">\n<h3><b>Do you use let's encrypt?</b></h3>\n<form method=\"post\" action=\"/polls/167\"><input type=\"hidden\" name=\"poll_id\" value=\"167\"> <label><input type=\"radio\" name=\"pollanswer\" value=\"1\">Yes</label><br>\n<label><input type=\"radio\" name=\"pollanswer\" value=\"2\">No</label><br>\n<label><input type=\"radio\" name=\"pollanswer\" value=\"3\">Huh?</label><br>\n<input type=\"hidden\" name=\"mode\" value=\"poll_vote\"> <input type=\"hidden\" name=\"id\" value=\"167\"> <input type=\"submit\" value=\"Vote\"><br>\n<p class=\"votescast\"><a href=\"/polls/167\">6989 votes ~ 22 comments</a></p>\n</form>\n</div>\n<!-- Flattr -->\n<p>&nbsp;</p>\n<div style=\"text-align:center;\"><iframe src=\"https://button.flattr.com/view/?e=1&amp;url=http%3A%2F%2Fdebian-administration.org%2F&amp;\" class=\"FlattrButton\" width=\"55\" height=\"62\" frameborder=\"0\" scrolling=\"no\" title=\"Flattr\" border=\"0\" marginheight=\"0\" marginwidth=\"0\" allowtransparency=\"true\"></iframe></div>\n</div>\n<div class=\"col-md-8\"><script type=\"text/javascript\" src=\"/js/jquery.socialshareprivacy.min.js\">\n</script> <script type=\"text/javascript\">\n  <!--//--><![CDATA[//><!--\n$.fn.socialSharePrivacy.settings.path_prefix = '/';\n\n$(function() {\n     $('.share').socialSharePrivacy();\n});\n  //--><!]]>\n</script>\n<div class=\"article\"><!-- headline + section name -->\n<h2 class=\"title\">DKIM-signing outgoing mail with exim4</h2>\n<div class=\"tagline\">\n<p>Posted by <a href=\"/users/Steve\">Steve</a> on Wed 29 Jul 2015 at 06:28</p>\n</div>\n<!-- tag start -->\n<script type=\"text/javascript\">\n//<![CDATA[\nfunction addTag(url)\n{\n    $(\"#current_tags\").load( url,\n                             function() {\n                                 $(\"#new_tag\").val( \"\" )\n                                 $(\"#add_tag\").hide()\n                             })\n}\n\n$(document).ready(function(){\n    $.getScript(\"/js/jquery.autocomplete.js\", function() {\n\n        $(\"#new_tag\").autocomplete(\"/ajax/complete\");\n        $('a#toggle').click(function() {\n            $('#add_tag').toggle(400);\n        })\n    });\n});\n//]]>\n</script>\n<div class=\"tags\"><span id=\"current_tags\">Tags: <a href=\"/tag/dkim\" title=\"Find more content with this tag\" rel=\"tag\">dkim</a>, <a href=\"/tag/dmarc\" title=\"Find more content with this tag\" rel=\"tag\">dmarc</a>, <a href=\"/tag/email\" title=\"Find more content with this tag\" rel=\"tag\">email</a>, <a href=\"/tag/exim4\" title=\"Find more content with this tag\" rel=\"tag\">exim4</a>, <a href=\"/tag/spf\" title=\"Find more content with this tag\" rel=\"tag\">spf</a></span></div>\n<!-- tag end -->\n<p>There have been several systems designed to prevent mail spoofing over the years, the two most prominent solutions are DKIM and SPF. Here we're going to document the setup of using DKIM to signing outgoing mails with Debian's default mail transfer agent, exim4.</p>\n<h3>DKIM Overview</h3>\n<blockquote>\n<p>DKIM uses the same notion of public and private keys as you would be familiar with from GPG, only the distribution is different:</p>\n<ul>\n<li>A public key for each DKIM-protected domain is stored in DNS.</li>\n<li>The private key for each DKIM-protected domain is stored on your mailserver.</li>\n</ul>\n<p>When a mail is sent a number of fields are hashed together, and that hash is then signed with the private key.</p>\n<p>To validate an incoming message the receiver can see the from-address, perform the DNS-lookup necessary to find the public-key, and then repeat the hashing-process to compute the signature. If it matches then the result will be a \"pass\".</p>\n<p>The intention is that only somebody who has control of the DNS for a domain can send mail from it - because all others will be missing the private key, and unable to sign the message.</p>\n<p>To put it another way, the intention of DKIM is that you can use it to prevent spoofing - As people without access to your private key cannot fake the appropriate signature.</p>\n<p>(See also <a href=\"#dmarc\" rel=\"nofollow\">DMARC</a>, which we discuss later.)</p>\n</blockquote>\n<h3>DKIM Implementation</h3>\n<blockquote>\n<p>Implementation falls into three phases:</p>\n<ul>\n<li>Generate a public/private key which will be used for signing, and validation.</li>\n<li>Configure Exim to sign outgoing messages with the private key.</li>\n<li>Publish the public key in DNS.</li>\n</ul>\n<p>To generate a key-pair you can use openssl, as follows:</p>\n<pre>openssl genrsa -out example.com-private.pem 1024 -outform PEM\nopenssl rsa -in example.com-private.pem -out example.com.pem -pubout -outform PEM\n</pre>\n<p>This will result in two files:</p>\n<ul>\n<li><tt>example.com-private.pem</tt>\n<ul>\n<li>The private file you need to keep secure, and which exim will read to sign messages.</li>\n</ul>\n</li>\n<li><tt>example.com.pem</tt>\n<ul>\n<li>The public key you'll publish in DNS.</li>\n</ul>\n</li>\n</ul>\n<p>Before storing the public key in DNS you need to pick a \"selector\". A domain might have multiple keys involved, and to differentiate between them a label is used, that label is called a selector.</p>\n<p>To make it obvious when a key was generated I recommend you use a date, so my most recent selector was called <tt>20150726</tt>.</p>\n<p>Once you have chosen your selector you the need to publish the key in DNS. If you're protecting the domain <tt>example.com</tt> you need to publish a TXT record with the name:</p>\n<pre>20150726._domainkey.example.com\n</pre>\n<p>The value of the DNS record should be the public key we generated earlier, which will look something like this:</p>\n<pre>-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC30aRx6rlDA7LkhsM1AtuW8LoB\nrjo6RZH3yS7nC9EgqV5ntFIzQyCo88hNBz72XwwFAAGKuCVIwcxV06lAHWnUTt+Z\nyjJlP/4XJo9JH76ZJu9vUTaHw753IY3SZR+xEnJuyBr/LZknAEFqHuDP7V3+B6SW\nuBElSFFnImnP7oeMQQIDAQAB\n-----END PUBLIC KEY-----\n</pre>\n<p>To store this in DNS, as <tt>TXT</tt> record, remove the first and last line, and then remove line-breaks, in our case that means we set the following record:</p>\n<pre>20150726._domainkey.example.com IN TXT \"k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC30aRx6rlDA7LkhsM1AtuW8LoBrjo6RZH3yS7nC9EgqV5ntFIzQyCo88hNBz72XwwFAAGKuCVIwcxV06lAHWnUTt+ZyjJlP/4XJo9JH76ZJu9vUTaHw753IY3SZR+xEnJuyBr/LZknAEFqHuDP7V3+B6SWuBElSFFnImnP7oeMQQIDAQAB\"\n</pre>\n<p>With that entry stored in DNS we can now configure exim to sign the mail, and we do that by creating some configuration values that the stock Debian-configuration file for <tt>exim4-daemon-heavy</tt> will use.</p>\n<p>Crate the file <tt>/etc/exim4/conf.d/main/00_local_macros</tt> with the following contents:</p>\n<pre>DKIM_CANON = relaxed\nDKIM_SELECTOR = 20150726\nDKIM_DOMAIN = example.com\nDKIM_FILE = /etc/exim4/dkim/example.com-private.pem\n</pre>\n<p>(Obviously you need to move the private key to the named path, such that exim4 can read it too)</p>\n<p>Once you've updated your configuration template you need to rebuild the real configuration, and restart exim such that it takes effect:</p>\n<pre># update-exim4.conf\n# service exim4 restart\n</pre>\n<p>At this point you can send an email to another host, and it should be signed.</p>\n</blockquote>\n<h3>Handling Multiple Domains</h3>\n<blockquote>\n<p>The previous example used a single domain, <tt>example.com</tt>, but in most mail-servers you'll handle mail for multiple domains.</p>\n<p>The solution here is to update your <tt>00_local_macros</tt> file to allow conditional lookup of the domain and corresponding key:</p>\n<pre>DKIM_CANON = relaxed\nDKIM_SELECTOR = 20150726\n\n# Get the domain from the outgoing mail.\nDKIM_DOMAIN = ${sg{${lc:${domain:$h_from:}}}{^www\\.}{}}\n\n# The file is based on the outgoing domain-name in the from-header.\nDKIM_FILE = /etc/exim4/dkim/{DKIM_DOMAIN}.pem\n\n# If key exists then use it, if not don't.\nDKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}\n</pre>\n<p>The net result of this is that if your mailserver sends mail from \"<tt>steve@example.com</tt>\" the key-file will be loaded from <tt>/etc/exim4/dkim/example.com.pem</tt>, but if you send mail from \"<tt>steve@me.com</tt>\" the private-key will be loaded from <tt>/etc/exim4/dkim/me.com.pem</tt> - unless it is missing, and in that case the outgoing mail won't be signed at all.</p>\n<div style=\"border:1px solid black; background-color:#d3d3d3;\">\n<h4>The Exim4 magic</h4>\n<blockquote>\n<p>The lookup uses the native facilities exim4 has for working with strings, etc, and to understand how it works you need to bear in mind that things work from the inside-out. The final result contains expressions that can can be written individually, here we just chain them together.</p>\n<p>The initial selection is made via reading the \"<tt>$h_from</tt>\", or the From: header of the outgoing email. The domain-part is extracted like so:</p>\n<pre>${domain:$h_from} - The domain-name of the From: header.\n</pre>\n<p>The next part uses ensures that is lower-cased:</p>\n<pre>${lc:XXXX} - The string \"xxxx\" in lower-case\n</pre>\n<p>So we can see that this will be the outgoing domain, in lower-case:</p>\n<pre>${lc:${domain:$h_from}}\n</pre>\n<p>Once that is present we can then wrap it up using the <tt>sg</tt> operation which allows search &amp; replacement. In our case we remove any leading <tt>www.</tt> prefix from the value. This probably isn't required, but a lot of systems have hostnames setup with a www.prefix, and so this will let them sign with the domain \"<tt>example.com</tt>\" rather than \"<tt>www.example.com</tt>\".</p>\n<p>In conclusion this is probably a useful way of looking up the correct domain on a per-email basis:</p>\n<pre>DKIM_DOMAIN = ${sg{${lc:${domain:$h_from:}}}{^www\\.}{}}\n</pre>\n<p>The next part merely uses the domain to find the file on-disk, if it exists. If it does: great. If not then the mail won't be signed:</p>\n<pre>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}\n</pre></blockquote>\n</div>\n<p>With this setup present you can generate keys for multiple domains, store the public-part in DNS, the private parts in a common-directory, and all will be well.</p>\n<p>The only commonality here is that all the domains will need the same selector, but that could be worked around if you wished.</p>\n</blockquote>\n<h3 id=\"dmarc\">DMARC</h3>\n<blockquote>\n<p>The preceeding work will allow your outgoing emails to be signed via DKIM, and will allow the mailservers which receive the mails to validate that they are not spoofed, or were altered in-transit.</p>\n<p>However they do not prevent a remote attacker from spoofing mail and merely avoiding the use of DKIM. For example:</p>\n<ul>\n<li>You might be sending out DKIM-signed messages.</li>\n<li>An attacker would just send out messages without a DKIM-signature.</li>\n</ul>\n<p>To prevent this we need to look at a second system called <a href=\"https://dmarc.org/\" rel=\"nofollow\">DMARC</a>. DMARC allows you to publish, again in DNS, the fact that <b>all</b> of the mails for your domain should have (valid) DKIM signatures, and if they don't they can be dropped/ignored.</p>\n<p>By mandating the use of DKIM you essentially kill spoofed mails for your domain(s), especially in combination with SPF.</p>\n<p>I'll cover SPF and DMARC in a follow-up article, but I wanted to briefly mention both here as being related technologies.</p>\n</blockquote>\n<div style=\"text-align: right;\"></div>\n<div class=\"navigation\">\n<div class=\"row\"><span class=\"left\"><a href=\"/comment/onarticle/718\">Add Comment</a> <a href=\"/comment/feed/onarticle/718\"><img src=\"/images/xml.gif\" title=\"Subscribe to comments on this article.\" alt=\"XML logo\" width=\"36\" height=\"14\"></a></span>\n<div class=\"spacer\"></div>\n</div>\n<p>&nbsp;</p>\n<ul class=\"pager\">\n<li class=\"previous\"><a href=\"/article/717/Setting_up_a_personal_secure_apt_repository\">&lt;&lt;&lt; Setting up a personal secure apt repository</a></li>\n<li class=\"next\"><a href=\"/article/719/Avoiding_mail-spoofing_with_SPF\">Avoiding mail-spoofing with SPF &gt;&gt;&gt;</a></li>\n</ul>\n</div>\n</div>\n<p>&nbsp;</p>\n<div class=\"share\"><ul class=\"social_share_privacy_area line\"><li class=\"help_info facebook\"><div class=\"info\">Two clicks for more privacy: The Facebook Like button will be enabled once you click here. No data is loaded from Facebook until you enable the button.  Click the [i] button for more information.</div><span class=\"switch off\">not connected to Facebook</span><div class=\"dummy_btn fb_like\"><img class=\"fb_like_privacy_dummy privacy_dummy\" alt=\"Facebook &quot;Like&quot;-Dummy\" src=\"/images/dummy_facebook.png\"></div></li><li class=\"help_info gplus\"><div class=\"info\">Two clicks for more privacy: The Google+ button will be enabled once you click here. No data is loaded from Google until you enable the button.  Click the [i] button for more information.</div><span class=\"switch off\">not connected to Google+</span><div class=\"dummy_btn gplusone\"><img class=\"gplusone_privacy_dummy privacy_dummy\" alt=\"&quot;Google+1&quot;-Dummy\" src=\"/images/dummy_gplus.png\"></div></li><li class=\"help_info linkedin\"><div class=\"info\">Two clicks for more privacy: The Linked in button will be enabled once you click here. No data is loaded from Linked in until you enable the button.  Click the [i] button for more information.</div><span class=\"switch off\">not connected to LinkedIn</span><div class=\"dummy_btn linkedin\"><img class=\"linkedin_privacy_dummy privacy_dummy\" alt=\"&quot;LinkedIn&quot;-Dummy\" src=\"/images/dummy_linkedin.png\"></div></li><li class=\"help_info stumbleupon\"><div class=\"info\">Two clicks for more privacy: The Stumble! button will be enabled once you click here. No data is loaded from StumbleUpon until you enable the button.  Click the [i] button for more information.</div><span class=\"switch off\">not connected to StumbleUpon</span><div class=\"dummy_btn stumbleupon\"><img class=\"stumbleupon_privacy_dummy privacy_dummy\" alt=\"&quot;Stumble!&quot;-Dummy\" src=\"/images/dummy_stumbleupon.png\"></div></li><li class=\"help_info twitter\"><div class=\"info\">Two clicks for more privacy: The Tweet this button will be enabled once you click here. No data is loaded from Twitter until you enable the button.  Click the [i] button for more information.</div><span class=\"switch off\">not connected to Twitter</span><div class=\"dummy_btn tweet\"><img class=\"tweet_privacy_dummy privacy_dummy\" alt=\"&quot;Tweet this&quot;-Dummy\" src=\"/images/dummy_twitter.png\"></div></li><li class=\"settings_info\"><div class=\"settings_info_menu off perma_option_off\"><a href=\"http://panzi.github.com/SocialSharePrivacy/\"><span class=\"help_info icon\"><span class=\"info\">If you click to activate the share buttons, data will be loaded from a third party (Facebook, Twitter, Google), allowing them to track your visit to schneier.com. For more details click the [i] button.</span></span></a></div></li></ul></div>\n<p>&nbsp;</p>\n<hr>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_1\">#</a></div>\n<div class=\"title\" id=\"comment_1\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/ajt\">ajt</a> (79.77.xx.xx) on Thu 30 Jul 2015 at 20:48<br>\n[ <a href=\"/users/ajt/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>I spent ages trying to get DKIM and SPF to work on my box. Most of the instructions on the web were old/wrong or just didn't work. In the end I did get Exim4 to add a DKIM signature to my outgoing emails - I can't even remember what I did to get it going in the end.</p>\n<p>I did find the <a href=\"http://www.mail-tester.com/\" rel=\"nofollow\">mail-tester.com</a> web site useful though for tetsing purposes.</p>\n<p>--<br>\n\"It's Not Magic, It's Work\"<br>\n<a href=\"http://www.iredale.net/\" rel=\"nofollow\">Adam</a></p>\n</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/1\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_2\">#</a></div>\n<div class=\"title\" id=\"comment_2\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> (91.156.xx.xx) on Fri 31 Jul 2015 at 05:05<br>\n[ <a href=\"/users/Steve/scratchpad\">View Steve's Scratchpad</a> | <a href=\"/users/Steve/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>I saw your blog post, but you'd disabled comments, so I couldn't contribute anything useful.</p>\n<p>For me, with jessie, it just worked, but even wheezy should be supported. I guess it's a mystery!</p>\n<p>mail-tester.com is a lovely resource, and is what I'll point to when I write up DMARC :)</p>\n<p>--<br>\n<a href=\"http://steve.org.uk/\" rel=\"nofollow\">Steve</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_1\">Parent</a> | <a href=\"/comment/onarticle/718/2\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_3\">#</a></div>\n<div class=\"title\" id=\"comment_3\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/ajt\">ajt</a> (195.99.xx.xx) on Fri 31 Jul 2015 at 07:38<br>\n[ <a href=\"/users/ajt/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>Steve, comments are <em>not</em> disabled, so if you can't comment on the blog entry then there must be a bug somewhere...</p>\n<p>--<br>\n\"It's Not Magic, It's Work\"<br>\n<a href=\"http://www.iredale.net/\" rel=\"nofollow\">Adam</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_2\">Parent</a> | <a href=\"/comment/onarticle/718/3\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_4\">#</a></div>\n<div class=\"title\" id=\"comment_4\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> (46.43.xx.xx) on Fri 31 Jul 2015 at 08:14<br>\n[ <a href=\"/users/Steve/scratchpad\">View Steve's Scratchpad</a> | <a href=\"/users/Steve/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>Weird, I'm sure that I saw they were - I didn't notice the entry at the time, but spotted it yesterday when I was looking at the current-tags for <a href=\"https://debian-administration.org/tag/dkim\" rel=\"nofollow\">dkim</a>, <a href=\"https://debian-administration.org/tag/spf\" rel=\"nofollow\">spf</a>, etc.</p>\n<p>(Your tags are broken due to \"space\" rather than \",\", but as you say comments are enabled. I will have to investigate. Shortly.)</p>\n<p>--<br>\n<a href=\"http://steve.org.uk/\" rel=\"nofollow\">Steve</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_3\">Parent</a> | <a href=\"/comment/onarticle/718/4\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_5\">#</a></div>\n<div class=\"title\" id=\"comment_5\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/ajt\">ajt</a> (195.99.xx.xx) on Fri 31 Jul 2015 at 08:27<br>\n[ <a href=\"/users/ajt/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>Steve, when I looked comments weren't enabled, but when I hit edit, the option showed up as being \"enabled\". I did press save, and when I looked after that, comments were enabled.</p>\n<p>Tags are odd, as I think I added them separately, but I'll still try to correct anyhow.</p>\n<p>--<br>\n\"It's Not Magic, It's Work\"<br>\n<a href=\"http://www.iredale.net/\" rel=\"nofollow\">Adam</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_4\">Parent</a> | <a href=\"/comment/onarticle/718/5\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_6\">#</a></div>\n<div class=\"title\" id=\"comment_6\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Steve\">Steve</a> (46.43.xx.xx) on Fri 31 Jul 2015 at 08:36<br>\n[ <a href=\"/users/Steve/scratchpad\">View Steve's Scratchpad</a> | <a href=\"/users/Steve/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>I suspect the problem is that comments defaulted to being off - so the initial version of the entry had them denied, but then the edit made them be enabled. That's where I'll start looking from anyway.</p>\n<p>Software is hard!</p>\n<p>--<br>\n<a href=\"http://steve.org.uk/\" rel=\"nofollow\">Steve</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_5\">Parent</a> | <a href=\"/comment/onarticle/718/6\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_7\">#</a></div>\n<div class=\"title\" id=\"comment_7\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/ajt\">ajt</a> (195.99.xx.xx) on Fri 31 Jul 2015 at 08:40<br>\n[ <a href=\"/users/ajt/weblog\">View Weblogs</a> ]</div>\n<div class=\"body\">\n<p>Considering how good this platform is and how useful the site is I'm not going to complain!</p>\n<p>--<br>\n\"It's Not Magic, It's Work\"<br>\n<a href=\"http://www.iredale.net/\" rel=\"nofollow\">Adam</a></p>\n</div>\n<p class=\"foot\">[ <a href=\"#comment_6\">Parent</a> | <a href=\"/comment/onarticle/718/7\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_8\">#</a></div>\n<div class=\"title\" id=\"comment_8\">problem with single domain example</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (82.224.xx.xx) on Wed 23 Sep 2015 at 07:58<br></div>\n<div class=\"body\">Debian 8.2 (jessie); exim 4.84-8<br>\n<br>\nThe single domain example didn't work for me:<br>\nDKIM_CANON = relaxed<br>\nDKIM_SELECTOR = 20150726<br>\nDKIM_DOMAIN = example.com<br>\nDKIM_FILE = /etc/exim4/dkim/example.com-private.pem<br>\n<br>\nExim didn't add the signature to outgoing mail.<br>\n<br>\nWhen I added the following line, it worked:<br>\nDKIM_PRIVATE_KEY = /etc/exim4/dkim/example.com-private.pem<br>\n<br>\nI found no reference to DKIM_FILE in the documentation.<br>\nwww.exim.org/exim-html-current/doc/html/spec_html/ch-support_for_ dkim_domainkeys_identified_mail.html<br>\n<br>\nI found no reference to DKIM_FILE in the exim config.<br>\nSo I guess that it is a typo.</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/8\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_13\">#</a></div>\n<div class=\"title\" id=\"comment_13\">Re: problem with single domain example</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (81.187.xx.xx) on Thu 10 Mar 2016 at 13:33<br></div>\n<div class=\"body\">Well I for one wish I'd seen this comment two hours ago...<br>\n<br>\nThanks!<br>\nWilliam</div>\n<p class=\"foot\">[ <a href=\"#comment_8\">Parent</a> | <a href=\"/comment/onarticle/718/13\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_20\">#</a></div>\n<div class=\"title\" id=\"comment_20\">Re: problem with single domain example</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (86.83.xx.xx) on Sat 29 Oct 2016 at 16:12<br></div>\n<div class=\"body\">Linux 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt25-2 (2016-04-08) x86_64 GNU/Linux<br>\nExim 4.84_2<br>\n<br>\nI also needed to change DKIM_FILE into DKIM_PRIVATE_KEY in /etc/exim4/conf.d/main/00_local_macros and switch from single configuration file to split configuration files using dpkg-reconfigure exim4-config to get DKIM signing to work.<br></div>\n<p class=\"foot\">[ <a href=\"#comment_8\">Parent</a> | <a href=\"/comment/onarticle/718/20\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_26\">#</a></div>\n<div class=\"title\" id=\"comment_26\">Re: problem with single domain example</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (2a02:0xx:0xx:0xxx:0xxx:0xxx:xx) on Sun 19 Feb 2017 at 16:49<br></div>\n<div class=\"body\">Thank you!<br>\n<br>\nI also lost 2 hours on this.<br>\n<br>\nSteve, please update the blog entry!<br>\n<br></div>\n<p class=\"foot\">[ <a href=\"#comment_8\">Parent</a> | <a href=\"/comment/onarticle/718/26\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_9\">#</a></div>\n<div class=\"title\" id=\"comment_9\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (213.127.xx.xx) on Fri 9 Oct 2015 at 08:28<br></div>\n<div class=\"body\">Hi Steve,<br>\n<br>\nThank you for this excellent post. I found that your instructions don't work entirely on my Ubuntu 14.04.3 box running Exim 4.82. The private key expansion doesn't work for whatever reason. I found the solution by changing the DKIM_FILE macro to the following:<br>\n<br>\nDKIM_FILE= /etc/exim4/dkim/$dkim_domain.pem<br>\n<br>\nThe {DKIM_DOMAIN} you use doesn't expand to the right path on my box, but the $dkim_domain does. I guess that they should both resolve to the same string, but apparently they don't. Hope this helps out some peeps have the same issue.<br>\n<br>\n<br>\nFloris Luiten</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/9\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_10\">#</a></div>\n<div class=\"title\" id=\"comment_10\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (81.174.xx.xx) on Thu 10 Dec 2015 at 13:04<br></div>\n<div class=\"body\">\n<p>I could not your config snippet working, lots of <code>failed to expand dkim_private_key: missing or misplaced { or }</code> in the mainlog.</p>\n<p>Here's what worked for me (Debian 8/Jessie, Dec 2015)</p>\n<pre><code># DKIM\nDKIM_SELECTOR = 20151210\n# Get the domain from the outgoing mail.\nDKIM_DOMAIN = ${lc:${domain:$h_from:}}\n# If key exists then use it, if not don't.\nDKIM_PRIVATE_KEY=${if exists{/etc/exim4/dkim/${dkim_domain}-private.pem} {/etc/exim4/dkim/${dkim_domain}-private.pem}}\n</code>\n</pre></div>\n<p class=\"foot\">[ <a href=\"#comment_9\">Parent</a> | <a href=\"/comment/onarticle/718/10\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_11\">#</a></div>\n<div class=\"title\" id=\"comment_11\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (87.115.xx.xx) on Sat 26 Dec 2015 at 22:13<br></div>\n<div class=\"body\">This guide will only work if you use split config files, if you use single file you should not create the 00_local_macros file and instead use an already existing config file as the single file generator won't see your file and will ignore your setting and you may end up like me wasting few days trying to debug the problem.</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/11\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_12\">#</a></div>\n<div class=\"title\" id=\"comment_12\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (104.190.xx.xx) on Mon 22 Feb 2016 at 07:10<br></div>\n<div class=\"body\">Can you please expand on this? I can't get DKIM to work at all. Where is this single file located, and how would I know if I have a non-spit configuration?<br>\n<br>\nThank You.</div>\n<p class=\"foot\">[ <a href=\"#comment_11\">Parent</a> | <a href=\"/comment/onarticle/718/12\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_14\">#</a></div>\n<div class=\"title\" id=\"comment_14\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (81.187.xx.xx) on Thu 10 Mar 2016 at 14:00<br></div>\n<div class=\"body\">The single file (known as unsplit configuration) is here: /etc/exim4/exim4.conf.template<br>\n<br>\nCheck the db_use_split_config line in /etc/exim4/update-exim4.conf.conf to see if you're using split mode. Follow the instructions there or run \"sudo dpkg-reconfigure exim4-config\" to use the wizard which explains each option in lots of detail.<br>\n<br>\nAnother tip - on Debian, when you run sudo update-exim4.conf, the output is written to /var/lib/exim4/config.autogenerated. If something's not working,<br>\ncheck your changes have actually been copied there.<br>\n<br>\nYou can have a situation, as I did, where all the split config files existed but update-exim4.conf was set to ONLY use the single template.<br>\n<br>\nNote also the comment about DKIM_FILE being the wrong syntax for the single domain example (you need DKIM_PRIVATE_KEY)<br>\n<br>\nWilliam</div>\n<p class=\"foot\">[ <a href=\"#comment_12\">Parent</a> | <a href=\"/comment/onarticle/718/14\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_15\">#</a></div>\n<div class=\"title\" id=\"comment_15\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (82.239.xx.xx) on Fri 1 Apr 2016 at 12:56<br></div>\n<div class=\"body\">I confirm DKIM_PRIVATE_KEY otherwise it does not work. Took me a while to figure out.<br>\n<br>\nPierre</div>\n<p class=\"foot\">[ <a href=\"#comment_14\">Parent</a> | <a href=\"/comment/onarticle/718/15\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\">\n<div class=\"indent\">\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_16\">#</a></div>\n<div class=\"title\" id=\"comment_16\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (135.23.xx.xx) on Tue 17 May 2016 at 08:45<br></div>\n<div class=\"body\">when I \"sudo update-exim4.conf\" produces: \"command not found\". Not sure what to do next. Please reply with instruction. Thank you.</div>\n<p class=\"foot\">[ <a href=\"#comment_14\">Parent</a> | <a href=\"/comment/onarticle/718/16\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n</div>\n</div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_18\">#</a></div>\n<div class=\"title\" id=\"comment_18\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (87.103.xx.xx) on Mon 30 May 2016 at 21:15<br></div>\n<div class=\"body\">The DKIM_FILE expression for multiple domains is slightly broken. In case of domains without DKIM certificate, the following error is produced: failed to expand dkim_private_key: missing or misplaced { or } This can be fixed by removing the {} braces from the DKIM_FILE expression: &lt;pre&gt;DKIM_FILE = /etc/exim4/dkim/DKIM_DOMAIN.pem&lt;/pre&gt;</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/18\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_21\">#</a></div>\n<div class=\"title\" id=\"comment_21\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (109.28.xx.xx) on Sun 20 Nov 2016 at 11:05<br></div>\n<div class=\"body\">Thank you for your article, like I saw into comments (but a bit late), DKIM_FILE does not work (single domain) for me so I had to replace with DKIM_PRIVATE_KEY.<br>\nPlease also note that if you selected \"exim4.conf.localmacros\" at installation, the local macro configuration file is \"/etc/exim4/exim4.conf.localmacros\" instead of \"/etc/exim4/conf.d/main/00_local_macros\"<br>\n<br>\nCould you please update your article to reflect multiple comments, Thanks !<br>\n<br>\nPascal.<br></div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/21\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<div class=\"indent\"><!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_22\">#</a></div>\n<div class=\"title\" id=\"comment_22\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (37.146.xx.xx) on Wed 30 Nov 2016 at 17:40<br></div>\n<div class=\"body\">Hello! I did everything as written, but unfortunately it does not work. Letters fall into spam. Please help understand what is my mistake?<br>\nDKIM_DOMAIN = ${lc:${domain:$h_from:}}<br>\nDKIM_FILE = /etc/exim4/dkim/${lc:${domain:$h_from:}}.key<br>\nDKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}<br>\nDKIM_SELECTOR = mail<br>\nDKIM_CANON = relaxed<br>\nremote_smtp:<br></div>\n<p class=\"foot\">[ <a href=\"#comment_21\">Parent</a> | <a href=\"/comment/onarticle/718/22\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. --></div>\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_23\">#</a></div>\n<div class=\"title\" id=\"comment_23\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (194.53.xx.xx) on Wed 11 Jan 2017 at 14:51<br></div>\n<div class=\"body\">\n<p>Thanks a lot for your write-up of SPF, DKIM and DMARC, with a little help from the other comments i got it working really fast. So i wanted to share my extension :-)</p>\n<pre><code>The only commonality here is that all the domains will need the same selector, but that could be worked around if you wished.\n</code>\n</pre>\n<p>i wished to work around using the same selector for different domains so with some trial-and-error and reading of man-pages i got my config working smoothly</p>\n<p>i put the selector in a file called domain.tld.selector in /etc/ssl/dkim/ together with the domain.tld.pem and domain.tld-private.pem</p>\n<p>so the domain.tld.selector contains the YearMonthDay of when i generated it</p>\n<p>it is recommended to never re-use a selector, so with this custom selector per domain i can renew just a single private key without having to change all of the selectors</p>\n<pre><code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}\nDKIM_CANON = relaxed\n\nDKIM_SEL_FILE = /etc/ssl/dkim/DKIM_DOMAIN.selector\nDKIM_SELECTOR = ${if exists{DKIM_SEL_FILE}{${readfile{DKIM_SEL_FILE}{}}}{0}}\n\nDKIM_KEY_FILE = /etc/ssl/dkim/DKIM_DOMAIN-private.pem\nDKIM_PRIVATE_KEY = ${if exists{DKIM_KEY_FILE}{DKIM_KEY_FILE}{0}}\n</code>\n</pre>\n<p>i also cleaned up the DKIM_DOMAIN, since i think it's highly unlikely that a user by mistake uses www in his email-domain name</p>\n</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/23\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_24\">#</a></div>\n<div class=\"title\" id=\"comment_24\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (88.176.xx.xx) on Sat 14 Jan 2017 at 08:41<br></div>\n<div class=\"body\">\n<p>Also, don't forget the trailing dot at the end of the DNS name (it has been forgotten in the example)&nbsp;:</p>\n<p>20150726._domainkey.example.com. IN TXT \"k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC30aRx6rlDA7LkhsM1AtuW8Lo Brjo6RZH3yS7nC9EgqV5ntFIzQyCo88hNBz72XwwFAAGKuCVIwcxV06lAHWnUTt+Z yjJlP/4XJo9JH76ZJu9vUTaHw753IY3SZR+xEnJuyBr/LZknAEFqHuDP7V3+B6SWu BElSFFnImnP7oeMQQIDAQAB\"</p>\n</div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/24\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Indent comments.\n     See matching loop to correctly terminate the comment indentation.\n  -->\n<!-- Comment entry -->\n<div class=\"comment\">\n<div class=\"link\"><a href=\"/articles/718#comment_25\">#</a></div>\n<div class=\"title\" id=\"comment_25\">Re: DKIM-signing outgoing mail with exim4</div>\n<div class=\"tagline\">Posted by <a href=\"/users/Anonymous\">Anonymous</a> (89.84.xx.xx) on Wed 18 Jan 2017 at 13:45<br></div>\n<div class=\"body\">Why not use \"DKIM_DOMAIN = $sender_address_domain\" rather than a lookup (instructional purpose of the \"exim4 magic\" aside)Â&nbsp;?<br></div>\n<p class=\"foot\">[ Parent | <a href=\"/comment/onarticle/718/25\">Reply to this comment</a> ]</p>\n</div>\n<!-- Terminate the indentation of the comments. -->\n<!-- Closing tag for if_error --></div>\n<div class=\"col-md-2\">\n<p>&nbsp;</p>\n<div id=\"blogs\">\n<h3>Recent Weblogs</h3>\n<div class=\"weblogs\">\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/havoc/weblog/1\">First entry at my debian admnistration blog.</a></div>\n<div class=\"tagline\">by <a href=\"/users/havoc\">havoc</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/nick0268/weblog/1\">Firefox vs Firefox ESR</a></div>\n<div class=\"tagline\">by <a href=\"/users/nick0268\">nick0268</a></div>\n<div class=\"comments\"><a href=\"/users/nick0268/weblog/1#comments\">2 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/dkg/weblog/116\">Changes for GnuPG in Debian</a></div>\n<div class=\"tagline\">by <a href=\"/users/dkg\">dkg</a></div>\n<div class=\"comments\"><a href=\"/users/dkg/weblog/116#comments\">10 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/echtap/weblog/1\">Is it ever too late to learn?</a></div>\n<div class=\"tagline\">by <a href=\"/users/echtap\">echtap</a></div>\n<div class=\"comments\"><a href=\"/users/echtap/weblog/1#comments\">3 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/rkreider/weblog/6\">I still creep</a></div>\n<div class=\"tagline\">by <a href=\"/users/rkreider\">rkreider</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/Steve/weblog/246\">Site overhaul complete ...</a></div>\n<div class=\"tagline\">by <a href=\"/users/Steve\">Steve</a></div>\n<div class=\"comments\"><a href=\"/users/Steve/weblog/246#comments\">4 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/simonw/weblog/491\">Logitech Wireless Headset with Jessie</a></div>\n<div class=\"tagline\">by <a href=\"/users/simonw\">simonw</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/naresh3410/weblog/1\">linuc file system creation</a></div>\n<div class=\"tagline\">by <a href=\"/users/naresh3410\">naresh3410</a></div>\n<div class=\"comments\"></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/ajt/weblog/213\">Debian surprises</a></div>\n<div class=\"tagline\">by <a href=\"/users/ajt\">ajt</a></div>\n<div class=\"comments\"><a href=\"/users/ajt/weblog/213#comments\">4 comments</a></div>\n</div>\n<div class=\"body\">\n<div class=\"title\"><a href=\"/users/lee/weblog/51\">Selective and multiple domain DKIM with Exim</a></div>\n<div class=\"tagline\">by <a href=\"/users/lee\">lee</a></div>\n<div class=\"comments\"></div>\n</div>\n<p><a href=\"https://planet.debian-administration.org\" title=\"Planet Debian Administration\" style=\"float:right;\">Archived weblogs</a></p>\n<p>&nbsp;</p>\n</div>\n</div>\n<p>&nbsp;</p>\n<div class=\"advert\">\n<h3>Sponsored Links</h3>\n<div align=\"center\"><script type=\"text/javascript\">\n//<![CDATA[\n<!--\n                                                     google_ad_client = \"pub-1910202134166551\";\n                                                     //200x90, created 08/12/07\n                                                     google_ad_slot = \"2315151555\";\n                                                     google_ad_width = 200;\n                                                     google_ad_height = 90;\n                                                     //-->\n//]]>\n</script> <script type=\"text/javascript\" src=\"//pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script><ins id=\"aswift_0_expand\" style=\"display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:200px;background-color:transparent\"><ins id=\"aswift_0_anchor\" style=\"display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:200px;background-color:transparent\"><iframe width=\"200\" height=\"90\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" vspace=\"0\" hspace=\"0\" allowtransparency=\"true\" scrolling=\"no\" allowfullscreen=\"true\" onload=\"var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}\" id=\"aswift_0\" name=\"aswift_0\" style=\"left:0;position:absolute;top:0;\"></iframe></ins></ins></div>\n<p><a href=\"/about/FAQ%20:%20Site%20Adverts\">Why are these adverts here?</a></p>\n</div>\n</div>\n</div>\n<div id=\"footer\">\n<p>Articles and comments are the property of their respective posters.</p>\n<p>Trademarks are the property of their respective owners.<br>\nDebian is <a href=\"http://tarr.uspto.gov/servlet/tarr?regser=serial&amp;entry=75386376&amp;action=Request+Status\">a registered trademark</a> of <a href=\"http://www.spi-inc.org\">Software in the Public Interest, Inc</a>.</p>\n<p>This site is copyright <span class=\"copyright\">©</span>; 2004-2016 <a href=\"https://steve.kemp.fi/\">Steve Kemp</a>.<br>\nSite hosting provided by <a href=\"http://www.bytemark.co.uk/\">Bytemark Hosting</a> on the <a href=\"http://bigv.io/\">BigV</a> platform.</p>\n<p><a href=\"/about/Syndication\">Article Feeds in Atom, RSS, &amp; RDF formats</a></p>\n</div>\n</div>\n\n\n</body>"}
