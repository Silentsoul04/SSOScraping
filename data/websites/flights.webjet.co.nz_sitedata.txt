{"link":"https://flights.webjet.co.nz/FlightSearch/SignIn/Index","html":"<head><script async=\"true\" type=\"text/javascript\" src=\"https://sslwidget.criteo.com/event?a=11332&amp;v=4.1.0&amp;p0=e%3Dexd%26site_type%3Dd&amp;p1=e%3Dvh&amp;p2=e%3Ddis&amp;adce=1\" data-owner=\"criteo-tag\"></script><script type=\"text/javascript\" src=\"https://bam.nr-data.net/1/e616aad446?a=1964830&amp;v=1026.7a27a3e&amp;to=MwQBYhcDWEIHBxFfXQpOLmAmTWVYAQosWHELDxdECg5aVBRLLFhWARk%3D&amp;rst=4158&amp;ref=https://flights.webjet.co.nz/FlightSearch/SignIn/Index&amp;ap=162&amp;be=1447&amp;fe=3994&amp;dc=2996&amp;af=err,xhr,stn,ins&amp;perf=%7B%22timing%22:%7B%22of%22:1492835067768,%22n%22:0,%22f%22:16,%22dn%22:17,%22dne%22:22,%22c%22:22,%22s%22:237,%22ce%22:683,%22rq%22:683,%22rp%22:1288,%22rpe%22:1290,%22dl%22:1290,%22di%22:2996,%22ds%22:2996,%22de%22:3027,%22dc%22:3994,%22l%22:3994,%22le%22:4100%7D,%22navigation%22:%7B%7D%7D&amp;jsonp=NREUM.setToken\"></script><script type=\"text/javascript\" async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><style type=\"text/css\">@charset \"UTF-8\";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>\n    \n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta charset=\"utf-8\"><script type=\"text/javascript\" src=\"https://cdn.krxd.net/userdata/get?pub=b255bed4-cbf2-494f-8122-47c1ec1b9fd3&amp;technographics=1&amp;callback=Krux.ns._default.kxjsonp_userdata\"></script><script type=\"text/javascript\" src=\"https://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck\"></script><script src=\"https://js-agent.newrelic.com/nr-1026.min.js\"></script><script async=\"\" src=\"//cdn.krxd.net/ctjs/controltag.js.714934d71ca8a8cd8c474d2f7d4608ec\"></script><script async=\"\" src=\"//www.google-analytics.com/analytics.js\"></script><script type=\"text/javascript\" async=\"\" src=\"https://cdn.krxd.net/controltag?confid=Ib52yQ5u\"></script><script async=\"\" type=\"text/javascript\" src=\"https://www.googletagservices.com/tag/js/gpt.js\"></script><script async=\"\" src=\"//www.googletagmanager.com/gtm.js?id=GTM-NMZ3GJ\"></script><script type=\"text/javascript\">window.NREUM||(NREUM={});NREUM.info = {\"beacon\":\"bam.nr-data.net\",\"errorBeacon\":\"bam.nr-data.net\",\"licenseKey\":\"e616aad446\",\"applicationID\":\"1964830\",\"transactionName\":\"MwQBYhcDWEIHBxFfXQpOLmAmTWVYAQosWHELDxdECg5aVBRLLFhWARk=\",\"queueTime\":0,\"applicationTime\":162,\"agent\":\"\",\"atts\":\"\"}</script><script type=\"text/javascript\">(window.NREUM||(NREUM={})).loader_config={xpid:\"VQ4AV19bGwIJUlVaBAE=\"};window.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){var o=t[e][1][n];return r(o||n)},o,o.exports)}return n[e].exports}if(\"function\"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n,e){function r(t){try{s.console&&console.log(t)}catch(n){}}var o,i=t(\"ee\"),a=t(15),s={};try{o=localStorage.getItem(\"__nr_flags\").split(\",\"),console&&\"function\"==typeof console.log&&(s.console=!0,o.indexOf(\"dev\")!==-1&&(s.dev=!0),o.indexOf(\"nr_dev\")!==-1&&(s.nrDev=!0))}catch(c){}s.nrDev&&i.on(\"internal-error\",function(t){r(t.stack)}),s.dev&&i.on(\"fn-err\",function(t,n,e){r(e.stack)}),s.dev&&(r(\"NR AGENT IN DEVELOPMENT MODE\"),r(\"flags: \"+a(s,function(t,n){return t}).join(\", \")))},{}],2:[function(t,n,e){function r(t,n,e,r,o){try{d?d-=1:i(\"err\",[o||new UncaughtException(t,n,e)])}catch(s){try{i(\"ierr\",[s,c.now(),!0])}catch(u){}}return\"function\"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,n,e){this.message=t||\"Uncaught error with no additional information\",this.sourceURL=n,this.line=e}function o(t){i(\"err\",[t,c.now()])}var i=t(\"handle\"),a=t(16),s=t(\"ee\"),c=t(\"loader\"),f=window.onerror,u=!1,d=0;c.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){\"stack\"in l&&(t(8),t(7),\"addEventListener\"in window&&t(5),c.xhrWrappable&&t(9),u=!0)}s.on(\"fn-start\",function(t,n,e){u&&(d+=1)}),s.on(\"fn-err\",function(t,n,e){u&&(this.thrown=!0,o(e))}),s.on(\"fn-end\",function(){u&&!this.thrown&&d>0&&(d-=1)}),s.on(\"internal-error\",function(t){i(\"ierr\",[t,c.now(),!0])})},{}],3:[function(t,n,e){t(\"loader\").features.ins=!0},{}],4:[function(t,n,e){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t(\"ee\"),i=t(\"handle\"),a=t(8),s=t(7),c=\"learResourceTimings\",f=\"addEventListener\",u=\"resourcetimingbufferfull\",d=\"bstResource\",l=\"resource\",p=\"-start\",h=\"-end\",m=\"fn\"+p,w=\"fn\"+h,v=\"bstTimer\",y=\"pushState\",g=t(\"loader\");g.features.stn=!0,t(6);var b=NREUM.o.EV;o.on(m,function(t,n){var e=t[0];e instanceof b&&(this.bstStart=g.now())}),o.on(w,function(t,n){var e=t[0];e instanceof b&&i(\"bst\",[e,n,this.bstStart,g.now()])}),a.on(m,function(t,n,e){this.bstStart=g.now(),this.bstType=e}),a.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),this.bstType])}),s.on(m,function(){this.bstStart=g.now()}),s.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),\"requestAnimationFrame\"])}),o.on(y+p,function(t){this.time=g.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i(\"bstHist\",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance[\"c\"+c]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance[\"c\"+c]()},!1):window.performance[f](\"webkit\"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance[\"webkitC\"+c]()},!1)),document[f](\"scroll\",r,{passive:!0}),document[f](\"keypress\",r,!1),document[f](\"click\",r,!1)}},{}],5:[function(t,n,e){function r(t){for(var n=t;n&&!n.hasOwnProperty(u);)n=Object.getPrototypeOf(n);n&&o(n)}function o(t){s.inPlace(t,[u,d],\"-\",i)}function i(t,n){return t[1]}var a=t(\"ee\").get(\"events\"),s=t(18)(a,!0),c=t(\"gos\"),f=XMLHttpRequest,u=\"addEventListener\",d=\"removeEventListener\";n.exports=a,\"getPrototypeOf\"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+\"-start\",function(t,n){var e=t[1],r=c(e,\"nr@wrapped\",function(){function t(){if(\"function\"==typeof e.handleEvent)return e.handleEvent.apply(e,arguments)}var n={object:t,\"function\":e}[typeof e];return n?s(n,\"fn-\",null,n.name||\"anonymous\"):e});this.wrapped=t[1]=r}),a.on(d+\"-start\",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,n,e){var r=t(\"ee\").get(\"history\"),o=t(18)(r);n.exports=r,o.inPlace(window.history,[\"pushState\",\"replaceState\"],\"-\")},{}],7:[function(t,n,e){var r=t(\"ee\").get(\"raf\"),o=t(18)(r),i=\"equestAnimationFrame\";n.exports=r,o.inPlace(window,[\"r\"+i,\"mozR\"+i,\"webkitR\"+i,\"msR\"+i],\"raf-\"),r.on(\"raf-start\",function(t){t[0]=o(t[0],\"fn-\")})},{}],8:[function(t,n,e){function r(t,n,e){t[0]=a(t[0],\"fn-\",null,e)}function o(t,n,e){this.method=e,this.timerDuration=\"number\"==typeof t[1]?t[1]:0,t[0]=a(t[0],\"fn-\",this,e)}var i=t(\"ee\").get(\"timer\"),a=t(18)(i),s=\"setTimeout\",c=\"setInterval\",f=\"clearTimeout\",u=\"-start\",d=\"-\";n.exports=i,a.inPlace(window,[s,\"setImmediate\"],s+d),a.inPlace(window,[c],c+d),a.inPlace(window,[f,\"clearImmediate\"],f+d),i.on(c+u,r),i.on(s+u,o)},{}],9:[function(t,n,e){function r(t,n){d.inPlace(n,[\"onreadystatechange\"],\"fn-\",s)}function o(){var t=this,n=u.context(t);t.readyState>3&&!n.resolved&&(n.resolved=!0,u.emit(\"xhr-resolved\",[],t)),d.inPlace(t,w,\"fn-\",s)}function i(t){v.push(t),h&&(g=-g,b.data=g)}function a(){for(var t=0;t<v.length;t++)r([],v[t]);v.length&&(v=[])}function s(t,n){return n}function c(t,n){for(var e in t)n[e]=t[e];return n}t(5);var f=t(\"ee\"),u=f.get(\"xhr\"),d=t(18)(u),l=NREUM.o,p=l.XHR,h=l.MO,m=\"readystatechange\",w=[\"onload\",\"onerror\",\"onabort\",\"onloadstart\",\"onloadend\",\"onprogress\",\"ontimeout\"],v=[];n.exports=u;var y=window.XMLHttpRequest=function(t){var n=new p(t);try{u.emit(\"new-xhr\",[n],n),n.addEventListener(m,o,!1)}catch(e){try{u.emit(\"internal-error\",[e])}catch(r){}}return n};if(c(p,y),y.prototype=p.prototype,d.inPlace(y.prototype,[\"open\",\"send\"],\"-xhr-\",s),u.on(\"send-xhr-start\",function(t,n){r(t,n),i(n)}),u.on(\"open-xhr-start\",r),h){var g=1,b=document.createTextNode(g);new h(a).observe(b,{characterData:!0})}else f.on(\"fn-end\",function(t){t[0]&&t[0].type===m||a()})},{}],10:[function(t,n,e){function r(t){var n=this.params,e=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!n.aborted){if(e.duration=a.now()-this.startTime,4===t.readyState){n.status=t.status;var i=o(t,this.lastSize);if(i&&(e.rxSize=i),this.sameOrigin){var c=t.getResponseHeader(\"X-NewRelic-App-Data\");c&&(n.cat=c.split(\", \").pop())}}else n.status=0;e.cbTime=this.cbTime,f.emit(\"xhr-done\",[t],t),s(\"xhr\",[n,e,this.startTime])}}}function o(t,n){var e=t.responseType;if(\"json\"===e&&null!==n)return n;var r=\"arraybuffer\"===e||\"blob\"===e||\"json\"===e?t.response:t.responseText;return h(r)}function i(t,n){var e=c(n),r=t.params;r.host=e.hostname+\":\"+e.port,r.pathname=e.pathname,t.sameOrigin=e.sameOrigin}var a=t(\"loader\");if(a.xhrWrappable){var s=t(\"handle\"),c=t(11),f=t(\"ee\"),u=[\"load\",\"error\",\"abort\",\"timeout\"],d=u.length,l=t(\"id\"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on(\"new-xhr\",function(t){var n=this;n.totalCbs=0,n.called=0,n.cbTime=0,n.end=r,n.ended=!1,n.xhrGuids={},n.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener(\"progress\",function(t){n.lastSize=t.loaded},!1)}),f.on(\"open-xhr-start\",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on(\"open-xhr-end\",function(t,n){\"loader_config\"in NREUM&&\"xpid\"in NREUM.loader_config&&this.sameOrigin&&n.setRequestHeader(\"X-NewRelic-ID\",NREUM.loader_config.xpid)}),f.on(\"send-xhr-start\",function(t,n){var e=this.metrics,r=t[0],o=this;if(e&&r){var i=h(r);i&&(e.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{\"abort\"===t.type&&(o.params.aborted=!0),(\"load\"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||\"function\"!=typeof n.onload))&&o.end(n)}catch(e){try{f.emit(\"internal-error\",[e])}catch(r){}}};for(var s=0;s<d;s++)n.addEventListener(u[s],this.listener,!1)}),f.on(\"xhr-cb-time\",function(t,n,e){this.cbTime+=t,n?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&\"function\"==typeof e.onload||this.end(e)}),f.on(\"xhr-load-added\",function(t,n){var e=\"\"+l(t)+!!n;this.xhrGuids&&!this.xhrGuids[e]&&(this.xhrGuids[e]=!0,this.totalCbs+=1)}),f.on(\"xhr-load-removed\",function(t,n){var e=\"\"+l(t)+!!n;this.xhrGuids&&this.xhrGuids[e]&&(delete this.xhrGuids[e],this.totalCbs-=1)}),f.on(\"addEventListener-end\",function(t,n){n instanceof m&&\"load\"===t[0]&&f.emit(\"xhr-load-added\",[t[1],t[2]],n)}),f.on(\"removeEventListener-end\",function(t,n){n instanceof m&&\"load\"===t[0]&&f.emit(\"xhr-load-removed\",[t[1],t[2]],n)}),f.on(\"fn-start\",function(t,n,e){n instanceof m&&(\"onload\"===e&&(this.onload=!0),(\"load\"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on(\"fn-end\",function(t,n){this.xhrCbStart&&f.emit(\"xhr-cb-time\",[a.now()-this.xhrCbStart,this.onload,n],n)})}},{}],11:[function(t,n,e){n.exports=function(t){var n=document.createElement(\"a\"),e=window.location,r={};n.href=t,r.port=n.port;var o=n.href.split(\"://\");!r.port&&o[1]&&(r.port=o[1].split(\"/\")[0].split(\"@\").pop().split(\":\")[1]),r.port&&\"0\"!==r.port||(r.port=\"https\"===o[0]?\"443\":\"80\"),r.hostname=n.hostname||e.hostname,r.pathname=n.pathname,r.protocol=o[0],\"/\"!==r.pathname.charAt(0)&&(r.pathname=\"/\"+r.pathname);var i=!n.protocol||\":\"===n.protocol||n.protocol===e.protocol,a=n.hostname===document.domain&&n.port===e.port;return r.sameOrigin=i&&(!n.hostname||a),r}},{}],12:[function(t,n,e){function r(){}function o(t,n,e){return function(){return i(t,[f.now()].concat(s(arguments)),n?null:this,e),n?void 0:this}}var i=t(\"handle\"),a=t(15),s=t(16),c=t(\"ee\").get(\"tracer\"),f=t(\"loader\"),u=NREUM;\"undefined\"==typeof window.newrelic&&(newrelic=u);var d=[\"setPageViewName\",\"setCustomAttribute\",\"setErrorHandler\",\"finished\",\"addToTrace\",\"inlineHit\",\"addRelease\"],l=\"api-\",p=l+\"ixn-\";a(d,function(t,n){u[n]=o(l+n,!0,\"api\")}),u.addPageAction=o(l+\"addPageAction\",!0),u.setCurrentRouteName=o(l+\"routeName\",!0),n.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,n){var e={},r=this,o=\"function\"==typeof n;return i(p+\"tracer\",[f.now(),t,e],r),function(){if(c.emit((o?\"\":\"no-\")+\"fn-start\",[f.now(),r,o],e),o)try{return n.apply(this,arguments)}finally{c.emit(\"fn-end\",[f.now()],e)}}}};a(\"setName,setAttribute,save,ignore,onEnd,getContext,end,get\".split(\",\"),function(t,n){h[n]=o(p+n)}),newrelic.noticeError=function(t){\"string\"==typeof t&&(t=new Error(t)),i(\"err\",[t,f.now()])}},{}],13:[function(t,n,e){n.exports=function(t){if(\"string\"==typeof t&&t.length)return t.length;if(\"object\"==typeof t){if(\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if(\"undefined\"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!(\"undefined\"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(n){return}}}},{}],14:[function(t,n,e){var r=0,o=navigator.userAgent.match(/Firefox[\\/\\s](\\d+\\.\\d+)/);o&&(r=+o[1]),n.exports=r},{}],15:[function(t,n,e){function r(t,n){var e=[],r=\"\",i=0;for(r in t)o.call(t,r)&&(e[i]=n(r,t[r]),i+=1);return e}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],16:[function(t,n,e){function r(t,n,e){n||(n=0),\"undefined\"==typeof e&&(e=t?t.length:0);for(var r=-1,o=e-n||0,i=Array(o<0?0:o);++r<o;)i[r]=t[n+r];return i}n.exports=r},{}],17:[function(t,n,e){n.exports={exists:\"undefined\"!=typeof window.performance&&window.performance.timing&&\"undefined\"!=typeof window.performance.timing.navigationStart}},{}],18:[function(t,n,e){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t(\"ee\"),i=t(16),a=\"nr@original\",s=Object.prototype.hasOwnProperty,c=!1;n.exports=function(t,n){function e(t,n,e,o){function nrWrapper(){var r,a,s,c;try{a=this,r=i(arguments),s=\"function\"==typeof e?e(r,a):e||{}}catch(f){l([f,\"\",[r,a,o],s])}u(n+\"start\",[r,a,o],s);try{return c=t.apply(a,r)}catch(d){throw u(n+\"err\",[r,a,d],s),d}finally{u(n+\"end\",[r,a,c],s)}}return r(t)?t:(n||(n=\"\"),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,n,o,i){o||(o=\"\");var a,s,c,f=\"-\"===o.charAt(0);for(c=0;c<n.length;c++)s=n[c],a=t[s],r(a)||(t[s]=e(a,f?s+o:o,i,s))}function u(e,r,o){if(!c||n){var i=c;c=!0;try{t.emit(e,r,o,n)}catch(a){l([a,e,r,o])}c=i}}function d(t,n){if(Object.defineProperty&&Object.keys)try{var e=Object.keys(t);return e.forEach(function(e){Object.defineProperty(n,e,{get:function(){return t[e]},set:function(n){return t[e]=n,n}})}),n}catch(r){l([r])}for(var o in t)s.call(t,o)&&(n[o]=t[o]);return n}function l(n){try{t.emit(\"internal-error\",n)}catch(e){}}return t||(t=o),e.inPlace=f,e.flag=a,e}},{}],ee:[function(t,n,e){function r(){}function o(t){function n(t){return t&&t instanceof r?t:t?c(t,s,i):i()}function e(e,r,o,i){if(!l.aborted||i){t&&t(e,r,o);for(var a=n(o),s=h(e),c=s.length,f=0;f<c;f++)s[f].apply(a,r);var d=u[y[e]];return d&&d.push([g,e,r,a]),a}}function p(t,n){v[t]=h(t).concat(n)}function h(t){return v[t]||[]}function m(t){return d[t]=d[t]||o(e)}function w(t,n){f(t,function(t,e){n=n||\"feature\",y[e]=n,n in u||(u[n]=[])})}var v={},y={},g={on:p,emit:e,get:m,listeners:h,context:n,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var s=\"nr@context\",c=t(\"gos\"),f=t(15),u={},d={},l=n.exports=o();l.backlog=u},{}],gos:[function(t,n,e){function r(t,n,e){if(o.call(t,n))return t[n];var r=e();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(t,n,e){function r(t,n,e,r){o.buffer([t],r),o.emit(t,n,e)}var o=t(\"ee\").get(\"handle\");n.exports=r,r.ee=o},{}],id:[function(t,n,e){function r(t){var n=typeof t;return!t||\"object\"!==n&&\"function\"!==n?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i=\"nr@id\",a=t(\"gos\");n.exports=r},{}],loader:[function(t,n,e){function r(){if(!x++){var t=b.info=NREUM.info,n=l.getElementsByTagName(\"script\")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&n))return u.abort();f(y,function(n,e){t[n]||(t[n]=e)}),c(\"mark\",[\"onload\",a()+b.offset],null,\"api\");var e=l.createElement(\"script\");e.src=\"https://\"+t.agent,n.parentNode.insertBefore(e,n)}}function o(){\"complete\"===l.readyState&&i()}function i(){c(\"mark\",[\"domContent\",a()+b.offset],null,\"api\")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=t(\"handle\"),f=t(15),u=t(\"ee\"),d=window,l=d.document,p=\"addEventListener\",h=\"attachEvent\",m=d.XMLHttpRequest,w=m&&m.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var v=\"\"+location,y={beacon:\"bam.nr-data.net\",errorBeacon:\"bam.nr-data.net\",agent:\"js-agent.newrelic.com/nr-1026.min.js\"},g=m&&w&&w[p]&&!/CriOS/.test(navigator.userAgent),b=n.exports={offset:s,now:a,origin:v,features:{},xhrWrappable:g};t(12),l[p]?(l[p](\"DOMContentLoaded\",i,!1),d[p](\"load\",r,!1)):(l[h](\"onreadystatechange\",o),d[h](\"onload\",r)),c(\"mark\",[\"firstbyte\",s],null,\"api\");var x=0,E=t(17)},{}]},{},[\"loader\",2,10,4,3]);</script>\n    \n        <meta name=\"viewport\" content=\"width=device-width\">\n    <meta name=\"robots\" content=\"noindex, nofollow\">\n    \n    <title>Webjet Travel</title>\n    <link href=\"//fonts.googleapis.com/css?family=Roboto:400,500,700,400italic,500italic,700italic\" rel=\"stylesheet\" type=\"text/css\">\n    \n    \n    \n<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/Areas/FlightSearch/Content/images/favicon.ico\">\n<link href=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.min.css\" rel=\"stylesheet\" type=\"text/css\">\n<!--[if lt IE 9]>\n    <script src=\"//html5shiv.googlecode.com/svn/trunk/html5.js\"></script>\n<![endif]-->\n<script type=\"text/javascript\" src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\">\n<script type=\"text/javascript\">\n    var url = '/Scripts/jquery-1.11.1.min.js';\n    window.jQuery || document.write('<script src=\"' + url + '\"><\\/script>');\n</script>\n\n<link href=\"/Areas/FlightSearch/Content/styles/main.less?v=2017.04.11.727-Master-R22-29-06\" rel=\"stylesheet\" type=\"text/css\">\n\n\n\n\n    \n    \n<link rel=\"stylesheet\" href=\"https://webjet-nz.inbenta.com/flights/inbenta-replaced.css?1488194800\"><script src=\"https://securepubads.g.doubleclick.net/gpt/pubads_impl_114.js\" async=\"\"></script><script src=\"https://tags.crwdcntrl.net/c/8549/cc_af.js\"></script><link rel=\"prefetch\" href=\"https://tpc.googlesyndication.com/safeframe/1-0-8/html/container.html\"><style type=\"text/css\"></style><script type=\"text/javascript\" charset=\"utf-8\" async=\"\" data-requirecontext=\"_\" data-requiremodule=\"Navigation/Navigation\" src=\"/Areas/FlightSearch/Content/scripts/Navigation/Navigation.js?v=2017.04.11.727-Master-R22-29-06\"></script><script type=\"text/javascript\" charset=\"utf-8\" async=\"\" data-requirecontext=\"_\" data-requiremodule=\"SignIn\\SignIn\" src=\"/Areas/FlightSearch/Content/scripts/SignIn\\SignIn.js?v=2017.04.11.727-Master-R22-29-06\"></script><script type=\"text/javascript\" charset=\"utf-8\" async=\"\" data-requirecontext=\"_\" data-requiremodule=\"Navigation/PageFooter\" src=\"/Areas/FlightSearch/Content/scripts/Navigation/PageFooter.js?v=2017.04.11.727-Master-R22-29-06\"></script></head>\n<body data-session-timeout=\"29\" data-session-timeout-url=\"/FlightSearch/Home/LogOutUserAndRedirectToSessionTimedOut\" data-unhandled-exception-url=\"/FlightSearch/Home/ErrorMessage\">\n    <script>dataLayer = [{\"siteType\":\"desktop\",\"loginState\":\"notloggedin\",\"timestamp\":\"Saturday, 22 April 2017 4:24:29 a.m.\",\"instanceName\":\"WNZ-F02-P0\",\"language\":\"en-NZ\",\"environment\":\"Production\",\"product\":\"flightsonly\",\"currency\":\"NZD\",\"userId\":\"\",\"release\":\"2017.04.11.727-Master-R22-29-06\"}]</script>\n    <!-- New Google Tag Manager -->\n<noscript>&lt;iframe src=\"//www.googletagmanager.com/ns.html?id=GTM-NMZ3GJ\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"&gt;&lt;/iframe&gt;</noscript>\n<script>(function (w, d, s, l, i) {w[l] = w[l] || []; w[l].push({'gtm.start':\n        new Date().getTime(), event: 'gtm.js'}); var f = d.getElementsByTagName(s)[0],\n                                                     j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =\n        '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);\n})(window, document, 'script', 'dataLayer', 'GTM-NMZ3GJ');</script>\n<!-- End Google Tag Manager -->\n<!-- Add subscriber script for modifying dataLayer -->\n<script>\n    $(function() {\n        typeof amplify !== 'undefined' && amplify && amplify.subscribe('updateGoogleDataLayer', function (data) {\n            if (typeof dataLayer !== 'undefined' && typeof data !== 'undefined')\n                dataLayer.push(data);\n        });\n    });\n</script>\n<!-- End Add subscriber script for modifying dataLayer -->\n    \n    <script>dataLayer.push({\"pageCategory\":\"signin\",\"event\":\"pageview\"})</script>\n\n\n    \n\n\n    <div class=\"ui-helper-hidden cdncheck\" style=\"width:0;float:left\"></div>  \n<script type=\"text/javascript\">\n    $(document).ready(function () {\n        // fallback to local files if google api failed to load\n        if ($('.ui-helper-hidden.cdncheck').css('display') != 'none') {\n            $('<link rel=\"stylesheet\" type=\"text/css\" href=\"/Areas/FlightSearch/Content/styles/themes/base/jquery.ui.min.css\" />').appendTo('head');\n        }\n    });\n</script>\n\n    <div class=\"container\" id=\"header-container\">\n        <header id=\"pageHeader\" class=\"header\">\n\n\n\n<div id=\"navigation-panel\" data-use-script-loader=\"true\" data-module=\"Navigation/Navigation\" data-controller=\"renderNavigation\">\n    <header id=\"header-container\">\n        <div id=\"logo\">\n            <a href=\"/\"><img id=\"main-webjet-logo\" src=\"/Areas/FlightSearch/Content/images/TopNav/Webjet_logo_top_left_s1_nz.png\" alt=\"www.webjet.co.nz\" title=\"www.webjet.co.nz\"></a>\n        </div>\n        <div id=\"service-panel\" class=\"hidden-s\">\n            <nav id=\"service-nav\" class=\"hidden-s\">\n                <ul class=\"nav-items\">\n                    <li id=\"my-account\">\n                        <a class=\"sub-nav-link\" href=\"#\">My Account<span class=\"wj-icon wj-caret-down\"></span></a>\n                        <ul class=\"sub-nav\">\n        <li><a href=\"/FlightSearch/User/MyProfile\">Join</a></li>\n    <li>\n<a href=\"/FlightSearch/SignIn/Index\">Log In</a>    </li>\n</ul>\n                    </li>\n\n                        <li id=\"myBooking\">\n                                <a class=\"sub-nav-link\" href=\"#\">Manage Bookings<span class=\"wj-icon wj-caret-down\"></span></a>\n                                                            <ul class=\"sub-nav\">\n                                        <li>\n                                                <a href=\"//www.webjet.co.nz/flights/online-check-in/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon checkinMyFlight\"></span>Online Check-in</a>\n\n                                        </li>\n                                        <li>\n                                                <a href=\"http://www.webjet.co.nz/webjet/change-my-booking/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon changeMyBooking\"></span>Change My Booking</a>\n\n                                        </li>\n                                </ul>\n                        </li>\n                        <li id=\"customerSupport\">\n                                <a class=\"sub-nav-link\" href=\"#\">Customer Support<span class=\"wj-icon wj-caret-down\"></span></a>\n                                                            <ul class=\"sub-nav\">\n                                        <li>\n                                                <a href=\"//www.webjet.co.nz/support/\" target=\"_blank\" data-hideleavingnotification=\"true\"><span class=\"wj-icon contactUs\"></span>Contact Us</a>\n\n                                        </li>\n                                        <li>\n                                                <a href=\"//www.webjet.co.nz/travel-toolbox/how-to-book/\" target=\"_blank\" data-hideleavingnotification=\"true\"><span class=\"wj-icon howToBook\"></span>How to Book</a>\n\n                                        </li>\n                                </ul>\n                        </li>\n                        <li id=\"myCart\">\n                                <a href=\"/FlightSearch/Review/Index?area=FlightSearch\"><span class=\"wj-icon wj-cart\"></span>My Cart</a>\n                                                    </li>\n                </ul>\n            </nav>\n<ul class=\"sub-nav\">\n        <li><a href=\"/FlightSearch/User/MyProfile\">Join</a></li>\n    <li>\n<a href=\"/FlightSearch/SignIn/Index\">Log In</a>    </li>\n</ul>\n        </div>\n\n                <div class=\"hidden-s\">\n                    \n\n    <div id=\"ask-a-question\" data-use-script-loader=\"true\">\n        <input id=\"oa_question\" class=\"standard standard-inbenta\" name=\"Question\" maxlength=\"250\" value=\"\" size=\"25\" type=\"text\" placeholder=\"Type a question\" style=\"display: none;\">\n        <button class=\"btn-standard\" name=\"Go\" id=\"oa_submit\" style=\"display: none;\">Ask</button>\n    <div class=\"inbenta-typeahead-faq\"><input id=\"oa_question\" class=\"standard standard-inbenta inb-tt-input\" name=\"Question\" maxlength=\"101\" value=\"\" size=\"25\" type=\"text\" placeholder=\"Type a question\" autocomplete=\"off\" spellcheck=\"false\" dir=\"auto\"><pre aria-hidden=\"true\" style=\"position: absolute; visibility: hidden; white-space: pre; font-family: Roboto, Arial, sans-serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: auto; text-transform: none;\"></pre><div class=\"inb-tt-menu inb-tt-empty\"><div class=\"inb-tt-dataset inb-tt-dataset-title\"></div></div></div><button class=\"btn-standard\" name=\"Go\" id=\"oa_submit\">Ask</button></div>\n                <div id=\"longUQHeader\" class=\"inbenta-alert-header\" style=\"display:none\"><span>It appears like you may need to seek assistance from our 24/7 customer support team. We suggest you <a href=\"https://flights.webjet.co.nz/support\">chat</a> with one of our experts.</span></div><div id=\"invalid-web\" class=\"inbenta-alert-header\" style=\"display:none\" \"=\"\"><span>This is not an acceptable question. Please ask another question.</span></div></div>\n                    <script src=\"//webjet-nz.inbenta.com/flights/jsonp/inbenta.js?site=Webjet-NZ\"></script>\n\n    </header>\n    \n    <nav id=\"main-nav\" class=\"hidden-s\">\n        <ul class=\"nav-items\">\n                <li class=\"important active\">\n                        <a href=\"/FlightSearch\" data-hideleavingnotification=\"true\"><span class=\"wj-icon flights\"></span>FLIGHTS</a>\n\n                </li>\n                <li class=\"important\">\n                        <a href=\"//hotels.webjet.co.nz\" data-hideleavingnotification=\"true\"><span class=\"wj-icon hotels\"></span>HOTELS</a>\n\n                </li>\n                <li class=\"important\">\n                        <a href=\"https://cars.webjet.co.nz/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon car-hire\"></span>CAR HIRE</a>\n\n                </li>\n                <li class=\"important\">\n                        <a href=\"https://cruises.webjet.co.nz\" data-hideleavingnotification=\"true\"><span class=\"wj-icon cruises\"></span>CRUISES</a>\n\n                </li>\n                <li class=\"important\">\n                        <a href=\"https://motorhomes.webjet.co.nz\" data-hideleavingnotification=\"true\"><span class=\"wj-icon motorhomes\"></span>Motorhomes</a>\n\n                </li>\n                                <li>\n                            <a href=\"https://www.webjet.co.nz/insurance/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon insurance\"></span>Insurance</a>\n\n                    </li>\n                    <li>\n                            <a href=\"//www.webjet.co.nz/flights/online-check-in/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon checkin\"></span>Check-in</a>\n\n                    </li>\n                    <li>\n                            <a href=\"/FlightSearch/Voucher/SelectVoucher\" data-hideleavingnotification=\"true\"><span class=\"wj-icon vouchers\"></span>Vouchers</a>\n\n                    </li>\n                    <li>\n                            <a href=\"//www.webjet.co.nz/flights/international-specials/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon specials\"></span>Specials</a>\n\n                    </li>\n                    <li>\n                            <a href=\"https://www.webjet.co.nz/webjet/webjetmail/\" data-hideleavingnotification=\"true\"><span class=\"wj-icon newsletter\"></span>Newsletter</a>\n\n                    </li>\n        </ul>\n    </nav>\n</div>\n\n\n\n\n        </header>\n        <div id=\"pop-up-anchor\"></div>\n\n        <section class=\"content\">\n\n            \n\n\n<div style=\"padding-top: 20px;\"></div><div id=\"login-control\" class=\"login-no-guest\" data-use-script-loader=\"true\" data-module=\"SignIn\\SignIn\" data-controller=\"index\">\n    <div class=\"main-header\">\n        <h1>Log in</h1>\n    </div>\n    <div class=\"login-container\">\n\n<form action=\"/FlightSearch/SignIn/SignIn\" id=\"SignInNoGuestForm\" method=\"post\" novalidate=\"\">            <div class=\"login-background\">\n                <div class=\"forgot-password-in-progress\">\n                </div>\n                <h2>Log in to your Webjet account</h2>\n                <div id=\"invalid-login\" class=\"alert alert-error\">\n                    Your email address or password is incorrect.\n                    <br>\n                    Please try again.\n                </div>\n                <label for=\"Email\">EMAIL ADDRESS</label>\n                <input autofocus=\"\" class=\"emailId\" data-val=\"true\" data-val-email=\"Please enter a valid email address to continue.\" data-val-required=\"Please enter your email address to continue.\" id=\"Email\" name=\"Email\" type=\"text\" value=\"\">\n                <span class=\"field-validation-valid\" data-valmsg-for=\"Email\" data-valmsg-replace=\"true\"></span>\n                <label for=\"Email\">PASSWORD</label>\n\n                <input type=\"password\" name=\"Password\" id=\"password\">\n                <span class=\"field-validation-valid\" data-valmsg-for=\"Password\" data-valmsg-replace=\"true\"></span>\n                <div class=\"remember-me\">\n                    <label for=\"RememberLogin\">\n                        Remember me\n                    </label>\n                    <input data-val=\"true\" data-val-required=\"The RememberLogin field is required.\" id=\"RememberLogin\" name=\"RememberLogin\" type=\"checkbox\" value=\"true\"><input name=\"RememberLogin\" type=\"hidden\" value=\"false\">\n                </div>\n                <span>\n                    <a href=\"#\" class=\"no-guest\" id=\"forgot-password\" data-forgot-password-uri=\"/FlightSearch/SignIn/ForgotPassword\">Forgot Password </a>\n                </span>\n\n                <input type=\"submit\" class=\"btn\" value=\"Log in\">\n                <span style=\"clear:both; display: block;\"></span>\n\n            </div>\n</form>    </div>\n    <div class=\"join-container\">\n        <h2>\n            New Member?</h2>\n        <p>\n            Join Webjet now, storing your details to save time and effort for your next booking.\n        </p>\n        <div class=\"join-now\">\n            <a class=\"btn join-btn\" href=\"/FlightSearch/User/MyProfile\">Join Now</a>\n        </div>\n        <span style=\"clear:both; display: block;\"></span>\n\n    </div>\n    <span style=\"clear:both; display: block;\"></span>\n</div>\n\n\n        </section>\n\n            <section class=\"side-bar\">\n\n<div class=\"booking-guarantee-summary-panel-container\">\n\n<script type=\"text/javascript\">\n    var googletag = googletag || {};\n    googletag.cmd = googletag.cmd || [];\n    (function () {\n        var gads = document.createElement('script');\n        gads.async = true;\n        gads.type = 'text/javascript';\n        var useSSL = 'https:' == document.location.protocol;\n        gads.src = (useSSL ? 'https:' : 'http:') +\n            '//www.googletagservices.com/tag/js/gpt.js';\n        var node = document.getElementsByTagName('script')[0];\n        node.parentNode.insertBefore(gads, node);\n    })();\n</script>\n\n<script type=\"text/javascript\">\n\n\n\n    googletag.cmd.push(function () {\n        googletag.pubads().enableSingleRequest();\n        googletag.enableServices();\n    });\n\n</script>\n\n    <article>\n    </article>\n        <article id=\"bookingPriceGarenteePanel\" data-update-bpg-url=\"/FlightSearch/FlightSearch/PriceHeldTimer?SearchId=\">\n            \n\n        </article>\n\n    <article id=\"bookingSummaryPanel\">\n        \n\n\n    </article>\n</div>\n\n<article>\n\n<div class=\"ad-banner wide-skyscraper col-m-0 col-s-0 col-ml-0\">\n        <div class=\"ad-banner wide-skyscraper\">\n            \n        </div>\n</div></article>\n                \n            </section>\n\n        <footer class=\"footer\">\n\n<div class=\"footer-container\" data-use-script-loader=\"true\" data-module=\"Navigation/PageFooter\" data-controller=\"renderPageFooter\">\n    <ul id=\"footer\">\n        <li class=\"col col-s-12\">\n            <a href=\"#\" class=\"footer-header\">More info</a>\n            <ul class=\"footer-list col-s-0\">\n                <li><a href=\"//www.webjet.co.nz/webjet/\" target=\"_blank\">About Webjet</a></li>\n                <li><a href=\"//www.webjet.co.nz/travel/\" target=\"_blank\">Travel Toolbox</a></li>\n                <li><a href=\"http://investor.webjet.com.au/\" target=\"_blank\">Investors</a></li>\n                <li><a href=\"//www.webjet.co.nz/webjet/privacy/\" target=\"_blank\">Privacy/Security</a></li>\n                <li><a href=\"//www.webjet.co.nz/webjet/advertise-with-webjet/\" target=\"_blank\">Advertise on Webjet</a></li>\n                \n                <li><a href=\"//www.webjet.co.nz/webjet/competitions/\" target=\"_blank\">Competitions</a></li>\n                <li><a href=\"https://www.webjet.co.nz/travel-toolbox/app/\" target=\"_blank\">MobileSite | Apps</a></li>\n            </ul>\n        </li>\n        <li class=\"col col-s-12\">\n            <a href=\"#\" class=\"footer-header\">Products</a>\n            <ul class=\"footer-list col-s-0\">\n                <li><a href=\"https://www.webjet.co.nz/flights/\" target=\"_blank\">Cheap Flights</a></li>\n                <li><a href=\"https://hotels.webjet.co.nz/\" target=\"_blank\">Hotels</a></li>\n                \n                <li><a href=\"https://cars.webjet.co.nz/\" target=\"_blank\">Car hire</a></li>\n                <li><a href=\"https://cruises.webjet.co.nz\" target=\"_blank\">Cruises</a></li>\n                \n                <li><a href=\"https://motorhomes.webjet.co.nz\" target=\"_blank\">Motorhomes</a></li>\n                <li><a href=\"https://www.webjet.co.nz/insurance/\" target=\"_blank\">Travel Insurance</a></li>\n                \n            </ul>\n        </li>\n        <li class=\"col col-s-12\">\n            <a href=\"#\" class=\"footer-header\">International sites</a>\n            <ul class=\"footer-list col-s-0\">\n                <li><a href=\"http://www.webjet.com/\" target=\"_blank\">Webjet America</a></li>\n                <li><a href=\"http://www.webjet.com.au/\" target=\"_blank\">Webjet Australia</a></li>\n                <li><a href=\"http://www.webjet.co.uk/\" target=\"_blank\">Webjet United Kingdom</a></li>\n                <li><a href=\"http://www.webjet.ca/\" target=\"_blank\">Webjet Canada</a></li>\n                <li><a href=\"http://www.webjet.com.mx/\" target=\"_blank\">Webjet Mexico</a></li>\n            </ul>\n        </li>\n        <li class=\"col col-s-12\">\n            <a href=\"#\" class=\"footer-header\">Customer support</a>\n            <ul class=\"footer-list col-s-0\">\n                <li><a href=\"//www.webjet.co.nz/support/\" target=\"_blank\">Contact us</a></li>\n                <li><a href=\"//www.webjet.co.nz/travel-toolbox/how-to-book/\" target=\"_blank\">How to book</a></li>\n                <li id=\"change-booking\">\n                    <div>Online booking changes are available 24/7</div>\n                    <a class=\"btn-standard\" href=\"http://www.webjet.co.nz/webjet/change-my-booking/\">Change Booking</a>\n                </li>\n            </ul>\n        </li>\n        <li class=\"col col-s-12\">\n            <a href=\"#\" class=\"footer-header\">Connect with us</a>\n            <ul class=\"footer-list social col-s-0\">\n                <li><a href=\"https://www.facebook.com/WebjetNZ\" target=\"_blank\"><span class=\"wj-icon wj-facebook\"></span>Facebook</a></li>\n                <li><a href=\"https://twitter.com/Webjet_NZ\" target=\"_blank\"><span class=\"wj-icon wj-twitter\"></span>Twitter</a></li>\n                <li><a href=\"https://plus.google.com/+WebjetNZ/\" target=\"_blank\"><span class=\"wj-icon wj-googleplus\"></span>Google+</a></li>\n                \n                \n                <li><a href=\"https://www.webjet.co.nz/webjet/webjetmail/\" target=\"_blank\"><span class=\"wj-icon wj-newsletter\"></span>Newsletter</a></li>\n            </ul>\n        </li>\n    </ul>\n</div>\n\n\n\n\n<div class=\"invisible-text\">\n    <span>Development zone: 2017.04.11.727-Master-R22-29-06 </span>\n    <span>Page generated at: Saturday, 22 April 2017 4:24:29 a.m. on WNZ-F02-P0 </span>\n    <span>Request from: /FlightSearch/SignIn/Index </span>\n</div>\n\n\n        </footer>\n    </div>\n\n<script type=\"text/javascript\">\n    var contentPath = \"/Areas/FlightSearch/Content/\";\n    require = {\n        baseUrl: '/Areas/FlightSearch/Content/scripts/',\n        paths: {\n            'underscore': 'libs/underscore',\n            'Zuji': '/Areas/FlightSearch/Content/Zuji/scripts',\n            'hotels': '/Areas/Hotels/Content/scripts',\n            'cars': '/Areas/Cars/Content/scripts',\n            'angular': '/Angular',\n            'Scripts': '/Scripts'\n        }\n    };\n</script>\n\n<script src=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js\"></script>\n<script>\n    window.jQuery.ui || document.write('<script src=\"/Scripts/jquery-ui-1.11.4.min.js\"><\\/script>');\n</script>\n\n<script src=\"//maxcdn.bootstrapcdn.com/bootstrap/2.0.4/js/bootstrap.min.js\"></script>\n<script>\n    window.$.fn.modal || document.write('<script src=\"/Areas/FlightSearch/Content/scripts/libs/bootstrap.min.js\"><\\/script>');\n</script>\n\n<script src=\"//ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js\"></script>\n<script>\n    window.angular || document.write('<script src=\"/Scripts/angular.min.js\"><\\/script>');\n</script>\n\n<script src=\"/Areas/FlightSearch/Scripts/mainJs?v=TEHXptA7-NCMjYi9m6Wh7evUyWv9Mb8taRIPG8u4QqM1\"></script><script type=\"text/javascript\" id=\"\">(function(){if(!google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm1').match(/(local|uatalpha|uatbeta|devci)\\.webjet\\.co/))var m=setInterval(function(){function f(b,a,c){b=d+b;c=\"; expires\\x3d\"+c.toGMTString();var h=\"; domain\\x3d\"+k;document.cookie=b+\"\\x3d\"+a+c+h+\"; path\\x3d/\"}function g(b){var a=d+b,a=new RegExp(\"[; ]\"+a+\"\\x3d([^\\\\s;]*)\"),a=(\" \"+document.cookie).match(a);if(b&&a)return unescape(a[1])}function l(){$.each(Object.keys(b),function(e,a){var c=g(a);if(void 0===c){if(void 0===b[a])return!0;f(a,b[a].value,b[a].date);g(a)}else{if(void 0===\nb[a])return c=a,c=d+c,document.cookie=c+\"\\x3d; expires\\x3dThu, 01 Jan 1970 00:00:01 GMT; path\\x3d/\",!0;f(a,c,b[a].date)}})}if(void 0!=jQuery){clearInterval(m);var b=[],d=\"wjab_\",k=\"AU\"==google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm2')?\".webjet.com.au\":\".webjet.co.nz\",e=new Date;b.upa={date:new Date(e.getTime()+2592E6),value:75<=Math.round(100*Math.random())?\"A(Show)\":\"B(Hide)\"};b.plus_button={date:new Date(e.getTime()+2592E6),value:[\"A(Show)\",\"B(Hide)\"][Math.floor(2*Math.random())]};l()}},1E3)})();</script>\n\n<script type=\"text/javascript\" id=\"\">window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);(function(){var b=document.createElement(\"script\");b.type=\"text/javascript\";b.async=!0;var a,c=(a=location.href.match(/\\bkxsrc=([^&]+)/))&&decodeURIComponent(a[1]);b.src=/^https?:\\/\\/([a-z0-9_\\-\\.]+\\.)?krxd\\.net(:\\d{1,5})?\\//i.test(c)?c:\"disable\"===c?\"\":(\"https:\"===location.protocol?\"https:\":\"http:\")+\"//cdn.krxd.net/controltag?confid\\x3dIb52yQ5u\";a=document.getElementsByTagName(\"script\")[0];a.parentNode.insertBefore(b,a)})();</script>\n<script type=\"text/javascript\" id=\"\">(function(d,f){var h=!!function(b,c){try{return(c=localStorage).setItem(b,b)|!c.removeItem(b)}catch(a){}}(\"_\");window.gtm=window.gtm||{};window.gtm.hasLocalStorage=h;console.log(\"Access to storage is\",h);(function(){window.addEventListener(\"beforeunload\",function(){window.dataLayer.push({event:\"unload-event\",timeOnPage:(new Date).getTime()-google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm3')})})})();(function(){var b,c=function(){b||(b=!0,dataLayer.push({event:\"print-page\"}))};if(window.matchMedia){var a=window.matchMedia(\"print\");\na.addListener(function(a){a.matches||c()})}window.onafterprint=c;f(d).keydown(function(a){80==a.keyCode&&(a.ctrlKey||a.metaKey)&&f.browser.opera&&c()})})();(function(){function b(b){b!==a&&(a=b,dataLayer.push({event:\"ga-event\",eventCategory:\"general - device rotation\",eventAction:\"landscape\",eventLabel:void 0,eventValue:void 0}))}var c=void 0!=screen.orientation?!0:!1,a;c?(a=screen.orientation.angle,window.addEventListener(\"orientationchange\",function(){b(screen.orientation.angle)},!1)):\n(a=window.orientation,window.addEventListener(\"orientationchange\",function(){b(window.orientation)},!1))})();(function(){var b=\"change\",c=function(){return function(a){dataLayer.push({event:\"event.\"+a.type,\"gtm.element\":a.target,\"gtm.elementClasses\":a.target.className||\"\",\"gtm.elementId\":a.target.id||\"\",\"gtm.elementTarget\":a.target.target||\"\",\"gtm.elementUrl\":a.target.href||a.target.action||\"\",\"gtm.originalEvent\":a})}};d.addEventListener?d.addEventListener(b,c,!1):d.attachEvent&&d.attachEvent(\"on\"+\nb,c)})();(function(){window.gtm_active_tab=d.hasFocus();window.addEventListener(\"blur\",function(){window.gtm_active_tab=!1});window.addEventListener(\"focus\",function(){window.gtm_active_tab=!0});if(h)var b=setInterval(function(){\"complete\"===d.readyState&&(clearInterval(b),f(d).ready(function(){(function(){function b(a){d.cookie=\"tabOffset\\x3d\"+a+\"; max-age\\x3d1800; domain\\x3d\"+window.location.hostname.match(/[^\\.]+\\.[^\\.]+\\.[^\\.]+$/)[0]+\"; path\\x3d/\"}function a(){for(var a=\"tabOffset\\x3d\",b=d.cookie.split(\";\"),\nc=0;c<b.length;c++){for(var e=b[c];\" \"==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return\"\"}function n(a){d.cookie=\"tabActive\\x3d\"+a+\"; max-age\\x3d1800; domain\\x3d\"+window.location.hostname.match(/[^\\.]+\\.[^\\.]+\\.[^\\.]+$/)[0]+\"; path\\x3d/\"}function m(){for(var a=\"tabActive\\x3d\",b=d.cookie.split(\";\"),c=0;c<b.length;c++){for(var e=b[c];\" \"==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return\"\"}a()||b(0);sessionStorage.getItem(\"tabId\")&&\n(new Date).getTime()>sessionStorage.getItem(\"tabIdExpire\")&&(sessionStorage.removeItem(\"tabId\"),sessionStorage.removeItem(\"tabIdExpire\"));if(sessionStorage.getItem(\"tabId\"))b(a());else{var k=parseInt(m()),g=0,g=d.hasFocus()?-1==k?parseInt(a())+1:0<k?k:parseInt(a())+1:window!=window.top?parseInt(a()):parseInt(a())+1;b(g);sessionStorage.setItem(\"tabId\",g)}sessionStorage.setItem(\"tabIdExpire\",(new Date).getTime()+18E5);d.hasFocus()&&n(sessionStorage.getItem(\"tabId\"));f(window).focus(function(a){n(sessionStorage.getItem(\"tabId\"))});\nf(window).blur(function(a){n(-1)});window==window.top?sessionStorage.setItem(\"gaTabId\",sessionStorage.getItem(\"tabId\")):sessionStorage.setItem(\"gaTabId\",0)})()}))},10)})();(function(b){function c(){1==l&&(l=!1,q=Date.now());clearTimeout(g);g=setTimeout(a,k)}function a(){var a=Date.now(),a=a-q;p+=a;l=!0}function f(){l||(a(),l=!1);1!=h&&(h=!0,window.dataLayer.push({event:\"ga-event\",eventCategory:\"engagement time\",eventAction:\"idle\",eventLabel:void 0,eventValue:Date.now()-e-p}),window.dataLayer.push({event:\"ga-event\",\neventCategory:\"engagement time\",eventAction:\"active\",eventLabel:void 0,eventValue:p}))}if(1==google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm4'))dataLayer.push({event:\"ga-event\",eventCategory:\"iframe - page denied\",eventAction:\"https:\\/\\/flights.webjet.co.nz\\/FlightSearch\\/SignIn\\/Index\",eventLabel:window.location!=window.parent.location?d.referrer:d.location.href,eventValue:void 0});else{var m=Math.floor(10*Math.random());if(0==m){var k=1E4,g,l=!1,h=!1,p=0,e=m=Date.now(),q=m;b.addEventListener(\"mousedown\",c);b.addEventListener(\"keydown\",c);b.addEventListener(\"scroll\",\nc);b.addEventListener(\"mousemove\",c);b.addEventListener(\"touchstart\",c);b.addEventListener(\"touchmove\",c);b.addEventListener(\"touchend\",c);b.addEventListener(\"beforeunload\",f);g=setTimeout(a,k)}}})(d)})(document,jQuery);</script><script type=\"text/javascript\" id=\"\">(function(){if(\"undefined\"==typeof ga)try{(function(a,c,g,f,b,d,e){a.GoogleAnalyticsObject=b;a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)};a[b].l=1*new Date;d=c.createElement(g);e=c.getElementsByTagName(g)[0];d.async=1;d.src=f;e.parentNode.insertBefore(d,e)})(window,document,\"script\",\"//www.google-analytics.com/analytics.js\",\"ga\"),ga(\"create\",\"UA-46076570-2\",\"auto\"),\"undefined\"!==typeof sessionStorage&&(ga(\"set\",\"referrer\",sessionStorage.getItem(\"distil_referrer\")||document.referrer),\nsessionStorage.removeItem(\"distil_referrer\"))}catch(a){var c=document.createElement(\"img\");c.src=\"https://www.google-analytics.com/collect?v\\x3d1\\x26t\\x3devent\\x26tid\\x3dUA-46076570-2\\x26cid\\x3d555\\x26ec\\x3duatracker\\x26ea\\x3dflights.webjet.co.nz\\/FlightSearch\\/SignIn\\/Index\";var f=document.getElementById(\"header\");f.appendChild(c)}})();</script><script type=\"text/javascript\" id=\"\">(function(a){var c=\"AU\"==google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm5')?8548:8549,b=a.createElement(\"script\");b.setAttribute(\"src\",\"https://tags.crwdcntrl.net/c/\"+c+\"/cc_af.js\");a.head.appendChild(b)})(document);</script>\n\n\n\n<script type=\"text/javascript\">\n    require.config({\n        urlArgs: \"v=2017.04.11.727-Master-R22-29-06\"\n    });\n   \n</script>\n<script type=\"text/javascript\" src=\"/Scripts/advertisement.js\"></script>\n\n\n    \n\n\n<div id=\"leaving-modal\" class=\"modal hide\"><div class=\"modal-header\"><h3>Please note</h3></div><div class=\"modal-body\"><h5></h5></div><div class=\"modal-footer\"><a href=\"#\" id=\"modal-continue\" class=\"btn btn-primary\">Continue</a><a href=\"#\" id=\"modal-cancel\" class=\"btn\" data-dismiss=\"modal\">Cancel</a></div></div><div class=\"kxhead\" data-id=\"Ib52yQ5u\" style=\"display:none !important;\"><span class=\"kxtag kxinvisible\" data-id=\"28044\"><script>\r\n// this tag is intentionally blank\r\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28045\"></span><span class=\"kxtag kxinvisible\" data-id=\"28054\"><script>\n(function(){\n        var kuid = Krux('get', 'user');\n        if (kuid) {\n            var prefix = location.protocol == 'https:' ? \"https:\" : \"http:\";\n            var kurl = prefix + '//beacon.krxd.net/usermatch.gif?adnxs_uid=$UID';\n            var appnexus_url = '//ib.adnxs.com/getuid?' + kurl\n            var i = new Image();\n            i.src = appnexus_url;\n        }\n})();\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28063\"><script>\n(function(){\n  var kuid = Krux('get', 'user');\n  var cbust = Math.round(new Date().getTime() / 1000);\n  if (kuid) {\n    Krux('require:http').pixel({\n      url: \"//ib.adnxs.com/pxj\",\n      data: {\n          bidder: '140',\n          seg: '381342',\n          action: \"setuid('\" + kuid + \"')\",\n          bust: cbust\n      }});\n  }\n  })();\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28064\"><script>\n(function() {\n  if (Krux('get', 'user') != null) {\n      new Image().src = 'https://usermatch.krxd.net/um/v2?partner=google';\n  }\n})();\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28070\"><script type=\"text/javascript\">\r\n(function() {\r\n\t// to distinguish among the sites\r\n\tvar prefix = 'webjet';\r\n\tif(window.location.hostname.match(/zuji/i)){\r\n\t\tprefix = 'zuji';\r\n\t}\r\n\t// NZ get an additional prefix\r\n\tvar loc_match = window.location.hostname.match(/\\.(nz|hk|sg)$/i);\r\n\tif(loc_match && loc_match[1]){\r\n\t\tprefix += '_'+loc_match[1];\r\n\t}\r\n\t// the same control tag is deployed over many sites with different control tags\r\n\t// hence the choices here\r\n\tfunction toScrape(type) {\r\n\t\tswitch (type){\r\n\t\t\tcase 'flights':\r\n\t\t\t\treturn [\r\n\t\t\t\t\t// common to every page\r\n\t\t\t\t\t\"siteType\",\"environment\",\"loginState\",\"timeStamp\",\"instanceName\",\"language\",\"product\",\"currency\",\"userId\",\r\n\t\t\t\t\t// specific to certain pages (i.e. dependent on user actions)\r\n\t\t\t\t\t\"event\",\"pageCategory\",\"resultsType\",\"daysToDeparture\",\"flightCategory\",\"tripType\",\"cabin\",\"resultsReturned\",\r\n\t\t\t\t\t\"inboundFaresReturned\",\"outboundFaresReturned\",\"inboundFaresMinPrice\",\"inboundFaresMaxPrice\",\"outboundFaresMinPrice\",\"outboundFaresMaxPrice\",\r\n\t\t\t\t\t\"passengerNumber\",\"passengerNumberChild\",\"passengerNumberInfant\",\r\n\t\t\t\t\t\"inputOrigin\",\"inputDestination\",\"originCity\",\"destinationCity\",\"depDate\",\"retDate\",\"airline\",\r\n\t\t\t\t\t\"conversionValue\",\"referringUrl\",\"transactionId\",\"transactionTotal\",\"transactionProducts\",\"originAirportCodeSupplied\",\"destinationAirportCodeSupplied\",\"inFlybuyMode\",\"isFromIframe\",\"isFromSidePanel\"\r\n\t\t\t\t];\r\n\t\t\tcase 'exclusives':\r\n\t\t\t\treturn [\"status\",\"environment\",\"language\",\"product\",\"loginState\",\"testVariation\",\"conversionValue\",\"coupon\",\"discountValue\",\"dealType\",\"pageCategory\",\"productId\",\"transactionStatus\",\"transactionTax\",\"transactionTotal\"];\r\n\t\t\tcase 'hotels':\r\n\t\t\t\treturn [\"loginState\",\"product\",\"pageCategory\",\"flightCategory\",\"passengerNumber\",\"originCity\",\"destinationCity\",\"depDate\",\"retDate\",\"propertyId\",\"ttpId\",\"transactionId\",\"transactionTotal\",\"siteType\",\"language\",\"environment\"];\r\n\t\t\tcase 'packages':\r\n\t\t\t\treturn [\"destinationxity\",\"depDate\",\"retDate\",\"originCity\",\"loginState\",\"siteType\",\"flightCategory\",\"passengerNumber\",\"language\",\"environment\",\"product\",\"pageCategory\",\"conversionValue\",\"transactionId\",\"transactionTotal\",\"transactionProducts\",\"sku\",\"name\",\"category\",\"price\",\"quantity\",\"propertyId\"];\r\n\t\t\tcase 'cars':\r\n\t\t\tcase 'cruises':\r\n\t\t\t// need a default in case of error\t\r\n\t\t\tdefault:\r\n\t\t\t\treturn [\"destinationCity\",\"depDate\",\"retDate\",\"originCity\",\"loginState\",\"siteType\",\"flightCategory\",\"passengerNumber\",\"language\",\"environment\",\"product\",\"pageCategory\",\"conversionValue\",\"transactionId\",\"transactionTotal\",\"transactionProducts\",\"sku\",\"name\",\"category\",\"price\",\"quantity\"];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Use product to determin section\r\n\tfunction getSiteType() {\r\n\t\tvar toReturn = \"flights\",\r\n\t\t\ttempProduct = Krux(\"scrape.dataLayer\", \"product\"),\r\n\t\t\tcmsMatch = location.pathname.match(/specials|insurance/);\r\n\t\t// if is array, join with ',' else join   \t\t\r\n\t\tif (Krux('require:underscore').isArray(tempProduct)){ tempProduct = tempProduct.join(','); }\r\n\t\tif(tempProduct == \"cms\" && cmsMatch){\r\n\t\t\ttoReturn = cmsMatch[0]\r\n\t\t}else if(tempProduct == \"packages\"){\r\n\t\t\ttoReturn = \"holidays\"\r\n\t\t}else if(tempProduct && !tempProduct.match(/cms|flightsonly/i)){\r\n\t\t\ttoReturn = tempProduct;\r\n\t\t}\r\n\t\treturn toReturn;\r\n\t}\r\n\r\n\t// logic here\r\n\tvar site_type = getSiteType();\r\n\r\n\t// since we're adding in a large number of variables, let's shorten this with a loop\r\n\tvar scraping = toScrape(site_type);\r\n\r\n\tvar i,obj;\r\n\r\n\t// grab them all\r\n\tfor(i in scraping){\r\n\t\tif(scraping.hasOwnProperty(i)){\r\n\t\t\t// reset\r\n\t\t\tobj = {};\r\n\r\n\t\t\t// so we can define custom variables\r\n\t\t\tobj['page_attr_'+prefix+'_'+site_type+'_'+scraping[i]] = {'dataLayer': scraping[i]};\r\n\t\t\tKrux('scrape',obj);\r\n\t\t}\r\n\t}\r\n\r\n\t// Using UrlPath 1 to produce page attribute url_path_1\r\n\tKrux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});\r\n\t// Using UrlPath 2 to produce page attribute url_path_2\r\n\tKrux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});\r\n\t// Using UrlPath 3 to produce page attribute url_path_3\r\n\tKrux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});\r\n\r\n\t// Temporary section to scrape values that have not been migrated to the dataLayer yet\r\n\tfunction durationBucket(value){\r\n\t\tvar range = [\r\n\t\t\t\t// Custom ranged buckets and display name\r\n\t\t\t\t{\"lower\":1,\"upper\":1,\"display\":\"1 night\"},\r\n\t\t\t\t{\"lower\":2,\"upper\":3,\"display\":\"2-3 nights\"},\r\n\t\t\t\t{\"lower\":4,\"upper\":5,\"display\":\"4-5 nights\"},\r\n\t\t\t\t{\"lower\":6,\"upper\":7,\"display\":\"6-7 nights\"},\r\n\t\t\t\t{\"lower\":8,\"upper\":14,\"display\":\"1-2 weeks\"},\r\n\t\t\t\t{\"lower\":15,\"upper\":28,\"display\":\"2-4 weeks\"},\r\n\t\t\t\t{\"lower\":29,\"upper\":61,\"display\":\"1-2 months\"},\r\n\t\t\t\t{\"lower\":62,\"upper\":91,\"display\":\"2-3 months\"},\r\n\t\t\t\t{\"lower\":92,\"upper\":182,\"display\":\"3-6 months\"},\r\n\t\t\t\t{\"lower\":183,\"upper\":365,\"display\":\"6-12 months\"},\r\n\t\t\t\t{\"lower\":366,\"display\":\"over 12 months\"}\r\n\t\t\t],\r\n\t\t\tc = 0,\r\n\t\t\tnt = parseInt(value,10);\r\n\t\t// Drop out if not a number\r\n\t\tif(!nt) return;\r\n\t\tfor(;c<range.length;c++){\r\n\t\t\tif(nt>=range[c].lower && (!range[c].upper || nt<=range[c].upper)){\r\n\t\t\t\t// Return the display name rather than the range\r\n\t\t\t\treturn range[c].display;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar tempSet = {};\r\n\r\n\tfunction scrapeCartRange(){\r\n\t\t// Function to parse the cartValue\r\n\t\tvar tempCart = Krux(\"scrape.dataLayer\",\"cartValue\"),\r\n\t\t\tcartValue = tempCart ? parseInt(tempCart.replace('$', '')) : 0,\r\n\t\t\trem = cartValue % 500,\r\n\t\t\tlower = '$' + ( cartValue - rem ),\r\n\t\t\tupper = ( 500 + ( cartValue - rem ) ),\r\n\t\t\tcartStr = lower + ' - ' + upper;\r\n\r\n\t\t// Max cartValue\r\n\t\tif (cartValue >= 10000) cartStr = '$10000+';\r\n\r\n\t\tif(tempCart) tempSet[\"page_attr_\" + prefix + \"_\" + site_type + \"_cartValue\"] = cartStr;\r\n\t}\r\n\r\n\tfunction scrapeTravellerType() {\r\n\t\tvar type,\r\n\t\t\tadult = parseInt(Krux(\"scrape.dataLayer\",\"passengerNumber\") || 0, 10),\r\n\t\t\tchild = parseInt(Krux(\"scrape.dataLayer\",\"passengerNumberChild\"), 10) || parseInt(Krux(\"scrape.dataLayer\",\"passengerNumberInfant\"), 10);\r\n\t\tif (child) {\r\n\t\t\ttype = \"family\";\r\n\t\t} else if (adult === 1) {\r\n\t\t\ttype = \"solo\";\r\n\t\t} else if (adult === 2) {\r\n\t\t\ttype = \"couple\";\r\n\t\t} else if (adult > 2) {\r\n\t\t\ttype = \"group\";\r\n\t\t}\r\n\t\tif (type) tempSet[\"page_attr_\" + prefix + \"_\" + site_type + \"_travellerType\"] = type;\r\n\t}\r\n\r\n\tfunction scrapeDuration() {\r\n\t\t// Using scrape to take depDate and retDate from dataLayer\r\n\t\tvar depDate = new Date(Krux(\"scrape.dataLayer\", \"depDate\")),\r\n\t\t\tretDate = new Date(Krux(\"scrape.dataLayer\", \"retDate\")),\r\n\t\t\t// Nights value from div on page\r\n\t\t\tnights = document.getElementById(\"spNights\");\r\n\r\n\t\tif(site_type == \"flights\" && depDate != \"Invalid Date\" && retDate != \"Invalid Date\"){\r\n\t\t\ttempSet[\"page_attr_\" + prefix + \"_\" + site_type + \"_nights\"] = durationBucket((retDate - depDate) / 86400000);\r\n\t\t} else if (site_type == \"hotels\" && nights){\r\n\t\t\ttempSet[\"page_attr_\" + prefix + \"_\" + site_type + \"_nights\"] = durationBucket(nights.innerHTML);\r\n\t\t}\r\n\t}\r\n\r\n\tscrapeCartRange();\r\n\tscrapeTravellerType();\r\n\tscrapeDuration();\r\n\r\n\tKrux('set', tempSet);\r\n})();\r\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28071\"><script>\r\n(function() {\r\n\r\n    /* Remove jshint warnings temporarily */\r\n    /* jshint -W033,-W088,-W069,-W041 */\r\n\r\n    // to distinguish among the sites\r\n    var prefix = 'webjet';\r\n    var country = 'au';\r\n\r\n    if (window.location.hostname.match(/zuji/i)) {\r\n        prefix = 'zuji';\r\n    }\r\n    // alternate countries defined here\r\n    var country_match = window.location.hostname.match(/\\.(nz|hk|sg)$/i);\r\n    if (country_match && country_match[1] && country_match[1].length > 0) {\r\n        country = country_match[1];\r\n    }\r\n\r\n\r\n    function getSiteType() {\r\n        var toReturn = 'flights';\r\n        var wl = window.location;\r\n        var l = wl.hostname\r\n        if (wl.pathname) {\r\n            l += wl.pathname;\r\n        }\r\n        // normalise the url\r\n        l = l.replace(/\\/[a-z]*\\/mobile/i, '');\r\n        // allow flights (instead of flight)\r\n        l = l.replace(/Search/, 's');\r\n        // ignore 'm.', get flights|hotels|etc, ignore domain, then get anything useful in urlpart1 (excluding [/?.] literally)\r\n        var res = l.match(/^(m\\.?)?([^\\.]*)\\.[^\\/]*\\/([^\\/\\?\\.]*)/);\r\n        // site structure is simple\r\n        // res[0] is the initial string\r\n\r\n        if (res && res.length > 0) {\r\n            if (res[2] != 'www' && res[2] != 'uatalpha' && res[2] != 'localhost') {\r\n                toReturn = res[2];\r\n            }\r\n            // site structure is not simple (or deviates...)\r\n            else if (res[3] !== 'webjet_au') {\r\n                // first part of the path\r\n                toReturn = res[3];\r\n            }\r\n\r\n        }\r\n\r\n        // handle issues where the url is mistyped (or varies in path)\r\n        toReturn = toReturn.toLowerCase();\r\n\r\n        return toReturn;\r\n\r\n    }\r\n\r\n\r\n    function build_qs(vars) {\r\n        var ret = '';\r\n        for (i in vars) {\r\n            if (typeof(vars[i]) == 'function') {\r\n                continue;\r\n            }\r\n            if (ret.length > 0) {\r\n                ret += '&';\r\n            }\r\n            ret += encodeURIComponent(i) + '=' + encodeURIComponent(vars[i]);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    function fire_pixel(qs) {\r\n        var url = \"//beacon.krxd.net/transaction.gif?\";\r\n        new Image().src = url + qs;\r\n    }\r\n\r\n    function getTransactInfo(type) {\r\n        var dl = window.dataLayer;\r\n        var pref = '';\r\n\r\n        // defaults\r\n        var ret = [];\r\n\r\n        // only if we have any data to pick up\r\n        if (dl && dl.length && dl.length > 0) {\r\n\r\n            // set price to 0\r\n            ret['total_price'] = 0;\r\n\r\n            // begin looping dataLayer\r\n            var l = dl.length;\r\n            var tp, tp_len, i, j, k;\r\n            for (i = 0; i < l; i++) {\r\n\r\n                // total amount\r\n                if (dl[i]['transactionTotal']) {\r\n                    ret['total_price'] = dl[i]['transactionTotal'];\r\n                }\r\n\r\n                //find the transactionProducts\r\n                if (!dl[i]['transactionProducts']) {\r\n                    continue;\r\n                }\r\n\r\n                // assuming transaction information here\r\n                tp = dl[i]['transactionProducts'];\r\n                tp_len = tp.length;\r\n                for (j = 0; j < tp_len; j++) {\r\n                    // 0 is flight info;\r\n                    if (j == 0) {\r\n                        pref = 'item';\r\n                        // quantity is defined here as others are ancillary options\r\n                        ret['quantity'] = tp[j]['quantity'];\r\n                    }\r\n                    // 1 is booking\r\n                    if (j == 1) {\r\n                        pref = 'bookingFee';\r\n                    }\r\n\r\n                    // named indices\r\n                    for (k in tp[j]) {\r\n                        if (!tp[j].hasOwnProperty(k)) {\r\n                            continue;\r\n                        }\r\n                        if (k == 'name' && tp[j][k].match(/ancillary/i)) {\r\n                            pref = 'ancillary';\r\n                            // as per spec\r\n                            tp[j][k] = tp[j][k].toLowerCase();\r\n                        }\r\n                        if (k == 'name' && tp[j][k].match(/^inpath/i)) {\r\n                            pref = 'inpath';\r\n                        }\r\n                        // hotel specific\r\n                        if (k == 'name' && type == 'hotels') {\r\n                            tp[j][k] = tp[j][k].toLowerCase();\r\n                        }\r\n\r\n                        // everything else\r\n                        ret[pref + '_' + k] = tp[j][k];\r\n                    }\r\n                }\r\n\r\n                // no additional looping needed\r\n                break;\r\n            }\r\n        }\r\n        // give back a value\r\n        return ret;\r\n    }\r\n\r\n    function getDate() {\r\n        var date = new Date();\r\n        var ret = date.getFullYear();\r\n\r\n        // format months with leading zeros\r\n        var m = (date.getMonth() + 1).toString();\r\n        m = (m.length == 1) ? '0' + m : m;\r\n        var d = (date.getDate()).toString();\r\n        d = (d.length == 1) ? '0' + d : d;\r\n\r\n        // all together now\r\n        ret = ret + '-' + m + '-' + d;\r\n\r\n        return ret;\r\n    }\r\n\r\n    // generic\r\n    var siteType = getSiteType();\r\n\r\n    // confirmation pages\r\n    if (window.location.pathname.match(/Confirmation|webjet_transaction.html/)) {\r\n        var transInfo = getTransactInfo(siteType);\r\n        transInfo['_kpuid'] = 'b255bed4-cbf2-494f-8122-47c1ec1b9fd3';\r\n\r\n        // to be most flexible, we set a type and a country so that the segment builder\r\n        transInfo['webjet_country'] = country;\r\n        transInfo['webjet_type'] = prefix;\r\n        transInfo['webjet_sitetype'] = siteType;\r\n\r\n        var date = new Date();\r\n        transInfo['orderDate'] = getDate();\r\n\r\n        // leave this part alone //\r\n        // build the query string\r\n        var qs = build_qs(transInfo);\r\n\r\n        // now fire the pixel\r\n        fire_pixel(qs);\r\n    }\r\n\r\n\r\n})();\r\n</script></span><span class=\"kxtag kxinvisible\" data-id=\"28072\"><script>\n(function(){\n     var kuid = Krux('get', 'user');\n     if (kuid) {\n         var prefix = 'https:';\n         var r_url = prefix + '//tacoda.at.atwola.com/atx/sync/uskrux/uskrx/'\n         var kurl = r_url + kuid;\n         var i = new Image();\n         i.src = kurl;\n     }\n})();\n</script></span></div><iframe id=\"LOTCCFrameFri Apr 21 2017 23:24:31 GMT-0500 (CDT)\" src=\"https://bcp.crwdcntrl.net/5/c=8549/rand=904775270/pv=y/rt=ifr\" style=\"border: 0px; width: 0px; height: 0px; display: block;\"></iframe><div id=\"inbenta-faq\" class=\"inbenta-webjet\"><div class=\"inbenta-interface inbenta-faq-interface\">\n\t<div id=\"content-height\" class=\"container\">\n\t\t<div class=\"inbenta-loader\" style=\"display:none\" iaf-loader=\"\"><span></span></div>\n\t\t<div id=\"lightbox-wrapper-faq\" class=\"inbenta-interface inbenta-faq-interface\" style=\"display:none\">\n\t\t\t<div id=\"lightbox-inner-wrapper\">\n\t\t\t\t<div id=\"lightbox-faq\" class=\"lightbox\">\n\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div></div><script type=\"text/javascript\" id=\"\" src=\"//static.criteo.net/js/ld/ld.js\"></script><script type=\"text/javascript\" id=\"\">(function(){var a=$(\"#error-page-text-header\").text().trim();void 0!=a&&0<a.length&&dataLayer.push({event:\"ga-event\",eventCategory:\"flights - error page\",eventAction:a,eventLabel:void 0,eventValue:void 0})})();</script>\n<script type=\"text/javascript\" id=\"\">(function(){var a=\"AU\"==google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm9')?9953:11332,b=(google_tag_manager[\"GTM-NMZ3GJ\"].macro('gtm10')||\"\").charAt(0).toLowerCase();window.criteo_q=window.criteo_q||[];window.criteo_q.push({event:\"setAccount\",account:a},{event:\"setSiteType\",type:b},{event:\"viewHome\"})})();</script><div id=\"criteo-tags-div\" style=\"display: none;\"><iframe height=\"0\" width=\"0\" src=\"//dis.as.criteo.com/dis/dis.aspx?p=11332&amp;cb=70657864442&amp;ref=&amp;sc_r=1280x1024&amp;sc_d=24\" style=\"display: none;\"></iframe></div></body><iframe id=\"kx-proxy-Ib52yQ5u\" src=\"https://cdn.krxd.net/partnerjs/xdi/proxy.3d2100fd7107262ecb55ce6847f01fa5.html#!kxcid=Ib52yQ5u&amp;kxt=https%3A%2F%2Fflights.webjet.co.nz&amp;kxcl=cdn&amp;kxp=\" style=\"display: none; visibility: hidden; height: 0; width: 0;\"></iframe>"}
